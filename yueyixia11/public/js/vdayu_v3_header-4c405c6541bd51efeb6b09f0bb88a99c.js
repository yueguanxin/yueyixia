$(function(){var a=$(".js-footer-advertise-close"),d=$(".js-footer-advertise");a.on("click",function(){d.addClass("is-active");$.ajax({url:$(this).data("url"),type:"get",dataType:"json",context:this,success:function(a,d){console.log(a)}})})});
$(function(){$(".js-backtop").affix({offset:{top:200}}).on("click",function(){$("html,body").animate({scrollTop:"0px"},300,"swing")});(function(){$("body").on("click",".js-city-selector-tabs a",function(a){a.preventDefault();$(this).tab("show");return!1});$(".js-navbar-search").on("focus",".jnsearch__input",function(a){var d=$(this),c=d.data("placeholder");$(".js-city-selector").addClass("is-open");a.stopPropagation();d.val()==c&&d.val("");0<$(".home-search").size()&&$.scrollTo(150,600);$("body").on("click",
function(a){0<$(a.target).parents(".js-navbar-search").size()||0<$(a.target).parents(".js-city-selector").size()||$(".js-city-selector").hasClass("is-open")&&$(".js-city-selector").removeClass("is-open")})});$(".js-navbar-search").on("blur",".jnsearch__input",function(a){a=$(this);var d=a.data("placeholder");""==a.val()&&a.val(d)});$(".js-navbar-search").on("click",".jnsearch__popup",function(a){if($(".jnsearch__input").val()==$(".jnsearch__input").data("placeholder"))return $(".jnsearch__input").focus(),
!1});$(".js-search-buton").click(function(){if($(".jnsearch__input").val()==$(".jnsearch__input").data("placeholder"))return $(".jnsearch__input").focus(),!1})})();(function(){var a;$(".js-footer-agent").hover(function(){a=setTimeout(function(){$(".js-footer-agent-popover").addClass("is-active")},500)},function(){clearTimeout(a)});$(".js-footer-agent-popover").on("mouseleave",function(a){$(".js-footer-agent-popover").removeClass("is-active")})})();0<$("body.body-home").size()&&$(".js-footer-affix").affix({offset:{top:200}});
(function(){var a=$(".js-footer-agent-popover");$(".js-footer-app-popover");$(".js-show-weixin-popover").popover({html:!0,placement:"top",trigger:"hover",title:"",content:function(){return a.html()},container:"body"});$(".js-show-app-modal").click(function(){$(".js-footer-app-modal").modal("show")});$(".js-close-footer-modal").click(function(){$(".js-footer-app-modal").modal("hide")})})();(function(){$(".resume_admin_cmd").live("ajax:success",function(a,d,c,h){"success"==d.status?$(d.html).appendTo("body").modal("show"):
show_simple_alert("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")})})()});
var revalidate_login_form=function(){$.browser.msie&&8===parseInt($.browser.version,10)&&$.placeholder&&$.placeholder.shim();$(".js-sessions-forgot-pwd-form").validate({rules:{"user[email]":{required:!0,email:!0}}});$(".js-sessions-login-form").validate({rules:{"user[email]":{required:!0,email:!0},"user[password]":{required:!0,minlength:6}}});$(".js-sessions-signup-form").validate({rules:{"user[email]":{required:!0,email:!0,remote:{url:"/users/register_form_check",type:"get"}},"user[password]":{required:!0,
minlength:6},"user[password_confirmation]":{equalTo:".need-confirmation"},"user[nickname]":{required:!0,zhRangeLength:[2,15],remote:{url:"/users/register_form_check",type:"get"}},invitation_code:{remote:{url:"/invitation_codes/check",type:"get",complete:function(a){console.log(a);"true"==a.responseText?$(".js-invitation-code-label-success").show():$(".js-invitation-code-label-success").hide()}}},tos:"required"},messages:{"user[email]":{remote:"\u8be5\u7535\u5b50\u90ae\u7bb1\u5730\u5740\u5df2\u5b58\u5728"},
"user[nickname]":{remote:"\u8be5\u6635\u79f0\u5df2\u5b58\u5728/\u4e0d\u5408\u6cd5"},invitation_code:{remote:"\u4f18\u60e0\u7801\u65e0\u6548\u6216\u8fc7\u671f"}}})};
$(function(){$("body").on("ajax:success",".js-sessions-login-form",function(a,b,d){"success"==b.status?(h(b.html),c(),e(""),$(".js-sessions-login-form")[0].reset()):"reload"==b.status?(c(),window.location.reload()):e(b.msg)});$("body").on("ajax:success",".js-sessions-signup-form",function(a,b,d){"success"==b.status?(h(b.html),c(),e(""),$(".js-sessions-signup-form")[0].reset()):"reload"==b.status?(c(),h(b.html),window.location.reload()):show_simple_alert("\u8bf7\u91cd\u8bd5!")});$("body").on("ajax:success",
".js-sessions-forgot-pwd-form",function(a,b,e){c();show_simple_alert(b.msg)});$("body").on("click",".js-show-signup-form",function(a,b,e){enable_form=$(".js-sessions-signup-form");d(enable_form)});$("body").on("click",".js-show-login-form",function(a,b,e){enable_form=$(".js-sessions-login-form");d(enable_form)});$("body").on("click",".js-show-forgot-pwd-form",function(a,b,e){enable_form=$(".js-sessions-forgot-pwd-form");d(enable_form)});$("body").on("click",".js-home-nav-cmd",function(){modal=$(".js-sessions-modal-fade");
0<modal.length?(a($(this)),modal.modal("show")):$.ajax({url:$(this).data("url"),type:"get",dataType:"json",context:this,success:function(a,b){if("success"==a.status)if(modal=$(".js-sessions-modal-fade"),0<modal.length)modal.modal("show");else{var e;e=""+a.html;$(e).appendTo("body").modal("show");revalidate_login_form()}}})});$("body").on("change",".js-invitation-code",function(){this.checked?$(".js-invitation-code-input").show():$(".js-invitation-code-input").hide()});var a=function(a){enable_form=
"index-signup"==a.attr("id")?$(".js-sessions-signup-form"):$(".js-sessions-login-form");d(enable_form)},d=function(a){$(".js-sessions-modal-fade").find("form").hide();e("");a.show()},c=function(){$(".js-sessions-modal-fade").modal("hide")},h=function(a){$(".js-home-nav-guest-menu").html(a)},e=function(a,e){$(".js-sessions-error-message").text(a)};revalidate_login_form()});
$(function(){$("body").on("click",".js-home-nav-cmd-login",function(){c();$(".js-sessions-modal-body-box").removeClass("is-active");$(".js-choose-login-box").addClass("is-active");$(".js-sessions-modal-fade").modal("show")});$("body").on("click",".js-home-nav-cmd-signup",function(){c();$(".js-sessions-modal-body-box").addClass("is-active");$(".js-signup-box").addClass("is-active");$(".js-signup-box").find("input").val("");$(".js-sessions-modal-fade").modal("show")});$("body").on("click",".js-show-phone-login-box",
function(){c();$(".js-phone-login-box").addClass("is-active");$(".js-phone-login-box").find("input").val("");$(".js-sessions-modal-fade").modal("show")});$("body").on("click",".js-show-email-login-box",function(){c();$(".js-email-login-box").addClass("is-active");$(".js-sessions-modal-fade").modal("show")});$("body").on("click",".js-show-signup-box",function(){c();$(".js-sessions-modal-body-box").addClass("is-active");$(".js-signup-box").addClass("is-active");$(".js-signup-box").find("input.sessions-form-input").not(":first").val("");
$(".js-sessions-modal-fade").modal("show")});$("body").on("click",".js-show-choose-login-box",function(){c();$(".js-sessions-modal-body-box").removeClass("is-active");$(".js-choose-login-box").addClass("is-active");$(".js-sessions-modal-fade").modal("show")});$("body").on("click",".js-show-phone-forgot-pwd",function(){cellphone_code=$(".js-phone-login-box").find("select option:selected").val();cellphone_num=$(".js-phone-login-box").find("#user_cellphone").val();c();$(".js-sessions-modal-body-box").addClass("is-active");
$(".js-phone-forgot-pwd").addClass("is-active");$(".js-phone-forgot-pwd").find("input.sessions-form-input").not(":first").val("");$(".js-phone-forgot-pwd").find("select option[value="+cellphone_code+"]").attr("selected",!0);$(".js-phone-forgot-pwd").find("#user_cellphone").val(cellphone_num);$(".js-sessions-modal-fade").modal("show")});$("body").on("click",".js-show-email-forgot-pwd",function(){email=$(".js-email-login-box").find("#user_email").val();c();$(".js-email-forgot-pwd").addClass("is-active");
$(".js-email-forgot-pwd").find("#user_email").val(email);$(".js-sessions-modal-fade").modal("show")});$("body").on("click",".js-sessions-close-modal",function(){$(".js-sessions-modal-fade").modal("hide")});$("body").on("click",".js-signup-send-captcha",function(){f=$(".update-cellphone-form");5<f.find("#user_cellphone").val().length?d(f):$(".js-sessions-error-msg").html("\u7535\u8bdd\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a")});var a=function(){count=60;reset_captcha_time=function(){count--;0>=count?($(".js-signup-send-captcha").removeClass("is-time"),
$(".js-signup-send-captcha").addClass("is-active"),$(".js-signup-send-captcha").text("\u53d1\u9001\u9a8c\u8bc1\u7801"),$(".js-signup-send-captcha").attr("disabled",!1),clearInterval(interval)):$(".js-signup-send-captcha").text(count+"\u79d2\u540e\u91cd\u65b0\u83b7\u53d6")};0<count&&($(".js-signup-send-captcha").addClass("is-time"),$(".js-signup-send-captcha").removeClass("is-active"),$(".js-signup-send-captcha").text(count+"\u79d2\u540e\u91cd\u65b0\u83b7\u53d6"),$(".js-signup-send-captcha").attr("disabled",
!0),interval=setInterval(reset_captcha_time,1E3))},d=function(e){cellphone_code=e.find("#cellphone_code").val();cellphone_num=e.find("#user_cellphone").val();back_class=e.find(".js-signup-send-captcha").data("back");url="/users/send_sms_code";$.ajax({type:"POST",url:url,data:{cellphone_code:cellphone_code,cellphone_num:cellphone_num,authenticity_token:$('meta[name="csrf-token"]').attr("content")},success:function(e){"failed"==e.status?(e=back_class,c(),$(".js-sessions-modal-body-box").removeClass("is-active"),
$(".js-image-captcha").addClass("is-active"),$(".js-refresh-image-captcha").trigger("click"),$(".js-sessions-modal-fade").modal("show"),$(".js-image-captcha").data("back",e)):a()}})},c=function(){$(".js-sessions-modal-body-box").find(".smbody__item").removeClass("is-active");$(".js-sessions-error-msg").hide()};$("body").on("ajax:success",".js-check-image-captcha-form",function(a,c,b){console.log(c);"success"==c.status?(back_class=$(".js-image-captcha").data("back"),"hide"==back_class?$(".js-sessions-modal-fade").modal("hide"):
$(back_class).trigger("click")):h(c.msg)});$("body").on("click",".js-refresh-image-captcha",function(a,c,b){url="/users/refresh_image_captcha";$.get(url,{},function(a){"failed"==a.status?h(a.msg):$(".js-image-captcha").html(a.html)})});$(".js-connections-binding-form").validate({onkeyup:function(a){"invitation_code"!=$(a).attr("name")&&$.validator.defaults.onkeyup.apply(this,arguments)},rules:{"user[cellphone_num]":{required:!0,isCellphone:!0},"user[password]":{required:!0,minlength:6}},unhighlight:function(a,
c,b){$(a).addClass(b).removeClass(c);"user_cellphone"!=$(a).attr("id")||$(".js-signup-send-captcha").hasClass("is-time")||($(".js-signup-send-captcha").addClass("is-active"),$(".js-signup-send-captcha").attr("disabled",!1))},highlight:function(a,c,b){$(a).addClass(c).removeClass(b);"user_cellphone"==$(a).attr("id")&&($(".js-signup-send-captcha").removeClass("is-active"),$(".js-signup-send-captcha").attr("disabled",!0))},messages:{invitation_code:{remote:"\u4f18\u60e0\u7801\u65e0\u6548\u6216\u8fc7\u671f"}}});
var h=function(a){$(".js-sessions-error-msg").html(a);$(".js-sessions-error-msg").show();console.log(a)}});
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function d(c){var b={},e=/^jQuery\d+$/;return a.each(c.attributes,function(a,c){c.specified&&!e.test(c.name)&&(b[c.name]=c.value)}),b}function c(c,b){var d=a(this);if(this.value==d.attr("placeholder")&&d.hasClass(k.customClass))if(d.data("placeholder-password")){if(d=d.hide().nextAll('input[type="password"]:first').show().attr("id",d.removeAttr("id").data("placeholder-id")),!0===c)return d[0].value=b;d.focus()}else this.value=
"",d.removeClass(k.customClass),this==e()&&this.select()}function h(){var b,e=a(this),h=this.id;if(""===this.value){if("password"===this.type){if(!e.data("placeholder-textinput")){try{b=e.clone().attr({type:"text"})}catch(g){b=a("<input>").attr(a.extend(d(this),{type:"text"}))}b.removeAttr("name").data({"placeholder-password":e,"placeholder-id":h}).bind("focus.placeholder",c);e.data({"placeholder-textinput":b,"placeholder-id":h}).before(b)}e=e.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",
h).show()}e.addClass(k.customClass);e[0].value=e.attr("placeholder")}else e.removeClass(k.customClass)}function e(){try{return document.activeElement}catch(a){}}var g,b="[object OperaMini]"==Object.prototype.toString.call(window.operamini),l="placeholder"in document.createElement("input")&&!b,b="placeholder"in document.createElement("textarea")&&!b,m=a.valHooks,n=a.propHooks;if(l&&b)g=a.fn.placeholder=function(){return this},g.input=g.textarea=!0;else{var k={};g=a.fn.placeholder=function(b){k=a.extend({},
{customClass:"placeholder"},b);return this.filter((l?"textarea":":input")+"[placeholder]").not("."+k.customClass).bind({"focus.placeholder":c,"blur.placeholder":h}).data("placeholder-enabled",!0).trigger("blur.placeholder"),this};g.input=l;g.textarea=b;g={get:function(c){var b=a(c),e=b.data("placeholder-password");return e?e[0].value:b.data("placeholder-enabled")&&b.hasClass(k.customClass)?"":c.value},set:function(b,d){var g=a(b),l=g.data("placeholder-password");return l?l[0].value=d:g.data("placeholder-enabled")?
(""===d?(b.value=d,b!=e()&&h.call(b)):g.hasClass(k.customClass)?c.call(b,!0,d)||(b.value=d):b.value=d,g):b.value=d}};l||(m.input=g,n.value=g);b||(m.textarea=g,n.value=g);a(function(){a(document).delegate("form","submit.placeholder",function(){var b=a("."+k.customClass,this).each(c);setTimeout(function(){b.each(h)},10)})});a(window).bind("beforeunload.placeholder",function(){a("."+k.customClass).each(function(){this.value=""})})}});
