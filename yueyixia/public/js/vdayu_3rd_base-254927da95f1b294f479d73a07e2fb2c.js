(function(b,d){b.rails!==d&&b.error("jquery-ujs has already been loaded!");var a,c=b(document);b.rails=a={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",
disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",
fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(a){var e=b('meta[name="csrf-token"]').attr("content");e&&a.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){var a=b("meta[name=csrf-token]").attr("content"),e=b("meta[name=csrf-param]").attr("content");b('form input[name="'+e+'"]').val(a)},fire:function(a,e,c){e=b.Event(e);
a.trigger(e,c);return!1!==e.result},confirm:function(b){return confirm(b)},ajax:function(a){return b.ajax(a)},href:function(b){return b[0].href},handleRemote:function(f){var e,c,h,l,m;if(a.fire(f,"ajax:before")){l=f.data("with-credentials")||null;m=f.data("type")||b.ajaxSettings&&b.ajaxSettings.dataType;if(f.is("form")){e=f.attr("method");c=f.attr("action");h=f.serializeArray();var r=f.data("ujs:submit-button");r&&(h.push(r),f.data("ujs:submit-button",null))}else f.is(a.inputChangeSelector)?(e=f.data("method"),
c=f.data("url"),h=f.serialize(),f.data("params")&&(h=h+"&"+f.data("params"))):f.is(a.buttonClickSelector)?(e=f.data("method")||"get",c=f.data("url"),h=f.serialize(),f.data("params")&&(h=h+"&"+f.data("params"))):(e=f.data("method"),c=a.href(f),h=f.data("params")||null);e={type:e||"GET",data:h,dataType:m,beforeSend:function(b,e){e.dataType===d&&b.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script);if(a.fire(f,"ajax:beforeSend",[b,e]))f.trigger("ajax:send",b);else return!1},success:function(b,
a,e){f.trigger("ajax:success",[b,a,e])},complete:function(b,a){f.trigger("ajax:complete",[b,a])},error:function(b,a,e){f.trigger("ajax:error",[b,a,e])},crossDomain:a.isCrossDomain(c)};l&&(e.xhrFields={withCredentials:l});c&&(e.url=c);return a.ajax(e)}return!1},isCrossDomain:function(b){var a=document.createElement("a");a.href=location.href;var c=document.createElement("a");try{return c.href=b,c.href=c.href,!(!(c.protocol&&":"!==c.protocol||c.host)||a.protocol+"//"+a.host===c.protocol+"//"+c.host)}catch(d){return!0}},
handleMethod:function(f){var e=a.href(f),c=f.data("method");f=f.attr("target");var h=b("meta[name=csrf-token]").attr("content"),l=b("meta[name=csrf-param]").attr("content"),m=b('<form method="post" action="'+e+'"></form>'),c='<input name="_method" value="'+c+'" type="hidden" />';l===d||h===d||a.isCrossDomain(e)||(c+='<input name="'+l+'" value="'+h+'" type="hidden" />');f&&m.attr("target",f);m.hide().append(c).appendTo("body");m.submit()},formElements:function(a,e){return a.is("form")?b(a[0].elements).filter(e):
a.find(e)},disableFormElements:function(f){a.formElements(f,a.disableSelector).each(function(){a.disableFormElement(b(this))})},disableFormElement:function(b){var a,c;a=b.is("button")?"html":"val";c=b.data("disable-with");b.data("ujs:enable-with",b[a]());if(c!==d)b[a](c);b.prop("disabled",!0)},enableFormElements:function(f){a.formElements(f,a.enableSelector).each(function(){a.enableFormElement(b(this))})},enableFormElement:function(b){var a=b.is("button")?"html":"val";if(b.data("ujs:enable-with"))b[a](b.data("ujs:enable-with"));
b.prop("disabled",!1)},allowAction:function(b){var e=b.data("confirm"),c=!1,d;if(!e)return!0;a.fire(b,"confirm")&&(c=a.confirm(e),d=a.fire(b,"confirm:complete",[c]));return c&&d},blankInputs:function(a,e,c){var d=b(),l,m,r=a.find(e||"input,textarea");r.each(function(){l=b(this);m=l.is("input[type=checkbox],input[type=radio]")?l.is(":checked"):l.val();if(!m===!c){if(l.is("input[type=radio]")&&r.filter('input[type=radio]:checked[name="'+l.attr("name")+'"]').length)return!0;d=d.add(l)}});return d.length?
d:!1},nonBlankInputs:function(b,e){return a.blankInputs(b,e,!0)},stopEverything:function(a){b(a.target).trigger("ujs:everythingStopped");a.stopImmediatePropagation();return!1},disableElement:function(b){var e=b.data("disable-with");b.data("ujs:enable-with",b.html());e!==d&&b.html(e);b.bind("click.railsDisable",function(b){return a.stopEverything(b)})},enableElement:function(b){b.data("ujs:enable-with")!==d&&(b.html(b.data("ujs:enable-with")),b.removeData("ujs:enable-with"));b.unbind("click.railsDisable")}};
a.fire(c,"rails:attachBindings")&&(b.ajaxPrefilter(function(b,e,c){b.crossDomain||a.CSRFProtection(c)}),c.delegate(a.linkDisableSelector,"ajax:complete",function(){a.enableElement(b(this))}),c.delegate(a.buttonDisableSelector,"ajax:complete",function(){a.enableFormElement(b(this))}),c.delegate(a.linkClickSelector,"click.rails",function(f){var e=b(this),c=e.data("method"),h=e.data("params"),l=f.metaKey||f.ctrlKey;if(!a.allowAction(e))return a.stopEverything(f);!l&&e.is(a.linkDisableSelector)&&a.disableElement(e);
if(e.data("remote")!==d){if(l&&(!c||"GET"===c)&&!h)return!0;f=a.handleRemote(e);!1===f?a.enableElement(e):f.error(function(){a.enableElement(e)});return!1}if(e.data("method"))return a.handleMethod(e),!1}),c.delegate(a.buttonClickSelector,"click.rails",function(f){var e=b(this);if(!a.allowAction(e))return a.stopEverything(f);e.is(a.buttonDisableSelector)&&a.disableFormElement(e);f=a.handleRemote(e);!1===f?a.enableFormElement(e):f.error(function(){a.enableFormElement(e)});return!1}),c.delegate(a.inputChangeSelector,
"change.rails",function(f){var e=b(this);if(!a.allowAction(e))return a.stopEverything(f);a.handleRemote(e);return!1}),c.delegate(a.formSubmitSelector,"submit.rails",function(f){var e=b(this),c=e.data("remote")!==d,h;if(!a.allowAction(e)||e.attr("novalidate")==d&&(h=a.blankInputs(e,a.requiredInputSelector))&&a.fire(e,"ajax:aborted:required",[h]))return a.stopEverything(f);if(c){if(f=a.nonBlankInputs(e,a.fileInputSelector))return setTimeout(function(){a.disableFormElements(e)},13),(f=a.fire(e,"ajax:aborted:file",
[f]))||setTimeout(function(){a.enableFormElements(e)},13),f;a.handleRemote(e);return!1}setTimeout(function(){a.disableFormElements(e)},13)}),c.delegate(a.formInputClickSelector,"click.rails",function(f){var e=b(this);if(!a.allowAction(e))return a.stopEverything(f);f=(f=e.attr("name"))?{name:f,value:e.val()}:null;e.closest("form").data("ujs:submit-button",f)}),c.delegate(a.formSubmitSelector,"ajax:send.rails",function(f){this==f.target&&a.disableFormElements(b(this))}),c.delegate(a.formSubmitSelector,
"ajax:complete.rails",function(f){this==f.target&&a.enableFormElements(b(this))}),b(function(){a.refreshCSRFTokens()}))})(jQuery);
(function(b){b.extend(b.fn,{validate:function(d){if(this.length){var a=b.data(this[0],"validator");if(a)return a;this.attr("novalidate","novalidate");a=new b.validator(d,this[0]);b.data(this[0],"validator",a);a.settings.onsubmit&&(this.validateDelegate(":submit","click",function(c){a.settings.submitHandler&&(a.submitButton=c.target);b(c.target).hasClass("cancel")&&(a.cancelSubmit=!0)}),this.submit(function(c){function f(){var f;return a.settings.submitHandler?(a.submitButton&&(f=b("<input type='hidden'/>").attr("name",
a.submitButton.name).val(a.submitButton.value).appendTo(a.currentForm)),a.settings.submitHandler.call(a,a.currentForm,c),a.submitButton&&f.remove(),!1):!0}a.settings.debug&&c.preventDefault();if(a.cancelSubmit)return a.cancelSubmit=!1,f();if(a.form())return a.pendingRequest?(a.formSubmitted=!0,!1):f();a.focusInvalid();return!1}));return a}d&&d.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(b(this[0]).is("form"))return this.validate().form();
var d=!0,a=b(this[0].form).validate();this.each(function(){d&=a.element(this)});return d},removeAttrs:function(d){var a={},c=this;b.each(d.split(/\s/),function(b,e){a[e]=c.attr(e);c.removeAttr(e)});return a},rules:function(d,a){var c=this[0];if(d){var f=b.data(c.form,"validator").settings,e=f.rules,g=b.validator.staticRules(c);switch(d){case "add":b.extend(g,b.validator.normalizeRule(a));e[c.name]=g;a.messages&&(f.messages[c.name]=b.extend(f.messages[c.name],a.messages));break;case "remove":if(!a)return delete e[c.name],
g;var h={};b.each(a.split(/\s/),function(b,a){h[a]=g[a];delete g[a]});return h}}c=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(c),b.validator.classRules(c),b.validator.attributeRules(c),b.validator.staticRules(c)),c);c.required&&(f=c.required,delete c.required,c=b.extend({required:f},c));return c}});b.extend(b.expr[":"],{blank:function(d){return!b.trim(""+d.value)},filled:function(d){return!!b.trim(""+d.value)},unchecked:function(b){return!b.checked}});b.validator=function(d,a){this.settings=
b.extend(!0,{},b.validator.defaults,d);this.currentForm=a;this.init()};b.validator.format=function(d,a){if(1===arguments.length)return function(){var a=b.makeArray(arguments);a.unshift(d);return b.validator.format.apply(this,a)};2<arguments.length&&a.constructor!==Array&&(a=b.makeArray(arguments).slice(1));a.constructor!==Array&&(a=[a]);b.each(a,function(b,a){d=d.replace(new RegExp("\\{"+b+"\\}","g"),a)});return d};b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",
validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(b,a){this.lastActive=b;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(b)).hide())},onfocusout:function(b,a){this.checkable(b)||!(b.name in this.submitted)&&this.optional(b)||this.element(b)},
onkeyup:function(b,a){(9!==a.which||""!==this.elementValue(b))&&(b.name in this.submitted||b===this.lastActive)&&this.element(b)},onclick:function(b,a){b.name in this.submitted?this.element(b):b.parentNode.name in this.submitted&&this.element(b.parentNode)},highlight:function(d,a,c){"radio"===d.type?this.findByName(d.name).addClass(a).removeClass(c):b(d).addClass(a).removeClass(c)},unhighlight:function(d,a,c){"radio"===d.type?this.findByName(d.name).removeClass(a).addClass(c):b(d).removeClass(a).addClass(c)}},
setDefaults:function(d){b.extend(b.validator.defaults,d)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:b.validator.format("Please enter no more than {0} characters."),
minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),min:b.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function d(a){var e=b.data(this[0].form,"validator"),c="on"+a.type.replace(/^validate/,
"");e.settings[c]&&e.settings[c].call(e,this[0],a)}this.labelContainer=b(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||b(this.currentForm);this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var a=this.groups={};b.each(this.settings.groups,function(f,e){b.each(e.split(/\s/),function(b,e){a[e]=f})});var c=
this.settings.rules;b.each(c,function(a,e){c[a]=b.validator.normalizeRule(e)});b(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",d).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",d);this.settings.invalidHandler&&
b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();b.extend(this.submitted,this.errorMap);this.invalid=b.extend({},this.errorMap);this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var b=0,a=this.currentElements=this.elements();a[b];b++)this.check(a[b]);return this.valid()},element:function(d){this.lastElement=d=this.validationTargetFor(this.clean(d));
this.prepareElement(d);this.currentElements=b(d);var a=!1!==this.check(d);a?delete this.invalid[d.name]:this.invalid[d.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return a},showErrors:function(d){if(d){b.extend(this.errorMap,d);this.errorList=[];for(var a in d)this.errorList.push({message:d[a],element:this.findByName(a)[0]});this.successList=b.grep(this.successList,function(b){return!(b.name in d)})}this.settings.showErrors?this.settings.showErrors.call(this,
this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(b){var a=0,c;for(c in b)a++;return a},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},
size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(d){}},findLastActive:function(){var d=this.lastActive;return d&&1===b.grep(this.errorList,function(b){return b.element.name===d.name}).length&&d},elements:function(){var d=this,a={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
d.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in a||!d.objectLength(b(this).rules())?!1:a[this.name]=!0})},clean:function(d){return b(d)[0]},errors:function(){var d=this.settings.errorClass.replace(" ",".");return b(this.settings.errorElement+"."+d,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=b([]);this.toHide=b([]);this.currentElements=b([])},prepareForm:function(){this.reset();this.toHide=
this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},elementValue:function(d){var a=b(d).attr("type"),c=b(d).val();return"radio"===a||"checkbox"===a?b('input[name="'+b(d).attr("name")+'"]:checked').val():"string"===typeof c?c.replace(/\r/g,""):c},check:function(d){d=this.validationTargetFor(this.clean(d));var a=b(d).rules(),c=!1,f=this.elementValue(d),e,g;for(g in a){var h={method:g,parameters:a[g]};try{if(e=b.validator.methods[g].call(this,f,
d,h.parameters),"dependency-mismatch"===e)c=!0;else{c=!1;if("pending"===e){this.toHide=this.toHide.not(this.errorsFor(d));return}if(!e)return this.formatAndAdd(d,h),!1}}catch(l){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+d.id+", check the '"+h.method+"' method",l),l;}}if(!c)return this.objectLength(a)&&this.successList.push(d),!0},customMetaMessage:function(d,a){if(b.metadata){var c=this.settings.meta?b(d).metadata()[this.settings.meta]:b(d).metadata();
return c&&c.messages&&c.messages[a]}},customDataMessage:function(d,a){return b(d).data("msg-"+a.toLowerCase())||d.attributes&&b(d).attr("data-msg-"+a.toLowerCase())},customMessage:function(b,a){var c=this.settings.messages[b];return c&&(c.constructor===String?c:c[a])},findDefined:function(){for(var b=0;b<arguments.length;b++)if(void 0!==arguments[b])return arguments[b]},defaultMessage:function(d,a){return this.findDefined(this.customMessage(d.name,a),this.customDataMessage(d,a),this.customMetaMessage(d,
a),!this.settings.ignoreTitle&&d.title||void 0,b.validator.messages[a],"<strong>Warning: No message defined for "+d.name+"</strong>")},formatAndAdd:function(d,a){var c=this.defaultMessage(d,a.method),f=/\$?\{(\d+)\}/g;"function"===typeof c?c=c.call(this,a.parameters,d):f.test(c)&&(c=b.validator.format(c.replace(f,"{$1}"),a.parameters));this.errorList.push({message:c,element:d});this.errorMap[d.name]=c;this.submitted[d.name]=c},addWrapper:function(b){this.settings.wrapper&&(b=b.add(b.parent(this.settings.wrapper)));
return b},defaultShowErrors:function(){var b,a;for(b=0;this.errorList[b];b++)a=this.errorList[b],this.settings.highlight&&this.settings.highlight.call(this,a.element,this.settings.errorClass,this.settings.validClass),this.showLabel(a.element,a.message);this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(b=0;this.successList[b];b++)this.showLabel(this.successList[b]);if(this.settings.unhighlight)for(b=0,a=this.validElements();a[b];b++)this.settings.unhighlight.call(this,
a[b],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(d,a){var c=this.errorsFor(d);c.length?(c.removeClass(this.settings.validClass).addClass(this.settings.errorClass),c.attr("generated")&&c.html(a)):(c=b("<"+this.settings.errorElement+
"/>").attr({"for":this.idOrName(d),generated:!0}).addClass(this.settings.errorClass).html(a||""),this.settings.wrapper&&(c=c.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(c).length||(this.settings.errorPlacement?this.settings.errorPlacement(c,b(d)):c.insertAfter(d)));!a&&this.settings.success&&(c.text(""),"string"===typeof this.settings.success?c.addClass(this.settings.success):this.settings.success(c,d));this.toShow=this.toShow.add(c)},errorsFor:function(d){var a=
this.idOrName(d);return this.errors().filter(function(){return b(this).attr("for")===a})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){this.checkable(b)&&(b=this.findByName(b.name).not(this.settings.ignore)[0]);return b},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(d){return b(this.currentForm).find('[name="'+d+'"]')},getLength:function(d,a){switch(a.nodeName.toLowerCase()){case "select":return b("option:selected",
a).length;case "input":if(this.checkable(a))return this.findByName(a.name).filter(":checked").length}return d.length},depend:function(b,a){return this.dependTypes[typeof b]?this.dependTypes[typeof b](b,a):!0},dependTypes:{"boolean":function(b,a){return b},string:function(d,a){return!!b(d,a.form).length},"function":function(b,a){return b(a)}},optional:function(d){var a=this.elementValue(d);return!b.validator.methods.required.call(this,a,d)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||
(this.pendingRequest++,this.pending[b.name]=!0)},stopRequest:function(d,a){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[d.name];a&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(b(this.currentForm).submit(),this.formSubmitted=!1):!a&&0===this.pendingRequest&&this.formSubmitted&&(b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(d){return b.data(d,"previousValue")||b.data(d,"previousValue",
{old:null,valid:!0,message:this.defaultMessage(d,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(d,a){d.constructor===String?this.classRuleSettings[d]=a:b.extend(this.classRuleSettings,d)},classRules:function(d){var a={};(d=b(d).attr("class"))&&b.each(d.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(a,b.validator.classRuleSettings[this])});
return a},attributeRules:function(d){var a={};d=b(d);for(var c in b.validator.methods){var f;"required"===c?(f=d.get(0).getAttribute(c),""===f&&(f=!0),f=!!f):f=d.attr(c);f?a[c]=f:d[0].getAttribute("type")===c&&(a[c]=!0)}a.maxlength&&/-1|2147483647|524288/.test(a.maxlength)&&delete a.maxlength;return a},metadataRules:function(d){if(!b.metadata)return{};var a=b.data(d.form,"validator").settings.meta;return a?b(d).metadata()[a]:b(d).metadata()},staticRules:function(d){var a={},c=b.data(d.form,"validator");
c.settings.rules&&(a=b.validator.normalizeRule(c.settings.rules[d.name])||{});return a},normalizeRules:function(d,a){b.each(d,function(c,f){if(!1===f)delete d[c];else if(f.param||f.depends){var e=!0;switch(typeof f.depends){case "string":e=!!b(f.depends,a.form).length;break;case "function":e=f.depends.call(a,a)}e?d[c]=void 0!==f.param?f.param:!0:delete d[c]}});b.each(d,function(c,f){d[c]=b.isFunction(f)?f(a):f});b.each(["minlength","maxlength","min","max"],function(){d[this]&&(d[this]=Number(d[this]))});
b.each(["rangelength","range"],function(){d[this]&&(d[this]=[Number(d[this][0]),Number(d[this][1])])});b.validator.autoCreateRanges&&(d.min&&d.max&&(d.range=[d.min,d.max],delete d.min,delete d.max),d.minlength&&d.maxlength&&(d.rangelength=[d.minlength,d.maxlength],delete d.minlength,delete d.maxlength));d.messages&&delete d.messages;return d},normalizeRule:function(d){if("string"===typeof d){var a={};b.each(d.split(/\s/),function(){a[this]=!0});d=a}return d},addMethod:function(d,a,c){b.validator.methods[d]=
a;b.validator.messages[d]=void 0!==c?c:b.validator.messages[d];3>a.length&&b.validator.addClassRules(d,b.validator.normalizeRule(d))},methods:{required:function(d,a,c){return this.depend(c,a)?"select"===a.nodeName.toLowerCase()?(d=b(a).val())&&0<d.length:this.checkable(a)?0<this.getLength(d,a):0<b.trim(d).length:"dependency-mismatch"},remote:function(d,a,c){if(this.optional(a))return"dependency-mismatch";var f=this.previousValue(a);this.settings.messages[a.name]||(this.settings.messages[a.name]={});
f.originalMessage=this.settings.messages[a.name].remote;this.settings.messages[a.name].remote=f.message;c="string"===typeof c&&{url:c}||c;if(this.pending[a.name])return"pending";if(f.old===d)return f.valid;f.old=d;var e=this;this.startRequest(a);var g={};g[a.name]=d;b.ajax(b.extend(!0,{url:c,mode:"abort",port:"validate"+a.name,dataType:"json",data:g,success:function(c){e.settings.messages[a.name].remote=f.originalMessage;var g=!0===c||"true"===c;if(g){var m=e.formSubmitted;e.prepareElement(a);e.formSubmitted=
m;e.successList.push(a);delete e.invalid[a.name];e.showErrors()}else m={},c=c||e.defaultMessage(a,"remote"),m[a.name]=f.message=b.isFunction(c)?c(d):c,e.invalid[a.name]=!0,e.showErrors(m);f.valid=g;e.stopRequest(a,g)}},c));return"pending"},minlength:function(d,a,c){d=b.isArray(d)?d.length:this.getLength(b.trim(d),a);return this.optional(a)||d>=c},maxlength:function(d,a,c){d=b.isArray(d)?d.length:this.getLength(b.trim(d),a);return this.optional(a)||d<=c},rangelength:function(d,a,c){d=b.isArray(d)?
d.length:this.getLength(b.trim(d),a);return this.optional(a)||d>=c[0]&&d<=c[1]},min:function(b,a,c){return this.optional(a)||b>=c},max:function(b,a,c){return this.optional(a)||b<=c},range:function(b,a,c){return this.optional(a)||b>=c[0]&&b<=c[1]},email:function(b,a){return this.optional(a)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(b)},
url:function(b,a){return this.optional(a)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(b)},
date:function(b,a){return this.optional(a)||!/Invalid|NaN/.test(new Date(b))},dateISO:function(b,a){return this.optional(a)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(b)},number:function(b,a){return this.optional(a)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(b)},digits:function(b,a){return this.optional(a)||/^\d+$/.test(b)},creditcard:function(b,a){if(this.optional(a))return"dependency-mismatch";if(/[^0-9 \-]+/.test(b))return!1;var c=0,f=0,e=!1;b=b.replace(/\D/g,"");for(var g=b.length-1;0<=
g;g--)f=b.charAt(g),f=parseInt(f,10),e&&9<(f*=2)&&(f-=9),c+=f,e=!e;return 0===c%10},equalTo:function(d,a,c){c=b(c);this.settings.onfocusout&&c.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(a).valid()});return d===c.val()}}});b.format=b.validator.format})(jQuery);
(function(b){var d={};if(b.ajaxPrefilter)b.ajaxPrefilter(function(b,a,e){a=b.port;"abort"===b.mode&&(d[a]&&d[a].abort(),d[a]=e)});else{var a=b.ajax;b.ajax=function(c){var f=("port"in c?c:b.ajaxSettings).port;return"abort"===("mode"in c?c:b.ajaxSettings).mode?(d[f]&&d[f].abort(),d[f]=a.apply(this,arguments)):a.apply(this,arguments)}}})(jQuery);
(function(b){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||b.each({focus:"focusin",blur:"focusout"},function(d,a){function c(f){f=b.event.fix(f);f.type=a;return b.event.handle.call(this,f)}b.event.special[a]={setup:function(){this.addEventListener(d,c,!0)},teardown:function(){this.removeEventListener(d,c,!0)},handler:function(f){var e=arguments;e[0]=b.event.fix(f);e[0].type=a;return b.event.handle.apply(this,e)}}});b.extend(b.fn,{validateDelegate:function(d,
a,c){return this.bind(a,function(a){var e=b(a.target);if(e.is(d))return c.apply(e,arguments)})}})})(jQuery);
jQuery.extend(jQuery.validator.messages,{required:"\u5fc5\u9009\u5b57\u6bb5",remote:"\u8bf7\u4fee\u6b63\u8be5\u5b57\u6bb5",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u7535\u5b50\u90ae\u4ef6",url:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u7f51\u5740",date:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u65e5\u671f (ISO).",number:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u6570\u5b57",digits:"\u53ea\u80fd\u8f93\u5165\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u4fe1\u7528\u5361\u53f7",
equalTo:"\u8bf7\u518d\u6b21\u8f93\u5165\u76f8\u540c\u7684\u503c",accept:"\u8bf7\u8f93\u5165\u62e5\u6709\u5408\u6cd5\u540e\u7f00\u540d\u7684\u6587\u672c",maxlength:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u957f\u5ea6\u6700\u591a\u662f {0} \u7684\u6587\u672c"),minlength:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u957f\u5ea6\u6700\u5c11\u662f {0} \u7684\u6587\u672c"),rangelength:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u957f\u5ea6\u4ecb\u4e8e {0} \u548c {1} \u4e4b\u95f4\u7684\u6587\u672c"),
range:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u4ecb\u4e8e {0} \u548c {1} \u4e4b\u95f4\u7684\u503c"),max:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6700\u5927\u4e3a {0} \u7684\u503c"),min:jQuery.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6700\u5c0f\u4e3a {0} \u7684\u503c")});
(function(b,d){$window=b(d);b.fn.lazyload=function(a){function c(){var a=0;f.each(function(){var f=b(this);if(!(e.skip_invisible&&!f.is(":visible")||b.abovethetop(this,e)||b.leftofbegin(this,e)))if(!b.belowthefold(this,e)&&!b.rightoffold(this,e))f.trigger("appear");else if(++a>e.failure_limit)return!1})}var f=this,e={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:d,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return a&&(void 0!==a.failurelimit&&(a.failure_limit=
a.failurelimit,delete a.failurelimit),void 0!==a.effectspeed&&(a.effect_speed=a.effectspeed,delete a.effectspeed),b.extend(e,a)),$container=void 0===e.container||e.container===d?$window:b(e.container),0===e.event.indexOf("scroll")&&$container.bind(e.event,function(b){return c()}),this.each(function(){var a=this,c=b(a);a.loaded=!1;c.one("appear",function(){this.loaded||(e.appear&&e.appear.call(a,f.length,e),b("<img />").bind("load",function(){c.hide().attr("src",c.data(e.data_attribute))[e.effect](e.effect_speed);
a.loaded=!0;var d=b.grep(f,function(b){return!b.loaded});f=b(d);e.load&&e.load.call(a,f.length,e)}).attr("src",c.data(e.data_attribute)))});0!==e.event.indexOf("scroll")&&c.bind(e.event,function(b){a.loaded||c.trigger("appear")})}),$window.bind("resize",function(b){c()}),c(),this};b.belowthefold=function(a,c){var f;return void 0===c.container||c.container===d?f=$window.height()+$window.scrollTop():f=$container.offset().top+$container.height(),f<=b(a).offset().top-c.threshold};b.rightoffold=function(a,
c){var f;return void 0===c.container||c.container===d?f=$window.width()+$window.scrollLeft():f=$container.offset().left+$container.width(),f<=b(a).offset().left-c.threshold};b.abovethetop=function(a,c){var f;return void 0===c.container||c.container===d?f=$window.scrollTop():f=$container.offset().top,f>=b(a).offset().top+c.threshold+b(a).height()};b.leftofbegin=function(a,c){var f;return void 0===c.container||c.container===d?f=$window.scrollLeft():f=$container.offset().left,f>=b(a).offset().left+c.threshold+
b(a).width()};b.inviewport=function(a,c){return!b.rightofscreen(a,c)&&!b.leftofscreen(a,c)&&!b.belowthefold(a,c)&&!b.abovethetop(a,c)};b.extend(b.expr[":"],{"below-the-fold":function(a){return b.belowthefold(a,{threshold:0,container:d})},"above-the-top":function(a){return!b.belowthefold(a,{threshold:0,container:d})},"right-of-screen":function(a){return b.rightoffold(a,{threshold:0,container:d})},"left-of-screen":function(a){return!b.rightoffold(a,{threshold:0,container:d})},"in-viewport":function(a){return!b.inviewport(a,
{threshold:0,container:d})},"above-the-fold":function(a){return!b.belowthefold(a,{threshold:0,container:d})},"right-of-fold":function(a){return b.rightoffold(a,{threshold:0,container:d})},"left-of-fold":function(a){return!b.rightoffold(a,{threshold:0,container:d})}})})(jQuery,window);
(function(b){b.event.special.textchange={setup:function(){b(this).data("lastValue","true"===this.contentEditable?b(this).html():b(this).val());b(this).bind("keyup.textchange",b.event.special.textchange.handler);b(this).bind("cut.textchange paste.textchange input.textchange",b.event.special.textchange.delayedHandler)},teardown:function(){b(this).unbind(".textchange")},handler:function(){b.event.special.textchange.triggerIfChanged(b(this))},delayedHandler:function(){var d=b(this);setTimeout(function(){b.event.special.textchange.triggerIfChanged(d)},
25)},triggerIfChanged:function(b){var a="true"===b[0].contentEditable?b.html():b.val();a!==b.data("lastValue")&&(b.trigger("textchange",[b.data("lastValue")]),b.data("lastValue",a))}};b.event.special.hastext={setup:function(){b(this).bind("textchange",b.event.special.hastext.handler)},teardown:function(){b(this).unbind("textchange",b.event.special.hastext.handler)},handler:function(d,a){""===a&&a!==b(this).val()&&b(this).trigger("hastext")}};b.event.special.notext={setup:function(){b(this).bind("textchange",
b.event.special.notext.handler)},teardown:function(){b(this).unbind("textchange",b.event.special.notext.handler)},handler:function(d,a){""===b(this).val()&&b(this).val()!==a&&b(this).trigger("notext")}}})(jQuery);
(function(b){function d(){this.debug=!0;this._curInst=null;this._disabledInputs=[];this._inDialog=this._timepickerShowing=!1;this._dialogClass="ui-timepicker-dialog";this._mainDivId="ui-timepicker-div";this._inlineClass="ui-timepicker-inline";this._currentClass="ui-timepicker-current";this._dayOverClass="ui-timepicker-days-cell-over";this.regional=[];this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"],closeButtonText:"Done",nowButtonText:"Now",deselectButtonText:"Deselect"};
this._defaults={showOn:"focus",button:null,showAnim:"fadeIn",showOptions:{},appendText:"",beforeShow:null,onSelect:null,onClose:null,timeSeparator:":",periodSeparator:" ",showPeriod:!1,showPeriodLabels:!0,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:"now",myPosition:"left top",atPosition:"left bottom",onHourShow:null,onMinuteShow:null,hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:5},rows:4,showHours:!0,showMinutes:!0,optionalMinutes:!1,showCloseButton:!1,showNowButton:!1,
showDeselectButton:!1};b.extend(this._defaults,this.regional[""]);this.tpDiv=b('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function a(a,e){b.extend(a,e);for(var c in e)if(null==e[c]||void 0==e[c])a[c]=e[c];return a}b.extend(b.ui,{timepicker:{version:"0.3.1"}});var c=(new Date).getTime();b.extend(d.prototype,{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},
setDefaults:function(b){a(this._defaults,b||{});return this},_attachTimepicker:function(a,e){var c=null,d;for(d in this._defaults){var l=a.getAttribute("time:"+d);if(l){c=c||{};try{c[d]=eval(l)}catch(m){c[d]=l}}}d=a.nodeName.toLowerCase();l="div"==d||"span"==d;a.id||(this.uuid+=1,a.id="tp"+this.uuid);var r=this._newInst(b(a),l);r.settings=b.extend({},e||{},c||{});"input"==d?(this._connectTimepicker(a,r),this._setTimeFromField(r)):l&&this._inlineTimepicker(a,r)},_newInst:function(a,e){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,
"\\\\$1"),input:a,inline:e,tpDiv:e?b('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>'):this.tpDiv}},_connectTimepicker:function(a,e){var c=b(a);e.append=b([]);e.trigger=b([]);c.hasClass(this.markerClassName)||(this._attachments(c,e),c.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",function(b,a,f){e.settings[a]=f}).bind("getData.timepicker",function(b,a){return this._get(e,a)}),b.data(a,"timepicker",e))},
_doKeyDown:function(a){var e=b.timepicker._getInst(a.target),c=!0;e._keyEvent=!0;if(b.timepicker._timepickerShowing)switch(a.keyCode){case 9:b.timepicker._hideTimepicker();c=!1;break;case 13:return b.timepicker._updateSelectedValue(e),b.timepicker._hideTimepicker(),!1;case 27:b.timepicker._hideTimepicker();break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?b.timepicker._showTimepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyUp:function(a){a=b.timepicker._getInst(a.target);b.timepicker._setTimeFromField(a);
b.timepicker._updateTimepicker(a)},_attachments:function(a,e){var c=this._get(e,"appendText"),d=this._get(e,"isRTL");e.append&&e.append.remove();c&&(e.append=b('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](e.append));a.unbind("focus.timepicker",this._showTimepicker);a.unbind("click.timepicker",this._adjustZIndex);e.trigger&&e.trigger.remove();c=this._get(e,"showOn");if("focus"==c||"both"==c)a.bind("focus.timepicker",this._showTimepicker),a.bind("click.timepicker",this._adjustZIndex);
if("button"==c||"both"==c)c=this._get(e,"button"),b(c).bind("click.timepicker",function(){b.timepicker._timepickerShowing&&b.timepicker._lastInput==a[0]?b.timepicker._hideTimepicker():e.input.is(":disabled")||b.timepicker._showTimepicker(a[0]);return!1})},_inlineTimepicker:function(a,e){var c=b(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(e.tpDiv).bind("setData.timepicker",function(b,a,f){e.settings[a]=f}).bind("getData.timepicker",function(b,a){return this._get(e,
a)}),b.data(a,"timepicker",e),this._setTimeFromField(e),this._updateTimepicker(e),e.tpDiv.show())},_adjustZIndex:function(a){a=a.target||a;b.timepicker._getInst(a).tpDiv.css("zIndex",b.timepicker._getZIndex(a)+1)},_showTimepicker:function(f){f=f.target||f;"input"!=f.nodeName.toLowerCase()&&(f=b("input",f.parentNode)[0]);if(!b.timepicker._isDisabledTimepicker(f)&&b.timepicker._lastInput!=f){b.timepicker._hideTimepicker();var e=b.timepicker._getInst(f);b.timepicker._curInst&&b.timepicker._curInst!=
e&&b.timepicker._curInst.tpDiv.stop(!0,!0);var c=b.timepicker._get(e,"beforeShow");a(e.settings,c?c.apply(f,[f,e]):{});e.lastVal=null;b.timepicker._lastInput=f;b.timepicker._setTimeFromField(e);b.timepicker._inDialog&&(f.value="");b.timepicker._pos||(b.timepicker._pos=b.timepicker._findPos(f),b.timepicker._pos[1]+=f.offsetHeight);var d=!1;b(f).parents().each(function(){d|="fixed"==b(this).css("position");return!d});d&&b.browser.opera&&(b.timepicker._pos[0]-=document.documentElement.scrollLeft,b.timepicker._pos[1]-=
document.documentElement.scrollTop);c={left:b.timepicker._pos[0],top:b.timepicker._pos[1]};b.timepicker._pos=null;e.tpDiv.css({position:"absolute",display:"block",top:"-1000px"});b.timepicker._updateTimepicker(e);e.inline||"object"!=typeof b.ui.position||(e.tpDiv.position({of:e.input,my:b.timepicker._get(e,"myPosition"),at:b.timepicker._get(e,"atPosition"),collision:"flip"}),c=e.tpDiv.offset(),b.timepicker._pos=[c.top,c.left]);e._hoursClicked=!1;e._minutesClicked=!1;c=b.timepicker._checkOffset(e,
c,d);e.tpDiv.css({position:b.timepicker._inDialog&&b.blockUI?"static":d?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!e.inline){var c=b.timepicker._get(e,"showAnim"),l=b.timepicker._get(e,"duration"),m=function(){b.timepicker._timepickerShowing=!0;var a=b.timepicker._getBorders(e.tpDiv);e.tpDiv.find("iframe.ui-timepicker-cover").css({left:-a[0],top:-a[1],width:e.tpDiv.outerWidth(),height:e.tpDiv.outerHeight()})};b.timepicker._adjustZIndex(f);b.effects&&b.effects[c]?e.tpDiv.show(c,
b.timepicker._get(e,"showOptions"),l,m):e.tpDiv.show(c?l:null,m);c&&l||m();e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus();b.timepicker._curInst=e}}},_getZIndex:function(a){a=b(a);for(var e;a.length&&a[0]!==document;){e=a.css("position");if("absolute"===e||"relative"===e||"fixed"===e)if(e=parseInt(a.css("zIndex"),10),!isNaN(e)&&0!==e)return e;a=a.parent()}},_refreshTimepicker:function(b){(b=this._getInst(b))&&this._updateTimepicker(b)},_updateTimepicker:function(b){b.tpDiv.empty().append(this._generateHTML(b));
this._rebindDialogEvents(b)},_rebindDialogEvents:function(a){var e=b.timepicker._getBorders(a.tpDiv),c=this;a.tpDiv.find("iframe.ui-timepicker-cover").css({left:-e[0],top:-e[1],width:a.tpDiv.outerWidth(),height:a.tpDiv.outerHeight()}).end().find(".ui-timepicker-minute-cell").unbind().bind("click",{fromDoubleClick:!1},b.proxy(b.timepicker.selectMinutes,this)).bind("dblclick",{fromDoubleClick:!0},b.proxy(b.timepicker.selectMinutes,this)).end().find(".ui-timepicker-hour-cell").unbind().bind("click",
{fromDoubleClick:!1},b.proxy(b.timepicker.selectHours,this)).bind("dblclick",{fromDoubleClick:!0},b.proxy(b.timepicker.selectHours,this)).end().find(".ui-timepicker td a").unbind().bind("mouseout",function(){b(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-timepicker-prev")&&b(this).removeClass("ui-timepicker-prev-hover");-1!=this.className.indexOf("ui-timepicker-next")&&b(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){c._isDisabledTimepicker(a.inline?
a.tpDiv.parent()[0]:a.input[0])||(b(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),b(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-timepicker-prev")&&b(this).addClass("ui-timepicker-prev-hover"),-1!=this.className.indexOf("ui-timepicker-next")&&b(this).addClass("ui-timepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end().find(".ui-timepicker-now").bind("click",function(a){b.timepicker.selectNow(a)}).end().find(".ui-timepicker-deselect").bind("click",
function(a){b.timepicker.deselectTime(a)}).end().find(".ui-timepicker-close").bind("click",function(a){b.timepicker._hideTimepicker()}).end()},_generateHTML:function(a){var e,c,d,l,m=1==this._get(a,"showPeriod"),r=1==this._get(a,"showPeriodLabels"),n=1==this._get(a,"showLeadingZero");c=1==this._get(a,"showHours");var p=1==this._get(a,"showMinutes"),t=this._get(a,"amPmText"),s=this._get(a,"rows"),u=0,v=0,k=l=0,M=0,F=0,x=[],w=this._get(a,"hours");e=null;var y=0;d=this._get(a,"hourText");var B=this._get(a,
"showCloseButton"),q=this._get(a,"closeButtonText"),z=this._get(a,"showNowButton"),N=this._get(a,"nowButtonText"),H=this._get(a,"showDeselectButton"),T=this._get(a,"deselectButtonText"),I=B||z||H;for(e=w.starts;e<=w.ends;e++)x.push(e);e=Math.ceil(x.length/s);if(r){for(y=0;y<x.length;y++)12>x[y]?l++:k++;y=0;u=Math.floor(l/x.length*s);v=Math.floor(k/x.length*s);s!=u+v&&(l&&(!k||!u||v&&l/u>=k/v)?u++:v++);M=Math.min(u,1);F=u+1;e=0==u?Math.ceil(k/v):0==v?Math.ceil(l/u):Math.ceil(Math.max(l/u,k/v))}l='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr>';
if(c){l+='<td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+d+'</div><table class="ui-timepicker">';for(c=1;c<=s;c++){l+="<tr>";c==M&&r&&(l+='<th rowspan="'+u.toString()+'" class="periods" scope="row">'+t[0]+"</th>");c==F&&r&&(l+='<th rowspan="'+v.toString()+'" class="periods" scope="row">'+t[1]+"</th>");for(d=1;d<=e;d++)r&&c<F&&12<=x[y]?l+=this._generateHTMLHourCell(a,void 0,m,n):(l+=this._generateHTMLHourCell(a,x[y],m,n),y++);l+=
"</tr>"}l+="</table></td>"}p&&(l=l+'<td class="ui-timepicker-minutes">'+this._generateHTMLMinutes(a),l+="</td>");l+="</tr>";I&&(m='<tr><td colspan="3"><div class="ui-timepicker-buttonpane ui-widget-content">',z&&(m+='<button type="button" class="ui-timepicker-now ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" >'+N+"</button>"),H&&(m+='<button type="button" class="ui-timepicker-deselect ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+
a.id.replace(/\\\\/g,"\\")+'" >'+T+"</button>"),B&&(m+='<button type="button" class="ui-timepicker-close ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" >'+q+"</button>"),l+=m+"</div></td></tr>");l+="</table>";return l+=b.browser.msie&&7>parseInt(b.browser.version,10)&&!a.inline?'<iframe src="javascript:false;" class="ui-timepicker-cover" frameborder="0"></iframe>':""},_updateMinuteDisplay:function(b){var a=this._generateHTMLMinutes(b);b.tpDiv.find("td.ui-timepicker-minutes").html(a);
this._rebindDialogEvents(b)},_generateHTMLMinutes:function(b){var a,c,d="",l=this._get(b,"rows"),m=[];c=this._get(b,"minutes");var r=null,n=0,p=1==this._get(b,"showMinutesLeadingZero"),t=this._get(b,"onMinuteShow"),s=this._get(b,"minuteText");c.starts||(c.starts=0);c.ends||(c.ends=59);for(a=c.starts;a<=c.ends;a+=c.interval)m.push(a);r=Math.round(m.length/l+.49);if(t&&0==t.apply(b.input?b.input[0]:null,[b.hours,b.minutes]))for(n=0;n<m.length;n+=1)if(a=m[n],t.apply(b.input?b.input[0]:null,[b.hours,
a])){b.minutes=a;break}d+='<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+s+'</div><table class="ui-timepicker">';n=0;for(c=1;c<=l;c++){for(d+="<tr>";n<c*r;)a=m[n],t="",void 0!==a&&(t=10>a&&p?"0"+a.toString():a.toString()),d+=this._generateHTMLMinuteCell(b,a,t),n++;d+="</tr>"}return d+"</table>"},_generateHTMLHourCell:function(b,a,c,d){var l=a;12<a&&c&&(l=a-12);0==l&&c&&(l=12);10>l&&d&&(l="0"+l);c="";c=!0;d=this._get(b,"onHourShow");if(void 0==a)return'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>';
d&&(c=d.apply(b.input?b.input[0]:null,[a]));return c=c?'<td class="ui-timepicker-hour-cell" data-timepicker-instance-id="#'+b.id.replace(/\\\\/g,"\\")+'" data-hour="'+a.toString()+'"><a class="ui-state-default '+(a==b.hours?"ui-state-active":"")+'">'+l.toString()+"</a></td>":'<td><span class="ui-state-default ui-state-disabled '+(a==b.hours?" ui-state-active ":" ")+'">'+l.toString()+"</span></td>"},_generateHTMLMinuteCell:function(b,a,c){var d="",d=!0,l=this._get(b,"onMinuteShow");l&&(d=l.apply(b.input?
b.input[0]:null,[b.hours,a]));return void 0==a?'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>':d=d?'<td class="ui-timepicker-minute-cell" data-timepicker-instance-id="#'+b.id.replace(/\\\\/g,"\\")+'" data-minute="'+a.toString()+'" ><a class="ui-state-default '+(a==b.minutes?"ui-state-active":"")+'" >'+c+"</a></td>":'<td><span class="ui-state-default ui-state-disabled" >'+c+"</span></td>"},_destroyTimepicker:function(a){var e=b(a),c=b.data(a,"timepicker");if(e.hasClass(this.markerClassName)){var d=
a.nodeName.toLowerCase();b.removeData(a,"timepicker");"input"==d?(c.append.remove(),c.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus.timepicker",this._showTimepicker).unbind("click.timepicker",this._adjustZIndex)):"div"!=d&&"span"!=d||e.removeClass(this.markerClassName).empty()}},_enableTimepicker:function(a){var e=b(a),c=e.attr("id"),d=b.data(a,"timepicker");if(e.hasClass(this.markerClassName)){var l=a.nodeName.toLowerCase();if("input"==l)a.disabled=!1,a=this._get(d,"button"),
b(a).removeClass("ui-state-disabled").disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end();else if("div"==l||"span"==l)d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("button").each(function(){this.disabled=!1});this._disabledInputs=b.map(this._disabledInputs,function(b){return b==c?null:b})}},_disableTimepicker:function(a){var e=b(a),c=b.data(a,"timepicker");if(e.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==
d)d=this._get(c,"button"),b(d).addClass("ui-state-disabled").disabled=!0,a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end();else if("div"==d||"span"==d)c=e.children("."+this._inlineClass),c.children().addClass("ui-state-disabled"),c.find("button").each(function(){this.disabled=!0});this._disabledInputs=b.map(this._disabledInputs,function(b){return b==a?null:b});this._disabledInputs[this._disabledInputs.length]=e.attr("id")}},_isDisabledTimepicker:function(b){if(!b)return!1;
for(var a=0;a<this._disabledInputs.length;a++)if(this._disabledInputs[a]==b)return!0;return!1},_checkOffset:function(a,e,c){var d=a.tpDiv.outerWidth(),l=a.tpDiv.outerHeight(),m=a.input?a.input.outerWidth():0,r=a.input?a.input.outerHeight():0,n=document.documentElement.clientWidth+b(document).scrollLeft(),p=document.documentElement.clientHeight+b(document).scrollTop();e.left-=this._get(a,"isRTL")?d-m:0;e.left-=c&&e.left==a.input.offset().left?b(document).scrollLeft():0;e.top-=c&&e.top==a.input.offset().top+
r?b(document).scrollTop():0;e.left-=Math.min(e.left,e.left+d>n&&n>d?Math.abs(e.left+d-n):0);e.top-=Math.min(e.top,e.top+l>p&&p>l?Math.abs(l+r):0);return e},_findPos:function(a){for(var e=this._getInst(a),e=this._get(e,"isRTL");a&&("hidden"==a.type||1!=a.nodeType);)a=a[e?"previousSibling":"nextSibling"];a=b(a).offset();return[a.left,a.top]},_getBorders:function(b){var a=function(b){return{thin:1,medium:2,thick:3}[b]||b};return[parseFloat(a(b.css("border-left-width"))),parseFloat(a(b.css("border-top-width")))]},
_checkExternalClick:function(a){b.timepicker._curInst&&(a=b(a.target),a[0].id==b.timepicker._mainDivId||0!=a.parents("#"+b.timepicker._mainDivId).length||a.hasClass(b.timepicker.markerClassName)||a.hasClass(b.timepicker._triggerClass)||!b.timepicker._timepickerShowing||b.timepicker._inDialog&&b.blockUI||b.timepicker._hideTimepicker())},_hideTimepicker:function(a){var e=this._curInst;if(e&&(!a||e==b.data(a,"timepicker"))&&this._timepickerShowing){a=this._get(e,"showAnim");var c=this._get(e,"duration"),
d=function(){b.timepicker._tidyDialog(e);this._curInst=null};if(b.effects&&b.effects[a])e.tpDiv.hide(a,b.timepicker._get(e,"showOptions"),c,d);else e.tpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?c:null,d);a||d();this._timepickerShowing=!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),b.blockUI&&(b.unblockUI(),b("body").append(this.tpDiv)));this._inDialog=!1;(a=this._get(e,"onClose"))&&a.apply(e.input?e.input[0]:null,[e.input?
e.input.val():"",e])}},_tidyDialog:function(b){b.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(a){try{return b.data(a,"timepicker")}catch(e){throw"Missing instance data for this timepicker";}},_get:function(b,a){return void 0!==b.settings[a]?b.settings[a]:this._defaults[a]},_setTimeFromField:function(a){if(a.input.val()!=a.lastVal){var e=this._get(a,"defaultTime"),e="now"==e?this._getCurrentTimeRounded(a):e;0==a.inline&&""!=a.input.val()&&(e=a.input.val());if(e instanceof
Date)a.hours=e.getHours(),a.minutes=e.getMinutes();else{var c=a.lastVal=e;""==e?(a.hours=-1,a.minutes=-1):(e=this.parseTime(a,c),a.hours=e.hours,a.minutes=e.minutes)}b.timepicker._updateTimepicker(a)}},_optionTimepicker:function(f,e,c){var d=this._getInst(f);if(2==arguments.length&&"string"==typeof e)return"defaults"==e?b.extend({},b.timepicker._defaults):d?"all"==e?b.extend({},d.settings):this._get(d,e):null;var l=e||{};"string"==typeof e&&(l={},l[e]=c);d&&(this._curInst==d&&this._hideTimepicker(),
a(d.settings,l),this._updateTimepicker(d))},_setTimeTimepicker:function(a,b){var c=this._getInst(a);c&&(this._setTime(c,b),this._updateTimepicker(c),this._updateAlternate(c,b))},_setTime:function(a,b,c){var d=a.hours,l=a.minutes;b instanceof Date?(a.hours=b.getHours(),a.minutes=b.getMinutes()):(b=this.parseTime(a,b),a.hours=b.hours,a.minutes=b.minutes);d==a.hours&&l==a.minutes||c||a.input.trigger("change");this._updateTimepicker(a);this._updateSelectedValue(a)},_getCurrentTimeRounded:function(a){a=
new Date;var b=a.getMinutes(),b=5*Math.round(b/5);a.setMinutes(b);return a},parseTime:function(a,b){var c={hours:-1,minutes:-1},d=this._get(a,"timeSeparator"),l=this._get(a,"amPmText"),m=this._get(a,"showHours"),r=this._get(a,"showMinutes"),n=this._get(a,"optionalMinutes"),p=1==this._get(a,"showPeriod"),d=b.indexOf(d);-1!=d?(c.hours=parseInt(b.substr(0,d),10),c.minutes=parseInt(b.substr(d+1),10)):!m||r&&!n?!m&&r&&(c.minutes=parseInt(b,10)):c.hours=parseInt(b,10);m&&(m=b.toUpperCase(),12>c.hours&&
p&&-1!=m.indexOf(l[1].toUpperCase())&&(c.hours+=12),12==c.hours&&p&&-1!=m.indexOf(l[0].toUpperCase())&&(c.hours=0));return c},selectNow:function(a){a=b(a.target).attr("data-timepicker-instance-id");a=b(a);a=this._getInst(a[0]);var c=new Date;a.hours=c.getHours();a.minutes=c.getMinutes();this._updateSelectedValue(a);this._updateTimepicker(a);this._hideTimepicker()},deselectTime:function(a){a=b(a.target).attr("data-timepicker-instance-id");a=b(a);a=this._getInst(a[0]);a.hours=-1;a.minutes=-1;this._updateSelectedValue(a);
this._hideTimepicker()},selectHours:function(a){var c=b(a.currentTarget),d=c.attr("data-timepicker-instance-id"),h=parseInt(c.attr("data-hour"));a=a.data.fromDoubleClick;var d=b(d),l=this._getInst(d[0]),m=1==this._get(l,"showMinutes");if(b.timepicker._isDisabledTimepicker(d.attr("id")))return!1;c.parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active");c.children("a").addClass("ui-state-active");l.hours=h;this._get(l,"onMinuteShow")&&this._updateMinuteDisplay(l);this._updateSelectedValue(l);
l._hoursClicked=!0;(l._minutesClicked||a||0==m)&&b.timepicker._hideTimepicker();return!1},selectMinutes:function(a){var c=b(a.currentTarget),d=c.attr("data-timepicker-instance-id"),h=parseInt(c.attr("data-minute"));a=a.data.fromDoubleClick;var d=b(d),l=this._getInst(d[0]),m=1==this._get(l,"showHours");if(b.timepicker._isDisabledTimepicker(d.attr("id")))return!1;c.parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active");c.children("a").addClass("ui-state-active");l.minutes=
h;this._updateSelectedValue(l);l._minutesClicked=!0;(l._hoursClicked||a||0==m)&&b.timepicker._hideTimepicker();return!1},_updateSelectedValue:function(a){var b=this._getParsedTime(a);a.input&&(a.input.val(b),a.input.trigger("change"));var c=this._get(a,"onSelect");c&&c.apply(a.input?a.input[0]:null,[b,a]);this._updateAlternate(a,b);return b},_getParsedTime:function(a){if(-1==a.hours&&-1==a.minutes)return"";if(a.hours<a.hours.starts||a.hours>a.hours.ends)a.hours=0;if(a.minutes<a.minutes.starts||a.minutes>
a.minutes.ends)a.minutes=0;var b="",c=1==this._get(a,"showPeriod"),d=1==this._get(a,"showLeadingZero"),l=1==this._get(a,"showHours"),m=1==this._get(a,"showMinutes"),r=1==this._get(a,"optionalMinutes"),n=this._get(a,"amPmText"),p=a.hours?a.hours:0,t=a.minutes?a.minutes:0,s=p?p:0,p="";-1==s&&(s=0);-1==t&&(t=0);c&&(0==a.hours&&(s=12),12>a.hours?b=n[0]:(b=n[1],12<s&&(s-=12)));c=s.toString();d&&10>s&&(c="0"+c);d=t.toString();10>t&&(d="0"+d);l&&(p+=c);!l||!m||r&&0==d||(p+=this._get(a,"timeSeparator"));
!m||r&&0==d||(p+=d);l&&0<b.length&&(p+=this._get(a,"periodSeparator")+b);return p},_updateAlternate:function(a,c){var d=this._get(a,"altField");d&&b(d).each(function(a,f){b(f).val(c)})},_getTimeAsDateTimepicker:function(a){a=this._getInst(a);if(-1==a.hours&&-1==a.minutes)return"";if(a.hours<a.hours.starts||a.hours>a.hours.ends)a.hours=0;if(a.minutes<a.minutes.starts||a.minutes>a.minutes.ends)a.minutes=0;return new Date(0,0,0,a.hours,a.minutes,0)},_getTimeTimepicker:function(a){a=this._getInst(a);
return this._getParsedTime(a)},_getHourTimepicker:function(a){a=this._getInst(a);return void 0==a?-1:a.hours},_getMinuteTimepicker:function(a){a=this._getInst(a);return void 0==a?-1:a.minutes}});b.fn.timepicker=function(a){b.timepicker.initialized||(b(document).mousedown(b.timepicker._checkExternalClick).find("body").append(b.timepicker.tpDiv),b.timepicker.initialized=!0);var c=Array.prototype.slice.call(arguments,1);return"string"==typeof a&&("getTime"==a||"getTimeAsDate"==a||"getHour"==a||"getMinute"==
a)||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?b.timepicker["_"+a+"Timepicker"].apply(b.timepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof a?b.timepicker["_"+a+"Timepicker"].apply(b.timepicker,[this].concat(c)):b.timepicker._attachTimepicker(this,a)})};b.timepicker=new d;b.timepicker.initialized=!1;b.timepicker.uuid=(new Date).getTime();b.timepicker.version="0.3.1";window["TP_jQuery_"+c]=b})(jQuery);
(function(b){b.Jcrop=function(d,a){function c(a){return Math.round(a)+"px"}function f(a){a=b(a).offset();return[a.left,a.top]}function e(a){return[a.pageX-z[0],a.pageY-z[1]]}function g(a){"object"!=typeof a&&(a={});q=b.extend(q,a);b.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){"function"!=typeof q[b]&&(q[b]=function(){})})}function h(a,b,c){z=f(A);X.setCursor("move"===a?a:a+"-resize");if("move"===a)return X.activateHandlers(m(b),s,c);b=J.getFixed();var e=r(a),d=J.getCorner(r(e));
J.setPressed(J.getCorner(e));J.setCurrent(d);X.activateHandlers(l(a,b),s,c)}function l(a,b){return function(c){if(q.aspectRatio)switch(a){case "e":c[1]=b.y+1;break;case "w":c[1]=b.y+1;break;case "n":c[0]=b.x+1;break;case "s":c[0]=b.x+1}else switch(a){case "e":c[1]=b.y2;break;case "w":c[1]=b.y2;break;case "n":c[0]=b.x2;break;case "s":c[0]=b.x2}J.setCurrent(c);E.update()}}function m(a){var b=a;return ha.watchKeys(),function(a){J.moveOffset([a[0]-b[0],a[1]-b[1]]);b=a;E.update()}}function r(a){switch(a){case "n":return"sw";
case "s":return"nw";case "e":return"nw";case "w":return"ne";case "ne":return"sw";case "nw":return"se";case "se":return"nw";case "sw":return"ne"}}function n(a){return function(b){return q.disabled?!1:"move"!==a||q.allowMove?(z=f(A),ba=!0,h(a,e(b)),b.stopPropagation(),b.preventDefault(),!1):!1}}function p(a,b,c){var e=a.width(),f=a.height();e>b&&0<b&&(e=b,f=b/a.width()*a.height());f>c&&0<c&&(f=c,e=c/a.height()*a.width());O=a.width()/e;P=a.height()/f;a.width(e).height(f)}function t(a){return{x:a.x*O,
y:a.y*P,x2:a.x2*O,y2:a.y2*P,w:a.w*O,h:a.h*P}}function s(a){a=J.getFixed();a.w>q.minSelect[0]&&a.h>q.minSelect[1]?(E.enableHandles(),E.done()):E.release();X.setCursor(q.allowSelect?"crosshair":"default")}function u(a){if(q.disabled||!q.allowSelect)return!1;ba=!0;z=f(A);E.disableHandles();X.setCursor("crosshair");var b=e(a);return J.setPressed(b),E.update(),X.activateHandlers(v,s,"touch"===a.type.substring(0,5)),ha.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}function v(a){J.setCurrent(a);
E.update()}function k(){var a=b("<div></div>").addClass(q.baseClass+"-tracker");return H&&a.css({opacity:0,backgroundColor:"white"}),a}function M(a){F([a[0]/O,a[1]/P,a[2]/O,a[3]/P]);q.onSelect.call(U,t(J.getFixed()));E.enableHandles()}function F(a){J.setPressed([a[0],a[1]]);J.setCurrent([a[2],a[3]]);E.update()}function x(){q.disabled=!0;E.disableHandles();E.setCursor("default");X.setCursor("default")}function w(){q.disabled=!1;B()}function y(a,c,e){c=c||q.bgColor;q.bgFade&&b.fx.step.hasOwnProperty("backgroundColor")&&
q.fadeTime&&!e?a.animate({backgroundColor:c},{queue:!1,duration:q.fadeTime}):a.css("backgroundColor",c)}function B(a){q.allowResize?a?E.enableOnly():E.enableHandles():E.disableHandles();X.setCursor(q.allowSelect?"crosshair":"default");E.setCursor(q.allowMove?"move":"default");q.hasOwnProperty("trueSize")&&(O=q.trueSize[0]/C,P=q.trueSize[1]/D);q.hasOwnProperty("setSelect")&&(M(q.setSelect),E.done(),delete q.setSelect);aa.refresh();q.bgColor!=ja&&(y(q.shade?aa.getShades():Q,q.shade?q.shadeColor||q.bgColor:
q.bgColor),ja=q.bgColor);ca!=q.bgOpacity&&(ca=q.bgOpacity,q.shade?aa.refresh():E.setBgOpacity(ca));da=q.maxSize[0]||0;ea=q.maxSize[1]||0;fa=q.minSize[0]||0;ga=q.minSize[1]||0;q.hasOwnProperty("outerImage")&&(A.attr("src",q.outerImage),delete q.outerImage);E.refresh()}var q=b.extend({},b.Jcrop.defaults),z,N=navigator.userAgent.toLowerCase(),H=/msie/.test(N),T=/msie [1-6]\./.test(N);"object"!=typeof d&&(d=b(d)[0]);"object"!=typeof a&&(a={});g(a);var N={border:"none",visibility:"visible",margin:0,padding:0,
position:"absolute",top:0,left:0},I=b(d),Y=!0;if("IMG"==d.tagName){if(0!=I[0].width&&0!=I[0].height)I.width(I[0].width),I.height(I[0].height);else{var Z=new Image;Z.src=I[0].src;I.width(Z.width);I.height(Z.height)}var A=I.clone().removeAttr("id").css(N).show();A.width(I.width());A.height(I.height());I.after(A).hide()}else A=I.css(N).show(),Y=!1,null===q.shade&&(q.shade=!0);p(A,q.boxWidth,q.boxHeight);var C=A.width(),D=A.height(),Q=b("<div />").width(C).height(D).addClass(q.baseClass+"-holder").css({position:"relative",
backgroundColor:q.bgColor}).insertAfter(I).append(A);q.addClass&&Q.addClass(q.addClass);var S=b("<div />"),R=b("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),G=b("<div />").width("100%").height("100%").css("zIndex",320),K=b("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=J.getFixed();q.onDblClick.call(U,a)}).insertBefore(A).append(R,G);Y&&(S=b("<img />").attr("src",A.attr("src")).css(N).width(C).height(D),R.append(S));T&&
K.css({overflowY:"hidden"});var L=q.boundary,V=k().width(C+2*L).height(D+2*L).css({position:"absolute",top:c(-L),left:c(-L),zIndex:290}).mousedown(u),ja=q.bgColor,ca=q.bgOpacity,da,ea,fa,ga,O,P,ba,ia,ka;z=f(A);var W=function(){function a(){var b={},c=["touchstart","touchmove","touchend"],e=document.createElement("div"),f;try{for(f=0;f<c.length;f++){var d=c[f],d="on"+d,p=d in e;p||(e.setAttribute(d,"return;"),p="function"==typeof e[d]);b[c[f]]=p}return b.touchstart&&b.touchend&&b.touchmove}catch(g){return!1}}
return{createDragger:function(a){return function(b){return q.disabled?!1:"move"!==a||q.allowMove?(z=f(A),ba=!0,h(a,e(W.cfilter(b)),!0),b.stopPropagation(),b.preventDefault(),!1):!1}},newSelection:function(a){return u(W.cfilter(a))},cfilter:function(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a},isSupported:a,support:!0===q.touchSupport||!1===q.touchSupport?q.touchSupport:a()}}(),J=function(){function a(){if(!q.aspectRatio){var b=p-f,h=
g-d,k;return da&&Math.abs(b)>da&&(p=0<b?f+da:f-da),ea&&Math.abs(h)>ea&&(g=0<h?d+ea:d-ea),ga/P&&Math.abs(h)<ga/P&&(g=0<h?d+ga/P:d-ga/P),fa/O&&Math.abs(b)<fa/O&&(p=0<b?f+fa/O:f-fa/O),0>f&&(p-=f,f-=f),0>d&&(g-=d,d-=d),0>p&&(f-=p,p-=p),0>g&&(d-=g,g-=g),p>C&&(k=p-C,f-=k,p-=k),g>D&&(k=g-D,d-=k,g-=k),f>C&&(k=f-D,g-=k,d-=k),d>D&&(k=d-D,g-=k,d-=k),e(c(f,d,p,g))}k=q.aspectRatio;var l=q.minSize[0]/O,t=q.maxSize[0]/O,s=p-f,G=g-d,u=Math.abs(s),m=Math.abs(G),v,K;return 0===t&&(t=10*C),u/m<k?(h=g,v=m*k,b=0>s?f-
v:v+f,0>b?(b=0,K=Math.abs((b-f)/k),h=0>G?d-K:K+d):b>C&&(b=C,K=Math.abs((b-f)/k),h=0>G?d-K:K+d)):(b=p,K=u/k,h=0>G?d-K:d+K,0>h?(h=0,v=Math.abs((h-d)*k),b=0>s?f-v:v+f):h>D&&(h=D,v=Math.abs(h-d)*k,b=0>s?f-v:v+f)),b>f?(b-f<l?b=f+l:b-f>t&&(b=f+t),h>d?h=d+(b-f)/k:h=d-(b-f)/k):b<f&&(f-b<l?b=f-l:f-b>t&&(b=f-t),h>d?h=d+(f-b)/k:h=d-(f-b)/k),0>b?(f-=b,b=0):b>C&&(f-=b-C,b=C),0>h?(d-=h,h=0):h>D&&(d-=h-D,h=D),e(c(f,d,b,h))}function b(a){return 0>a[0]&&(a[0]=0),0>a[1]&&(a[1]=0),a[0]>C&&(a[0]=C),a[1]>D&&(a[1]=D),
[Math.round(a[0]),Math.round(a[1])]}function c(a,b,e,f){var d=a,p=e,g=b,h=f;return e<a&&(d=e,p=a),f<b&&(g=f,h=b),[d,g,p,h]}function e(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var f=0,d=0,p=0,g=0,h,k;return{flipCoords:c,setPressed:function(a){a=b(a);p=f=a[0];g=d=a[1]},setCurrent:function(a){a=b(a);h=a[0]-p;k=a[1]-g;p=a[0];g=a[1]},getOffset:function(){return[h,k]},moveOffset:function(a){var b=a[0];a=a[1];0>f+b&&(b-=b+f);0>d+a&&(a-=a+d);D<g+a&&(a+=D-(g+a));C<p+b&&(b+=C-(p+b));
f+=b;p+=b;d+=a;g+=a},getCorner:function(b){var c=a();switch(b){case "ne":return[c.x2,c.y];case "nw":return[c.x,c.y];case "se":return[c.x2,c.y2];case "sw":return[c.x,c.y2]}},getFixed:a}}(),aa=function(){function a(){return e(J.getFixed())}function e(a){s.top.css({left:c(a.x),width:c(a.w),height:c(a.y)});s.bottom.css({top:c(a.y2),left:c(a.x),width:c(a.w),height:c(D-a.y2)});s.right.css({left:c(a.x2),width:c(C-a.x2)});s.left.css({width:c(a.x)})}function f(){return b("<div />").css({position:"absolute",
backgroundColor:q.shadeColor||q.bgColor}).appendTo(t)}function d(){l||(l=!0,t.insertBefore(A),a(),E.setBgOpacity(1,0,1),S.hide(),p(q.shadeColor||q.bgColor,1),E.isAwake()?h(q.bgOpacity,1):h(1,1))}function p(a,b){y(k(),a,b)}function g(){l&&(t.remove(),S.show(),l=!1,E.isAwake()?E.setBgOpacity(q.bgOpacity,1,1):(E.setBgOpacity(1,1,1),E.disableHandles()),y(Q,0,1))}function h(a,b){l&&(q.bgFade&&!b?t.animate({opacity:1-a},{queue:!1,duration:q.fadeTime}):t.css({opacity:1-a}))}function k(){return t.children()}
var l=!1,t=b("<div />").css({position:"absolute",zIndex:240,opacity:0}),s={top:f(),left:f().height(D),right:f().height(D),bottom:f()};return{update:a,updateRaw:e,getShades:k,setBgColor:p,enable:d,disable:g,resize:function(a,b){s.left.css({height:c(b)});s.right.css({height:c(b)})},refresh:function(){q.shade?d():g();E.isAwake()&&h(q.bgOpacity)},opacity:h}}(),E=function(){function a(c,e){var f=b("<div />").mousedown(n(c)).css({cursor:c+"-resize",position:"absolute",zIndex:e}).addClass("ord-"+c);return W.support&&
f.bind("touchstart.jcrop",W.createDragger(c)),G.append(f),f}function e(b){var c;for(c=0;c<b.length;c++)a(b[c],V++).addClass("jcrop-dragbar")}function f(a){var c,e;for(e=0;e<a.length;e++){switch(a[e]){case "n":c="hline";break;case "s":c="hline bottom";break;case "e":c="vline right";break;case "w":c="vline"}var d=L,p=a[e],g;g=c;g=b("<div />").css({position:"absolute",opacity:q.borderOpacity}).addClass(q.baseClass+"-"+g);g=(R.append(g),g);d[p]=g}}function d(b){var c;for(c=0;c<b.length;c++){var e=M,f=
b[c],p;p=q.handleSize;var g=a(b[c],V++).css({opacity:q.handleOpacity}).addClass(q.baseClass+"-handle");p=(p&&g.width(p).height(p),g);e[f]=p}}function p(){var a=J.getFixed();J.setPressed([a.x,a.y]);J.setCurrent([a.x2,a.y2]);g()}function g(a){if(v)return h(a)}function h(a){var b=J.getFixed(),e=b.h;K.width(Math.round(b.w)).height(Math.round(e));var e=b.x,f=b.y;q.shade||S.css({top:c(-f),left:c(-e)});K.css({top:c(f),left:c(e)});q.shade&&aa.updateRaw(b);v||(K.show(),q.shade?aa.opacity(ca):l(ca,!0),v=!0);
a?q.onSelect.call(U,t(b)):q.onChange.call(U,t(b))}function l(a,b,c){if(v||b)q.bgFade&&!c?A.animate({opacity:a},{queue:!1,duration:q.fadeTime}):A.css("opacity",a)}function s(){r=!0;if(q.allowResize)return G.show(),!0}function u(){r=!1;G.hide()}function m(a){a?(ia=!0,u()):(ia=!1,s())}var v,V=370,L={},M={},r=!1;q.dragEdges&&b.isArray(q.createDragbars)&&e(q.createDragbars);b.isArray(q.createHandles)&&d(q.createHandles);q.drawBorders&&b.isArray(q.createBorders)&&f(q.createBorders);b(document).bind("touchstart.jcrop-ios",
function(a){b(a.currentTarget).hasClass("jcrop-tracker")&&a.stopPropagation()});var y=k().mousedown(n("move")).css({cursor:"move",position:"absolute",zIndex:360});return W.support&&y.bind("touchstart.jcrop",W.createDragger("move")),R.append(y),u(),{updateVisible:g,update:h,release:function(){u();K.hide();q.shade?aa.opacity(1):l(1);v=!1;q.onRelease.call(U)},refresh:p,isAwake:function(){return v},setCursor:function(a){y.css("cursor",a)},enableHandles:s,enableOnly:function(){r=!0},showHandles:function(){r&&
G.show()},disableHandles:u,animMode:m,setBgOpacity:l,done:function(){m(!1);p()}}}(),X=function(){function a(b){return p(e(b)),!1}function c(a){a.preventDefault();a.stopPropagation();ba&&(ba=!1,g(e(a)),E.isAwake()&&q.onSelect.call(U,t(J.getFixed())),V.css({zIndex:290}),b(document).unbind(".jcrop"),p=function(){},g=function(){});return!1}function f(a){return p(e(W.cfilter(a))),!1}function d(a){return c(W.cfilter(a))}var p=function(){},g=function(){},h=q.trackDocument;return h||V.mousemove(a).mouseup(c).mouseout(c),
A.before(V),{activateHandlers:function(e,k,l){ba=!0;p=e;g=k;V.css({zIndex:450});l?b(document).bind("touchmove.jcrop",f).bind("touchend.jcrop",d):h&&b(document).bind("mousemove.jcrop",a).bind("mouseup.jcrop",c);return!1},setCursor:function(a){V.css("cursor",a)}}}(),ha=function(){function a(b){f.hide()}function c(a,b,e){q.allowMove&&(J.moveOffset([b,e]),E.updateVisible(!0));a.preventDefault();a.stopPropagation()}function e(a){if(a.ctrlKey||a.metaKey)return!0;var b=(ka=a.shiftKey?!0:!1)?10:1;switch(a.keyCode){case 37:c(a,
-b,0);break;case 39:c(a,b,0);break;case 38:c(a,0,-b);break;case 40:c(a,0,b);break;case 27:q.allowSelect&&E.release();break;case 9:return!0}return!1}var f=b('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),d=b("<div />").css({position:"absolute",overflow:"hidden"}).append(f);return q.keySupport&&(f.keydown(e).blur(a),T||!q.fixedSupport?(f.css({position:"absolute",left:"-20px"}),d.append(f).insertBefore(A)):f.insertBefore(A)),{watchKeys:function(){q.keySupport&&
(f.show(),f.focus())}}}();W.support&&V.bind("touchstart.jcrop",W.newSelection);G.hide();B(!0);var U={setImage:function(a,b){E.release();x();var c=new Image;c.onload=function(){var e=c.height,f=q.boxWidth,d=q.boxHeight;A.width(c.width).height(e);A.attr("src",a);S.attr("src",a);p(A,f,d);C=A.width();D=A.height();S.width(C).height(D);V.width(C+2*L).height(D+2*L);Q.width(C).height(D);aa.resize(C,D);w();"function"==typeof b&&b.call(U)};c.src=a},animateTo:function(a,b){var c=a[0]/O,e=a[1]/P,f=a[2]/O,d=a[3]/
P;if(!ia){var p=J.flipCoords(c,e,f,d),g=J.getFixed(),h=[g.x,g.y,g.x2,g.y2],k=q.animationDelay,l=p[0]-h[0],t=p[1]-h[1],s=p[2]-h[2],u=p[3]-h[3],G=0,m=q.swingSpeed,c=h[0],e=h[1],f=h[2],d=h[3];E.animMode(!0);var v=function(){return function(){G+=(100-G)/m;h[0]=Math.round(c+G/100*l);h[1]=Math.round(e+G/100*t);h[2]=Math.round(f+G/100*s);h[3]=Math.round(d+G/100*u);99.8<=G&&(G=100);100>G?(F(h),window.setTimeout(v,k)):(E.done(),E.animMode(!1),"function"==typeof b&&b.call(U))}}();window.setTimeout(v,k)}},setSelect:M,
setOptions:function(a){g(a);B()},tellSelect:function(){return t(J.getFixed())},tellScaled:function(){return J.getFixed()},setClass:function(a){Q.removeClass().addClass(q.baseClass+"-holder").addClass(a)},disable:x,enable:w,cancel:function(){E.done();X.activateHandlers(null,null)},release:E.release,destroy:function(){Q.remove();I.show();I.css("visibility","visible");b(d).removeData("Jcrop")},focus:ha.watchKeys,getBounds:function(){return[C*O,D*P]},getWidgetSize:function(){return[C,D]},getScaleFactor:function(){return[O,
P]},getOptions:function(){return q},ui:{holder:Q,selection:K}};return H&&Q.bind("selectstart",function(){return!1}),I.data("Jcrop",U),U};b.fn.Jcrop=function(d,a){var c;return this.each(function(){if(b(this).data("Jcrop")){if("api"===d)return b(this).data("Jcrop");b(this).data("Jcrop").setOptions(d)}else"IMG"==this.tagName?b.Jcrop.Loader(this,function(){b(this).css({display:"block",visibility:"hidden"});c=b.Jcrop(this,d);b.isFunction(a)&&a.call(c)}):(b(this).css({display:"block",visibility:"hidden"}),
c=b.Jcrop(this,d),b.isFunction(a)&&a.call(c))}),this};b.Jcrop.Loader=function(d,a,c){function f(){g.complete?(e.unbind(".jcloader"),b.isFunction(a)&&a.call(g)):window.setTimeout(f,50)}var e=b(d),g=e[0];e.bind("load.jcloader",f).bind("error.jcloader",function(a){e.unbind(".jcloader");b.isFunction(c)&&c.call(g)});g.complete&&b.isFunction(a)&&(e.unbind(".jcloader"),a.call(g))};b.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",
bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:"n s e w nw ne se sw".split(" "),createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);
(function(b){function d(){return new Date(Date.UTC.apply(Date,arguments))}function a(a,c){var e=b(a).data(),f={},d,g=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var h in e)c.test(h)&&(d=h.replace(g,function(a,b){return b.toLowerCase()}),f[d]=e[h]);return f}function c(a){var c={};if(!r[a]&&(a=a.split("-")[0],!r[a]))return;var e=r[a];b.each(m,function(a,b){b in e&&(c[b]=e[b])});return c}var f=b(window),e=function(a,c){this._process_options(c);this.element=b(a);this.isInline=
!1;this.isInput=this.element.is("input");this.hasInput=(this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1)&&this.element.find("input").length;this.component&&0===this.component.length&&(this.component=!1);this.picker=b(n.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right"));
this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()};e.prototype={constructor:e,_process_options:function(a){this._o=b.extend({},this._o,a);a=this.o=b.extend({},
this._o);var c=a.language;r[c]||(c=c.split("-")[0],r[c]||(c=l.language));a.language=c;switch(a.startView){case 2:case "decade":a.startView=2;break;case 1:case "year":a.startView=1;break;default:a.startView=0}switch(a.minViewMode){case 1:case "months":a.minViewMode=1;break;case 2:case "years":a.minViewMode=2;break;default:a.minViewMode=0}a.startView=Math.max(a.startView,a.minViewMode);a.weekStart%=7;a.weekEnd=(a.weekStart+6)%7;c=n.parseFormat(a.format);-Infinity!==a.startDate&&(a.startDate=a.startDate?
a.startDate instanceof Date?this._local_to_utc(this._zero_time(a.startDate)):n.parseDate(a.startDate,c,a.language):-Infinity);Infinity!==a.endDate&&(a.endDate=a.endDate?a.endDate instanceof Date?this._local_to_utc(this._zero_time(a.endDate)):n.parseDate(a.endDate,c,a.language):Infinity);a.daysOfWeekDisabled=a.daysOfWeekDisabled||[];b.isArray(a.daysOfWeekDisabled)||(a.daysOfWeekDisabled=a.daysOfWeekDisabled.split(/[,\s]*/));a.daysOfWeekDisabled=b.map(a.daysOfWeekDisabled,function(a){return parseInt(a,
10)});var c=String(a.orientation).toLowerCase().split(/\s+/g),e=a.orientation.toLowerCase(),c=b.grep(c,function(a){return/^auto|left|right|top|bottom$/.test(a)});a.orientation={x:"auto",y:"auto"};if(e&&"auto"!==e)if(1===c.length)switch(c[0]){case "top":case "bottom":a.orientation.y=c[0];break;case "left":case "right":a.orientation.x=c[0]}else e=b.grep(c,function(a){return/^left|right$/.test(a)}),a.orientation.x=e[0]||"auto",e=b.grep(c,function(a){return/^top|bottom$/.test(a)}),a.orientation.y=e[0]||
"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var b=0,c,e;b<a.length;b++)c=a[b][0],e=a[b][1],c.on(e)},_unapplyEvents:function(a){for(var b=0,c,e;b<a.length;b++)c=a[b][0],e=a[b][1],c.off(e)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:b.proxy(this.show,this),keyup:b.proxy(this.update,this),keydown:b.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:b.proxy(this.show,this),keyup:b.proxy(this.update,
this),keydown:b.proxy(this.keydown,this)}],[this.component,{click:b.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:b.proxy(this.show,this)}]];this._secondaryEvents=[[this.picker,{click:b.proxy(this.click,this)}],[b(window),{resize:b.proxy(this.place,this)}],[b(document),{mousedown:b.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.hide()},this)}]]},
_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(a,c){var e=c||this.date,f=this._utc_to_local(e);this.element.trigger({type:a,date:f,format:b.proxy(function(a){return n.formatDate(e,a||this.o.format,this.o.language)},
this)})},show:function(a){this.isInline||this.picker.appendTo("body");this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();a&&a.preventDefault();this._trigger("show")},hide:function(a){!this.isInline&&this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&
this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},_utc_to_local:function(a){return new Date(a.getTime()+6E4*a.getTimezoneOffset())},_local_to_utc:function(a){return new Date(a.getTime()-6E4*a.getTimezoneOffset())},_zero_time:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return new Date(Date.UTC(a.getUTCFullYear(),
a.getUTCMonth(),a.getUTCDate()))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(this._local_to_utc(a))},setUTCDate:function(a){this.date=a;this.setValue()},setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a).change():this.component&&this.element.find("input").val(a).change()},getFormattedDate:function(a){void 0===a&&(a=this.o.format);return n.formatDate(this.date,a,this.o.language)},
setStartDate:function(a){this._process_options({startDate:a});this.update();this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a});this.update();this.updateNavArrows()},place:function(){if(!this.isInline){var a=this.picker.outerWidth(),c=this.picker.outerHeight(),e=f.width(),d=f.height(),g=f.scrollTop(),h=parseInt(this.element.parents().filter(function(){return"auto"!=
b(this).css("z-index")}).first().css("z-index"))+10,l=this.component?this.component.parent().offset():this.element.offset(),m=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),r=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),n=l.left,y=l.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),
"right"===this.o.orientation.x&&(n-=a-r)):(this.picker.addClass("datepicker-orient-left"),0>l.left?n-=l.left-10:l.left+a>e&&(n=e-a-10));a=this.o.orientation.y;"auto"===a&&(a=-g+l.top-c,d=g+d-(l.top+m+c),a=Math.max(a,d)===d?"top":"bottom");this.picker.addClass("datepicker-orient-"+a);y="top"===a?y+m:y-(c+parseInt(this.picker.css("padding-top")));this.picker.css({top:y,left:n,zIndex:h})}},_allow_update:!0,update:function(){if(this._allow_update){var a=new Date(this.date),b,c=!1;arguments&&arguments.length&&
("string"===typeof arguments[0]||arguments[0]instanceof Date)?(b=arguments[0],b instanceof Date&&(b=this._local_to_utc(b)),c=!0):(b=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date);this.date=n.parseDate(b,this.o.format,this.o.language);c?this.setValue():b?a.getTime()!==this.date.getTime()&&this._trigger("changeDate"):this._trigger("clearDate");this.date<this.o.startDate?(this.viewDate=new Date(this.o.startDate),this.date=
new Date(this.o.startDate)):this.date>this.o.endDate?(this.viewDate=new Date(this.o.endDate),this.date=new Date(this.o.endDate)):(this.viewDate=new Date(this.date),this.date=new Date(this.date));this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";this.o.calendarWeeks&&(b+='<th class="cw">&nbsp;</th>',this.picker.find(".datepicker-days thead tr:first-child").prepend('<th class="cw">&nbsp;</th>'));for(;a<this.o.weekStart+7;)b+='<th class="dow">'+r[this.o.language].daysMin[a++%7]+"</th>";
b+="</tr>";this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+r[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(a){a&&a.length?this.range=b.map(a,function(a){return a.valueOf()}):delete this.range;this.fill()},getClassNames:function(a){var c=[],e=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),d=this.date.valueOf(),g=new Date;a.getUTCFullYear()<e||
a.getUTCFullYear()==e&&a.getUTCMonth()<f?c.push("old"):(a.getUTCFullYear()>e||a.getUTCFullYear()==e&&a.getUTCMonth()>f)&&c.push("new");this.o.todayHighlight&&a.getUTCFullYear()==g.getFullYear()&&a.getUTCMonth()==g.getMonth()&&a.getUTCDate()==g.getDate()&&c.push("today");d&&a.valueOf()==d&&c.push("active");(a.valueOf()<this.o.startDate||a.valueOf()>this.o.endDate||-1!==b.inArray(a.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled");this.range&&(a>this.range[0]&&a<this.range[this.range.length-
1]&&c.push("range"),-1!=b.inArray(a.valueOf(),this.range)&&c.push("selected"));return c},fill:function(){var a=new Date(this.viewDate),c=a.getUTCFullYear(),e=a.getUTCMonth(),a=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,f=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,g=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():Infinity,h=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,l;this.picker.find(".datepicker-days thead th.datepicker-switch").text(r[this.o.language].months[e]+
" "+c);this.picker.find("tfoot th.today").text(r[this.o.language].today).toggle(!1!==this.o.todayBtn);this.picker.find("tfoot th.clear").text(r[this.o.language].clear).toggle(!1!==this.o.clearBtn);this.updateNavArrows();this.fillMonths();var m=d(c,e-1,28,0,0,0,0),e=n.getDaysInMonth(m.getUTCFullYear(),m.getUTCMonth());m.setUTCDate(e);m.setUTCDate(e-(m.getUTCDay()-this.o.weekStart+7)%7);var x=new Date(m);x.setUTCDate(x.getUTCDate()+42);for(var x=x.valueOf(),e=[],w;m.valueOf()<x;){if(m.getUTCDay()==
this.o.weekStart&&(e.push("<tr>"),this.o.calendarWeeks)){w=new Date(+m+(this.o.weekStart-m.getUTCDay()-7)%7*864E5);w=new Date(+w+(11-w.getUTCDay())%7*864E5);var y=new Date(+(y=d(w.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864E5);e.push('<td class="cw">'+((w-y)/864E5/7+1)+"</td>")}w=this.getClassNames(m);w.push("day");if(this.o.beforeShowDay!==b.noop){var B=this.o.beforeShowDay(this._utc_to_local(m));void 0===B?B={}:"boolean"===typeof B?B={enabled:B}:"string"===typeof B&&(B={classes:B});!1===B.enabled&&
w.push("disabled");B.classes&&(w=w.concat(B.classes.split(/\s+/)));B.tooltip&&(l=B.tooltip)}w=b.unique(w);e.push('<td class="'+w.join(" ")+'"'+(l?' title="'+l+'"':"")+">"+m.getUTCDate()+"</td>");m.getUTCDay()==this.o.weekEnd&&e.push("</tr>");m.setUTCDate(m.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(e.join(""));l=this.date&&this.date.getUTCFullYear();e=this.picker.find(".datepicker-months").find("th:eq(1)").text(c).end().find("span").removeClass("active");l&&l==c&&e.eq(this.date.getUTCMonth()).addClass("active");
(c<a||c>g)&&e.addClass("disabled");c==a&&e.slice(0,f).addClass("disabled");c==g&&e.slice(h+1).addClass("disabled");e="";c=10*parseInt(c/10,10);f=this.picker.find(".datepicker-years").find("th:eq(1)").text(c+"-"+(c+9)).end().find("td");c-=1;for(h=-1;11>h;h++)e+='<span class="year'+(-1==h?" old":10==h?" new":"")+(l==c?" active":"")+(c<a||c>g?" disabled":"")+'">'+c+"</span>",c+=1;f.html(e)},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),a=a.getUTCMonth();
switch(this.viewMode){case 0:-Infinity!==this.o.startDate&&b<=this.o.startDate.getUTCFullYear()&&a<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});Infinity!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()&&a>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:-Infinity!==this.o.startDate&&b<=this.o.startDate.getUTCFullYear()?
this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),Infinity!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(a){a.preventDefault();a=b(a.target).closest("span, td, th");if(1==a.length)switch(a[0].nodeName.toLowerCase()){case "th":switch(a[0].className){case "datepicker-switch":this.showMode(1);break;case "prev":case "next":a=
n.modes[this.viewMode].navStep*("prev"==a[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case "today":a=new Date;a=d(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);this.showMode(-2);this._setDate(a,"linked"==this.o.todayBtn?null:"view");break;case "clear":var c;this.isInput?
c=this.element:this.component&&(c=this.element.find("input"));c&&c.val("").change();this._trigger("changeDate");this.update();this.o.autoclose&&this.hide()}break;case "span":if(!a.is(".disabled")){this.viewDate.setUTCDate(1);if(a.is(".month")){c=1;var e=a.parent().find("span").index(a),f=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(e);this._trigger("changeMonth",this.viewDate);1===this.o.minViewMode&&this._setDate(d(f,e,c,0,0,0,0))}else f=parseInt(a.text(),10)||0,c=1,e=0,this.viewDate.setUTCFullYear(f),
this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(d(f,e,c,0,0,0,0));this.showMode(-1);this.fill()}break;case "td":a.is(".day")&&!a.is(".disabled")&&(c=parseInt(a.text(),10)||1,f=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),a.is(".old")?0===e?(e=11,f-=1):e-=1:a.is(".new")&&(11==e?(e=0,f+=1):e+=1),this._setDate(d(f,e,c,0,0,0,0)))}},_setDate:function(a,b){b&&"date"!=b||(this.date=new Date(a));b&&"view"!=b||(this.viewDate=new Date(a));this.fill();this.setValue();
this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input"));c&&c.change();!this.o.autoclose||b&&"date"!=b||this.hide()},moveMonth:function(a,b){if(!b)return a;var c=new Date(a.valueOf()),e=c.getUTCDate(),f=c.getUTCMonth(),d=Math.abs(b),g;b=0<b?1:-1;if(1==d){if(d=-1==b?function(){return c.getUTCMonth()==f}:function(){return c.getUTCMonth()!=g},g=f+b,c.setUTCMonth(g),0>g||11<g)g=(g+12)%12}else{for(var h=0;h<d;h++)c=this.moveMonth(c,b);g=c.getUTCMonth();
c.setUTCDate(e);d=function(){return g!=c.getUTCMonth()}}for(;d();)c.setUTCDate(--e),c.setUTCMonth(g);return c},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))27==a.keyCode&&this.show();else{var b=!1,c,e,f;switch(a.keyCode){case 27:this.hide();a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;c=37==a.keyCode?-1:1;a.ctrlKey?(e=this.moveYear(this.date,
c),f=this.moveYear(this.viewDate,c),this._trigger("changeYear",this.viewDate)):a.shiftKey?(e=this.moveMonth(this.date,c),f=this.moveMonth(this.viewDate,c),this._trigger("changeMonth",this.viewDate)):(e=new Date(this.date),e.setUTCDate(this.date.getUTCDate()+c),f=new Date(this.viewDate),f.setUTCDate(this.viewDate.getUTCDate()+c));this.dateWithinRange(e)&&(this.date=e,this.viewDate=f,this.setValue(),this.update(),a.preventDefault(),b=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;c=38==
a.keyCode?-1:1;a.ctrlKey?(e=this.moveYear(this.date,c),f=this.moveYear(this.viewDate,c),this._trigger("changeYear",this.viewDate)):a.shiftKey?(e=this.moveMonth(this.date,c),f=this.moveMonth(this.viewDate,c),this._trigger("changeMonth",this.viewDate)):(e=new Date(this.date),e.setUTCDate(this.date.getUTCDate()+7*c),f=new Date(this.viewDate),f.setUTCDate(this.viewDate.getUTCDate()+7*c));this.dateWithinRange(e)&&(this.date=e,this.viewDate=f,this.setValue(),this.update(),a.preventDefault(),b=!0);break;
case 13:this.hide();a.preventDefault();break;case 9:this.hide()}if(b){this._trigger("changeDate");var d;this.isInput?d=this.element:this.component&&(d=this.element.find("input"));d&&d.change()}}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a)));this.picker.find(">div").hide().filter(".datepicker-"+n.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var g=function(a,c){this.element=b(a);this.inputs=b.map(c.inputs,function(a){return a.jquery?
a[0]:a});delete c.inputs;b(this.inputs).datepicker(c).bind("changeDate",b.proxy(this.dateUpdated,this));this.pickers=b.map(this.inputs,function(a){return b(a).data("datepicker")});this.updateDates()};g.prototype={updateDates:function(){this.dates=b.map(this.pickers,function(a){return a.date});this.updateRanges()},updateRanges:function(){var a=b.map(this.dates,function(a){return a.valueOf()});b.each(this.pickers,function(b,c){c.setRange(a)})},dateUpdated:function(a){var c=b(a.target).data("datepicker").getUTCDate();
a=b.inArray(a.target,this.inputs);var e=this.inputs.length;if(-1!=a){if(c<this.dates[a])for(;0<=a&&c<this.dates[a];)this.pickers[a--].setUTCDate(c);else if(c>this.dates[a])for(;a<e&&c>this.dates[a];)this.pickers[a++].setUTCDate(c);this.updateDates()}},remove:function(){b.map(this.pickers,function(a){a.remove()});delete this.element.data().datepicker}};var h=b.fn.datepicker;b.fn.datepicker=function(f){var d=Array.apply(null,arguments);d.shift();var h;this.each(function(){var m=b(this),v=m.data("datepicker"),
k="object"==typeof f&&f;if(!v){var v=a(this,"date"),r=b.extend({},l,v,k),r=c(r.language),k=b.extend({},l,r,v,k);m.is(".input-daterange")||k.inputs?(v={inputs:k.inputs||m.find("input").toArray()},m.data("datepicker",v=new g(this,b.extend(k,v)))):m.data("datepicker",v=new e(this,k))}if("string"==typeof f&&"function"==typeof v[f]&&(h=v[f].apply(v,d),void 0!==h))return!1});return void 0!==h?h:this};var l=b.fn.datepicker.defaults={autoclose:!1,beforeShowDay:b.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],
endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},m=b.fn.datepicker.locale_opts=["format","rtl","weekStart"];b.fn.datepicker.Constructor=e;var r=b.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysMin:"Su Mo Tu We Th Fr Sa Su".split(" "),
months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),today:"Today",clear:"Clear"}},n={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return 0===a%4&&0!==a%100||0===a%400},getDaysInMonth:function(a,b){return[31,n.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,
30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!b||!b.length||!a||0===a.length)throw Error("Invalid date format.");return{separators:b,parts:a}},parseDate:function(a,c,f){if(a instanceof Date)return a;"string"===typeof c&&(c=n.parseFormat(c));if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(a)){var g=/([\-+]\d+)([dmwy])/,h=a.match(/([\-+]\d+)([dmwy])/g),
l;a=new Date;for(var m=0;m<h.length;m++)switch(c=g.exec(h[m]),l=parseInt(c[1]),c[2]){case "d":a.setUTCDate(a.getUTCDate()+l);break;case "m":a=e.prototype.moveMonth.call(e.prototype,a,l);break;case "w":a.setUTCDate(a.getUTCDate()+7*l);break;case "y":a=e.prototype.moveYear.call(e.prototype,a,l)}return d(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,0)}h=a&&a.match(this.nonpunctuation)||[];a=new Date;var g={},F="yyyy yy M MM m mm d dd".split(" ");l={yyyy:function(a,b){return a.setUTCFullYear(b)},
yy:function(a,b){return a.setUTCFullYear(2E3+b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;0>b;)b+=12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};var x;l.M=l.MM=l.mm=l.m;l.dd=l.d;a=d(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);var w=c.parts.slice();h.length!=w.length&&(w=b(w).filter(function(a,c){return-1!==b.inArray(c,F)}).toArray());if(h.length==w.length){for(var m=0,y=w.length;m<y;m++){x=parseInt(h[m],
10);c=w[m];if(isNaN(x))switch(c){case "MM":x=b(r[f].months).filter(function(){var a=this.slice(0,h[m].length),b=h[m].slice(0,a.length);return a==b});x=b.inArray(x[0],r[f].months)+1;break;case "M":x=b(r[f].monthsShort).filter(function(){var a=this.slice(0,h[m].length),b=h[m].slice(0,a.length);return a==b}),x=b.inArray(x[0],r[f].monthsShort)+1}g[c]=x}for(m=0;m<F.length;m++)f=F[m],f in g&&!isNaN(g[f])&&(c=new Date(a),l[f](c,g[f]),isNaN(c)||(a=c))}return a},formatDate:function(a,c,e){"string"===typeof c&&
(c=n.parseFormat(c));e={d:a.getUTCDate(),D:r[e].daysShort[a.getUTCDay()],DD:r[e].days[a.getUTCDay()],m:a.getUTCMonth()+1,M:r[e].monthsShort[a.getUTCMonth()],MM:r[e].months[a.getUTCMonth()],yy:a.getUTCFullYear().toString().substring(2),yyyy:a.getUTCFullYear()};e.dd=(10>e.d?"0":"")+e.d;e.mm=(10>e.m?"0":"")+e.m;a=[];for(var f=b.extend([],c.separators),d=0,g=c.parts.length;d<=g;d++)f.length&&a.push(f.shift()),a.push(e[c.parts[d]]);return a.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',
contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};n.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+n.headTemplate+"<tbody></tbody>"+n.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+n.headTemplate+n.contTemplate+n.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+
n.headTemplate+n.contTemplate+n.footTemplate+"</table></div></div>";b.fn.datepicker.DPGlobal=n;b.fn.datepicker.noConflict=function(){b.fn.datepicker=h;return this};b(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(a){var c=b(this);c.data("datepicker")||(a.preventDefault(),c.datepicker("show"))});b(function(){b('[data-provide="datepicker-inline"]').datepicker()})})(window.jQuery);
(function(b){b.fn.datepicker.dates["zh-CN"]={days:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d \u661f\u671f\u65e5".split(" "),daysShort:"\u5468\u65e5 \u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d \u5468\u65e5".split(" "),daysMin:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5".split(""),months:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),
monthsShort:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),today:"\u4eca\u65e5",format:"yyyy\u5e74mm\u6708dd\u65e5",weekStart:1}})(jQuery);
!function(){var b,d,a,c,f={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)f.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=function(){function a(){this.options_index=0;this.parsed=[]}return a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,e,f,d,g;b=this.parsed.length;this.parsed.push({array_index:b,group:!0,
label:this.escapeExpression(a.label),children:0,disabled:a.disabled});d=a.childNodes;g=[];e=0;for(f=d.length;f>e;e++)c=d[e],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:!0===c?c:a.disabled,group_array_index:b,
classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},a.prototype.escapeExpression=function(a){var b,c;return null==a||!1===a?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},a}();c.select_to_array=function(a){var b,e,f,d;b=new c;d=a.childNodes;e=0;for(f=d.length;f>
e;e++)a=d[e],b.add_node(a);return b.parsed};d=function(){function a(b,c){this.form_field=b;this.options=null!=c?c:{};a.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=
!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:
!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=
null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},a.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||a.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||a.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||
this.options.no_results_text||a.default_no_result_text},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(){var a=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},a.prototype.input_blur=function(){var a=this;return this.mouse_on_container?void 0:(this.active_field=
!1,setTimeout(function(){return a.blur_test()},100))},a.prototype.results_option_build=function(a){var b,c,e,f,d;b="";d=this.results_data;e=0;for(f=d.length;f>e;e++)c=d[e],b+=c.group?this.result_add_group(c):this.result_add_option(c),null!=a&&a.first&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(c.text));return b},a.prototype.result_add_option=function(a){var b,c;return a.search_match?this.include_option_in_results(a)?(b=[],a.disabled||
a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=""!==a.style.cssText?' style="'+a.style+'"':"",'<li class="'+b.join(" ")+'"'+c+' data-option-array-index="'+a.array_index+'">'+a.search_text+"</li>"):"":""},a.prototype.result_add_group=function(a){return a.search_match||a.group_match?0<a.active_options?
'<li class="group-result">'+a.search_text+"</li>":"":""},a.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing?this.winnow_results():void 0},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(){return this.results_showing?this.winnow_results():
this.results_show()},a.prototype.winnow_results=function(){var a,b,c,e,f,d,g,s,u,v,k;this.no_results_clear();c=0;f=this.get_search_text();a=f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");b=new RegExp((this.search_contains?"":"^")+a,"i");s=new RegExp(a,"i");k=this.results_data;u=0;for(v=k.length;v>u;u++)a=k[u],a.search_match=!1,e=null,this.include_option_in_results(a)&&(a.group&&(a.group_match=!1,a.active_options=0),null!=a.group_array_index&&this.results_data[a.group_array_index]&&(e=this.results_data[a.group_array_index],
0===e.active_options&&e.search_match&&(c+=1),e.active_options+=1),(!a.group||this.group_search)&&(a.search_text=a.group?a.label:a.html,a.search_match=this.search_string_match(a.search_text,b),a.search_match&&!a.group&&(c+=1),a.search_match?(f.length&&(d=a.search_text.search(s),g=a.search_text.substr(0,d+f.length)+"</em>"+a.search_text.substr(d+f.length),a.search_text=g.substr(0,d)+"<em>"+g.substr(d)),null!=e&&(e.group_match=!0)):null!=a.group_array_index&&this.results_data[a.group_array_index].search_match&&
(a.search_match=!0)));return this.result_clear_highlight(),1>c&&f.length?(this.update_results_content(""),this.no_results(f)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},a.prototype.search_string_match=function(a,b){var c,e,f,d;if(b.test(a))return!0;if(this.enable_split_word_search&&(0<=a.indexOf(" ")||0===a.indexOf("["))&&(e=a.replace(/\[|\]/g,"").split(" "),e.length))for(f=0,d=e.length;d>f;f++)if(c=e[f],b.test(c))return!0},a.prototype.choices_count=
function(){var a,b,c,e;if(null!=this.selected_option_count)return this.selected_option_count;this.selected_option_count=0;e=this.form_field.options;b=0;for(c=e.length;c>b;b++)a=e[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},a.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},a.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),
b){case 8:if(this.is_multiple&&1>this.backstroke_length&&0<this.choices_count())return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.container_width=function(){return null!=this.options.width?
this.options.width:""+this.form_field.offsetWidth+"px"},a.prototype.include_option_in_results=function(a){return this.is_multiple&&!this.display_selected_options&&a.selected?!1:!this.display_disabled_options&&a.disabled?!1:a.empty?!1:!0},a.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?8<=document.documentMode:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:
!0},a.default_multiple_text="Select Some Options",a.default_single_text="Select an Option",a.default_no_result_text="No results match",a}();b=jQuery;b.fn.extend({chosen:function(c){return d.browser_is_supported()?this.each(function(){var e,f;e=b(this);f=e.data("chosen");"destroy"===c&&f?f.destroy():f||e.data("chosen",new a(this,c))}):this}});a=function(a){function f(){return f.__super__.constructor.apply(this,arguments)}return e(f,a),f.prototype.setup=function(){return this.form_field_jq=b(this.form_field),
this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},f.prototype.set_up_html=function(){var a,c;return a=["chosen-container"],a.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&a.push(this.form_field.className),this.is_rtl&&a.push("chosen-rtl"),c={"class":a.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=
this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=b("<div />",c),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),
this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=
this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},f.prototype.register_observers=function(){var a=this;return this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),
this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),
this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.is_multiple?this.search_choices.bind("click.chosen",
function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()})},f.prototype.destroy=function(){return b(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},f.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),
this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},f.prototype.container_mousedown=function(a){return this.is_disabled||(a&&"mousedown"===a.type&&!this.results_showing&&a.preventDefault(),null!=a&&b(a.target).hasClass("search-choice-close"))?void 0:(this.active_field?
this.is_multiple||!a||b(a.target)[0]!==this.selected_item[0]&&!b(a.target).parents("a.chosen-single").length||(a.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),b(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},f.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},f.prototype.search_results_mousewheel=function(a){var b,c,e;return b=-(null!=(c=
a.originalEvent)?c.wheelDelta:NaN)||(null!=(e=a.originialEvent)?e.detail:void 0),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b*=40),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},f.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},f.prototype.close_field=function(){return b(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),
this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},f.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},f.prototype.test_active_click=function(a){return this.container.is(b(a.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},f.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=
null,this.results_data=c.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),
this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},f.prototype.result_do_highlight=function(a){var b,c,e,f,d;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),e=parseInt(this.search_results.css("maxHeight"),10),d=this.search_results.scrollTop(),f=e+d,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=f)return this.search_results.scrollTop(0<
b-e?b-e:0);if(d>c)return this.search_results.scrollTop(c)}},f.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},f.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),
this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},f.prototype.update_results_content=function(a){return this.search_results.html(a)},f.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},f.prototype.set_tab_index=function(){var a;return this.form_field.tabIndex?
(a=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=a):void 0},f.prototype.set_label_behavior=function(){var a=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=b("label[for='"+this.form_field.id+"']")),0<this.form_field_label.length?this.form_field_label.bind("click.chosen",function(b){return a.is_multiple?a.container_mousedown(b):a.activate_field()}):void 0},f.prototype.show_search_field_default=
function(){return this.is_multiple&&1>this.choices_count()&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},f.prototype.search_results_mouseup=function(a){var c;return c=b(a.target).hasClass("active-result")?b(a.target):b(a.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(a),this.search_field.focus()):void 0},f.prototype.search_results_mouseover=
function(a){var c;return c=b(a.target).hasClass("active-result")?b(a.target):b(a.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},f.prototype.search_results_mouseout=function(a){return b(a.target).hasClass("active-result")?this.result_clear_highlight():void 0},f.prototype.choice_build=function(a){var c,e,f=this;return c=b("<li />",{"class":"search-choice"}).html("<span>"+a.html+"</span>"),a.disabled?c.addClass("search-choice-disabled"):(e=b("<a />",{"class":"search-choice-close",
"data-option-array-index":a.array_index}),e.bind("click.chosen",function(a){return f.choice_destroy_link_click(a)}),c.append(e)),this.search_container.before(c)},f.prototype.choice_destroy_link_click=function(a){return a.preventDefault(),a.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(b(a.target))},f.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&0<this.choices_count()&&
1>this.search_field.val().length&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},f.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},f.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,
this.selected_item.find("abbr").remove()},f.prototype.result_select=function(a){var b,c,e;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),e=this.result_single_selected[0].getAttribute("data-option-array-index"),
this.results_data[e].selected=!1),this.result_single_selected=b),b.addClass("result-selected"),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):this.single_set_selected_text(c.text),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&
this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},f.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(a)},f.prototype.result_deselect=function(a){var b;
return b=this.results_data[a],this.form_field.options[b.options_index].disabled?!1:(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)},f.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||
this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},f.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":b("<div/>").text(b.trim(this.search_field.val())).html()},f.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),
null!=a?this.result_do_highlight(a):void 0},f.prototype.no_results=function(a){var c;return c=b('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(a),this.search_results.append(c)},f.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},f.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):
void 0:this.results_show()},f.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(0<this.choices_count()&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},f.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):
(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},f.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},f.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,
this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a);this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},f.prototype.search_field_scale=function(){var a,c,e,f,d,g,h,u;if(this.is_multiple){g=0;f="position:absolute; left: -1000px; top: -1000px; display:none;";
d="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");h=0;for(u=d.length;u>h;h++)e=d[h],f+=e+":"+this.search_field.css(e)+";";return a=b("<div />",{style:f}),a.text(this.search_field.val()),b("body").append(a),g=a.width()+25,a.remove(),c=this.container.outerWidth(),g>c-10&&(g=c-10),this.search_field.css({width:g+"px"})}},f}(d)}.call(this);
(function(b){function d(b,c,d,h,l){c.items.filter("li:eq("+h+")").addClass("active").siblings(".active").removeClass("active");"undefined"==typeof l&&(l="fast");l?c.animate({scrollLeft:d},l,function(){a(c)}):(c.scrollLeft(d),a(c))}function a(a){var b=a.items.filter(".active");if(b.hasClass("-before")){var c=b.prevAll().size();b.removeClass("active");b=a.items.filter(":not(.-before):eq("+c+")").addClass("active");a.scrollLeft(a.scrollLeft()+b.position().left)}else b.hasClass("-after")&&(c=b.prevAll(".-after").size(),
b.removeClass("active"),b=a.items.filter(":not(.-before):eq("+c+")").addClass("active"),a.scrollLeft(a.scrollLeft()+b.position().left))}var c={init:function(a){var c=b.extend({},b.fn.lemmonSlider.defaults,a);return this.each(function(){var a=b(this);if(!a.data("slider")){var f=a.find(c.slider),l=a.next().filter(".controls"),m=f.find(c.items),r=1;m.each(function(){var a=b(this).outerWidth(!0);r+=a});f.width(r);c.slideToLast&&f.css("padding-right",a.width());c.infinite&&(a.attr("data-slider-infinite",
!0),r*=3,f.width(r),m.clone().addClass("-after").insertAfter(m.filter(":last")),m.filter(":first").before(m.clone().addClass("-before")),m=f.find(c.items));a.items=m;a.options=c;a.bind("nextSlide",function(l,p){var t=a.scrollLeft(),s=0,u=0;m.each(function(a){0==s&&1<b(this).position().left&&(s=b(this).position().left,u=a)});0<s&&0<f.outerWidth()-t-a.width()-1?d(l,a,t+s,u,"fast"):c.loop&&d(l,a,0,0,"slow")});a.bind("prevSlide",function(l,p){var t=a.scrollLeft(),s=0,u=0;m.each(function(a){0>b(this).position().left&&
(s=b(this).position().left,u=a)});if(s)d(l,a,t+s,u,"fast");else if(c.loop){var t=f.outerWidth()-a.width(),v=m.filter(":last").position().left,u=m.size()-1;t>v?d(l,a,v,u,"fast"):d(l,a,t,u,"fast")}});a.bind("nextPage",function(f,h){var l=a.scrollLeft(),s=a.width(),u=0,v=0;m.each(function(a){var c=b(this).position().left;if(c<s)u=c,v=a;else return!1});0<u&&l+s+1<r?d(f,a,l+u,v,"slow"):c.loop&&d(f,a,0,0,"slow");"function"==typeof a.options.next_page_cb&&a.options.next_page_cb()});a.bind("prevPage",function(l,
p){var t=a.scrollLeft(),s=a.width(),u=0;m.each(function(a){b(this).position().left<1-s&&(u=b(this).next().position().left,slide=a)});if(t)0==u?d(l,a,0,0,"slow"):d(l,a,t+u,slide,"slow");else if(c.loop){var t=f.outerWidth()-a.width(),v=m.filter(":last").position().left;t>v?a.animate({scrollLeft:v},"slow"):a.animate({scrollLeft:t},"slow")}});a.bind("slideTo",function(b,c,e){d(b,a,a.scrollLeft()+m.filter(":eq("+c+")").position().left,c,e)});l.find(".next-slide").click(function(){a.trigger("nextSlide");
return!1});l.find(".prev-slide").click(function(){a.trigger("prevSlide");return!1});l.find(".next-page").click(function(){a.trigger("nextPage");return!1});l.find(".prev-page").click(function(){a.trigger("prevPage");return!1});a.data("slider",{target:a,options:c})}})},addItem:function(a){a=b.extend({},b.fn.lemmonSlider.defaults,a);var e=b(this),d=e.find(a.slider);e.next().filter(".controls");d.find(a.items);a.infinite=e.attr("data-slider-infinite");if(!a.item)return!1;c.destroy.apply(this);a.prepend?
d.prepend(a.item):d.append(a.item);c.init.apply(this,[a])},destroy:function(){return this.each(function(){var a=b(this),c=a.next().filter(".controls"),d=a.find("> *:first > *");a.data("slider");a.unbind("nextSlide");a.unbind("prevSlide");a.unbind("nextPage");a.unbind("prevPage");a.unbind("slideTo");c.find(".next-slide").unbind("click");c.find(".prev-slide").unbind("click");c.find(".next-page").unbind("click");c.find(".next-page").unbind("click");a.removeData("slider");a.attr("data-slider-infinite")&&
b.merge(d.filter(".-before"),d.filter(".-after")).each(function(a,c){b(c).remove()})})}};b.fn.lemmonSlider=function(a,e){null==e&&(e={});if(c[a])return c[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist on jQuery.lemmonSlider");else return c.init.apply(this,arguments)};b.fn.lemmonSlider.defaults={items:"> *",loop:!0,slideToLast:!1,slider:"> *:first",infinite:!1}})(jQuery);
(function(){function b(){}function d(a,b){for(var e=a.length;e--;)if(a[e].listener===b)return e;return-1}var a=b.prototype;a.getListeners=function(a){var b,e,d=this._getEvents();if("object"==typeof a)for(e in b={},d)d.hasOwnProperty(e)&&a.test(e)&&(b[e]=d[e]);else b=d[a]||(d[a]=[]);return b};a.flattenListeners=function(a){var b,e=[];for(b=0;a.length>b;b+=1)e.push(a[b].listener);return e};a.getListenersAsObject=function(a){var b,e=this.getListeners(a);return e instanceof Array&&(b={},b[a]=e),b||e};
a.addListener=function(a,b){var e,g=this.getListenersAsObject(a),h="object"==typeof b;for(e in g)g.hasOwnProperty(e)&&-1===d(g[e],b)&&g[e].push(h?b:{listener:b,once:!1});return this};a.on=a.addListener;a.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})};a.once=a.addOnceListener;a.defineEvent=function(a){return this.getListeners(a),this};a.defineEvents=function(a){for(var b=0;a.length>b;b+=1)this.defineEvent(a[b]);return this};a.removeListener=function(a,b){var e,g,h=this.getListenersAsObject(a);
for(g in h)h.hasOwnProperty(g)&&(e=d(h[g],b),-1!==e&&h[g].splice(e,1));return this};a.off=a.removeListener;a.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)};a.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)};a.manipulateListeners=function(a,b,e){var d,h,l=a?this.removeListener:this.addListener;a=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=e.length;d--;)l.call(this,b,e[d]);else for(d in b)b.hasOwnProperty(d)&&(h=
b[d])&&("function"==typeof h?l.call(this,d,h):a.call(this,d,h));return this};a.removeEvent=function(a){var b,e=typeof a,d=this._getEvents();if("string"===e)delete d[a];else if("object"===e)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this};a.emitEvent=function(a,b){var e,d,h,l,m=this.getListenersAsObject(a);for(h in m)if(m.hasOwnProperty(h))for(d=m[h].length;d--;)e=m[h][d],l=e.listener.apply(this,b||[]),l!==this._getOnceReturnValue()&&!0!==e.once||this.removeListener(a,
m[h][d].listener);return this};a.trigger=a.emitEvent;a.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)};a.setOnceReturnValue=function(a){return this._onceReturnValue=a,this};a._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};a._getEvents=function(){return this._events||(this._events={})};"function"==typeof define&&define.amd?define(function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=
b:this.EventEmitter=b}).call(this);
(function(b){var d=document.documentElement,a=function(){};d.addEventListener?a=function(a,b,c){a.addEventListener(b,c,!1)}:d.attachEvent&&(a=function(a,c,d){a[c+d]=d.handleEvent?function(){var a=b.event;a.target=a.target||a.srcElement;d.handleEvent.call(d,a)}:function(){var c=b.event;c.target=c.target||c.srcElement;d.call(a,c)};a.attachEvent("on"+c,a[c+d])});var c=function(){};d.removeEventListener?c=function(a,b,c){a.removeEventListener(b,c,!1)}:d.detachEvent&&(c=function(a,b,c){a.detachEvent("on"+
b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});d={bind:a,unbind:c};"function"==typeof define&&define.amd?define(d):b.eventie=d})(this);
(function(b){function d(a,b){for(var c in b)a[c]=b[c];return a}function a(a){var b=[];if("[object Array]"===h.call(a))b=a;else if("number"==typeof a.length)for(var c=0,e=a.length;e>c;c++)b.push(a[c]);else b.push(a);return b}function c(b,c){function h(b,c,e){if(!(this instanceof h))return new h(b,c);"string"==typeof b&&(b=document.querySelectorAll(b));this.elements=a(b);this.options=d({},this.options);"function"==typeof c?e=c:d(this.options,c);e&&this.on("always",e);this.getImages();f&&(this.jqDeferred=
new f.Deferred);var g=this;setTimeout(function(){g.check()})}function n(a){this.img=a}h.prototype=new b;h.prototype.options={};h.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;b>a;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);for(var c=c.querySelectorAll("img"),e=0,f=c.length;f>e;e++)this.addImage(c[e])}};h.prototype.addImage=function(a){a=new n(a);this.images.push(a)};h.prototype.check=function(){function a(d,k){return b.options.debug&&g&&e.log("confirm",
d,k),b.progress(d),c++,c===f&&b.complete(),!0}var b=this,c=0,f=this.images.length;if(this.hasAnyBroken=!1,!f)return this.complete(),void 0;for(var d=0;f>d;d++){var h=this.images[d];h.on("confirm",a);h.check()}};h.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a);b.jqDeferred&&b.jqDeferred.notify(b,a)})};h.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,
b),b.emit("always",b),b.jqDeferred)b.jqDeferred[b.hasAnyBroken?"reject":"resolve"](b)})};f&&(f.fn.imagesLoaded=function(a,b){return(new h(this,a,b)).jqDeferred.promise(f(this))});var p={};return n.prototype=new b,n.prototype.check=function(){var a=p[this.img.src];if(a)return this.useCached(a),void 0;if(p[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;a=this.proxyImage=new Image;c.bind(a,"load",this);c.bind(a,
"error",this);a.src=this.img.src},n.prototype.useCached=function(a){if(a.isConfirmed)this.confirm(a.isLoaded,"cached was confirmed");else{var b=this;a.on("confirm",function(a){return b.confirm(a.isLoaded,"cache emitted confirmed"),!0})}},n.prototype.confirm=function(a,b){this.isConfirmed=!0;this.isLoaded=a;this.emit("confirm",this,b)},n.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},n.prototype.onload=function(){this.confirm(!0,"onload");this.unbindProxyEvents()},n.prototype.onerror=
function(){this.confirm(!1,"onerror");this.unbindProxyEvents()},n.prototype.unbindProxyEvents=function(){c.unbind(this.proxyImage,"load",this);c.unbind(this.proxyImage,"error",this)},h}var f=b.jQuery,e=b.console,g=void 0!==e,h=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],c):b.imagesLoaded=c(b.EventEmitter,b.eventie)})(window);
(function(b){function d(b){if(b){if("string"==typeof c[b])return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var e,d=0,h=a.length;h>d;d++)if(e=a[d]+b,"string"==typeof c[e])return e}}var a=["Webkit","Moz","ms","Ms","O"],c=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return d}):b.getStyleProperty=d})(window);
(function(b){function d(a){var b=parseFloat(a);return-1===a.indexOf("%")&&!isNaN(b)&&b}function a(a){var b,c=a("boxSizing");return function(){if(c){var a=document.createElement("div");a.style.width="200px";a.style.padding="1px 2px 3px 4px";a.style.borderStyle="solid";a.style.borderWidth="1px 2px 3px 4px";a.style[c]="border-box";var e=document.body||document.documentElement;e.appendChild(a);var g=f(a);b=200===d(g.width);e.removeChild(a)}}(),function(a){if("string"==typeof a&&(a=document.querySelector(a)),
a&&"object"==typeof a&&a.nodeType){var g=f(a);if("none"===g.display){var n={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},g=0;for(a=e.length;a>g;g++)n[e[g]]=0;return n}n={};n.width=a.offsetWidth;n.height=a.offsetHeight;a=n.isBorderBox=!(!c||!g[c]||"border-box"!==g[c]);for(var p=0,t=e.length;t>p;p++){var s=e[p],u=parseFloat(g[s]);n[s]=isNaN(u)?0:u}var p=n.paddingLeft+n.paddingRight,t=n.paddingTop+n.paddingBottom,s=n.marginLeft+n.marginRight,u=n.marginTop+n.marginBottom,v=
n.borderLeftWidth+n.borderRightWidth,k=n.borderTopWidth+n.borderBottomWidth;a=a&&b;var M=d(g.width);!1!==M&&(n.width=M+(a?0:p+v));g=d(g.height);return!1!==g&&(n.height=g+(a?0:t+k)),n.innerWidth=n.width-(p+v),n.innerHeight=n.height-(t+k),n.outerWidth=n.width+s,n.outerHeight=n.height+u,n}}}var c=document.defaultView,f=c&&c.getComputedStyle?function(a){return c.getComputedStyle(a,null)}:function(a){return a.currentStyle},e="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" ");
"function"==typeof define&&define.amd?define(["get-style-property/get-style-property"],a):b.getSize=a(b.getStyleProperty)})(window);
(function(b){var d=document.documentElement,a=function(){};d.addEventListener?a=function(a,b,c){a.addEventListener(b,c,!1)}:d.attachEvent&&(a=function(a,c,d){a[c+d]=d.handleEvent?function(){var a=b.event;a.target=a.target||a.srcElement;d.handleEvent.call(d,a)}:function(){var c=b.event;c.target=c.target||c.srcElement;d.call(a,c)};a.attachEvent("on"+c,a[c+d])});var c=function(){};d.removeEventListener?c=function(a,b,c){a.removeEventListener(b,c,!1)}:d.detachEvent&&(c=function(a,b,c){a.detachEvent("on"+
b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});d={bind:a,unbind:c};"function"==typeof define&&define.amd?define(d):b.eventie=d})(this);
(function(b){function d(a){"function"==typeof a&&(d.isReady?a():e.push(a))}function a(a){a="readystatechange"===a.type&&"complete"!==f.readyState;if(!d.isReady&&!a){d.isReady=!0;a=0;for(var b=e.length;b>a;a++)(0,e[a])()}}function c(c){return c.bind(f,"DOMContentLoaded",a),c.bind(f,"readystatechange",a),c.bind(b,"load",a),d}var f=b.document,e=[];d.isReady=!1;"function"==typeof define&&define.amd?(d.isReady="function"==typeof requirejs,define(["eventie/eventie"],c)):b.docReady=c(b.eventie)})(this);
(function(){function b(){}function d(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function a(a){return function(){return this[a].apply(this,arguments)}}var c=b.prototype;c.getListeners=function(a){var b,c,d=this._getEvents();if("object"==typeof a)for(c in b={},d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c]);else b=d[a]||(d[a]=[]);return b};c.flattenListeners=function(a){var b,c=[];for(b=0;a.length>b;b+=1)c.push(a[b].listener);return c};c.getListenersAsObject=function(a){var b,
c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c};c.addListener=function(a,b){var c,h=this.getListenersAsObject(a),l="object"==typeof b;for(c in h)h.hasOwnProperty(c)&&-1===d(h[c],b)&&h[c].push(l?b:{listener:b,once:!1});return this};c.on=a("addListener");c.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})};c.once=a("addOnceListener");c.defineEvent=function(a){return this.getListeners(a),this};c.defineEvents=function(a){for(var b=0;a.length>b;b+=1)this.defineEvent(a[b]);
return this};c.removeListener=function(a,b){var c,h,l=this.getListenersAsObject(a);for(h in l)l.hasOwnProperty(h)&&(c=d(l[h],b),-1!==c&&l[h].splice(c,1));return this};c.off=a("removeListener");c.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)};c.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)};c.manipulateListeners=function(a,b,c){var d,l,m=a?this.removeListener:this.addListener;a=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof
RegExp)for(d=c.length;d--;)m.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(l=b[d])&&("function"==typeof l?m.call(this,d,l):a.call(this,d,l));return this};c.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if("object"===c)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this};c.emitEvent=function(a,b){var c,d,l,m,r=this.getListenersAsObject(a);for(l in r)if(r.hasOwnProperty(l))for(d=r[l].length;d--;)c=r[l][d],
!0===c.once&&this.removeListener(a,c.listener),m=c.listener.apply(this,b||[]),m===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this};c.trigger=a("emitEvent");c.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)};c.setOnceReturnValue=function(a){return this._onceReturnValue=a,this};c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};c._getEvents=function(){return this._events||(this._events=
{})};"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof module&&module.exports?module.exports=b:this.EventEmitter=b}).call(this);
(function(b){function d(){}function a(a){function b(c){c.prototype.option||(c.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function g(b,e){a.fn[b]=function(d){if("string"==typeof d){for(var g=c.call(arguments,1),p=0,t=this.length;t>p;p++){var s=a.data(this[p],b);if(s)if(a.isFunction(s[d])&&"_"!==d.charAt(0)){if(s=s[d].apply(s,g),void 0!==s)return s}else h("no such method '"+d+"' for "+b+" instance");else h("cannot call methods on "+b+" prior to initialization; attempted to call '"+
d+"'")}return this}return this.each(function(){var c=a.data(this,b);c?(c.option(d),c._init()):(c=new e(this,d),a.data(this,b,c))})}}if(a){var h="undefined"==typeof console?d:function(a){console.error(a)};a.bridget=function(a,c){b(c);g(a,c)}}}var c=Array.prototype.slice;"function"==typeof define&&define.amd?define(["jquery"],a):a(b.jQuery)})(window);
(function(b,d){function a(a,b){return a[g](b)}function c(a,b){a.parentNode||document.createDocumentFragment().appendChild(a);for(var c=a.parentNode.querySelectorAll(b),e=0,d=c.length;d>e;e++)if(c[e]===a)return!0;return!1}function f(b,c){b.parentNode||document.createDocumentFragment().appendChild(b);return a(b,c)}var e,g=function(){if(d.matchesSelector)return"matchesSelector";for(var a=["webkit","moz","ms","o"],b=0,c=a.length;c>b;b++){var e=a[b]+"MatchesSelector";if(d[e])return e}}();if(g){var h=document.createElement("div");
e=a(h,"div")?a:f}else e=c;"function"==typeof define&&define.amd?define(function(){return e}):window.matchesSelector=e})(this,Element.prototype);
(function(b){function d(a,b){for(var c in b)a[c]=b[c];return a}function a(a,b,c){function l(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}var m=c("transition"),r=c("transform"),r=m&&r,n=!!c("perspective"),p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[m],t=["transform","transition","transitionDuration","transitionProperty"],s=function(){for(var a={},b=0,e=t.length;e>b;b++){var d=t[b],
f=c(d);f&&f!==d&&(a[d]=f)}return a}();d(l.prototype,a.prototype);l.prototype._create=function(){this.css({position:"absolute"})};l.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)};l.prototype.getSize=function(){this.size=b(this.element)};l.prototype.css=function(a){var b=this.element.style,c;for(c in a)b[s[c]||c]=a[c]};l.prototype.getPosition=function(){var a=f(this.element),b=this.layout.options,c=b.isOriginLeft,b=b.isOriginTop,e=parseInt(a[c?"left":"right"],10),a=parseInt(a[b?
"top":"bottom"],10),e=isNaN(e)?0:e,a=isNaN(a)?0:a,d=this.layout.size,e=e-(c?d.paddingLeft:d.paddingRight),a=a-(b?d.paddingTop:d.paddingBottom);this.position.x=e;this.position.y=a};l.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={};b.isOriginLeft?(c.left=this.position.x+a.paddingLeft+"px",c.right=""):(c.right=this.position.x+a.paddingRight+"px",c.left="");b.isOriginTop?(c.top=this.position.y+a.paddingTop+"px",c.bottom=""):(c.bottom=this.position.y+a.paddingBottom+
"px",c.top="");this.css(c);this.emitEvent("layout",[this])};var u=n?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};l.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,e=this.position.y,d=parseInt(a,10),f=parseInt(b,10),d=d===this.position.x&&f===this.position.y;if(this.setPosition(a,b),d&&!this.isTransitioning)return this.layoutPosition(),void 0;c=a-c;e=b-e;d={};f=this.layout.options;c=f.isOriginLeft?c:-c;e=f.isOriginTop?
e:-e;d.transform=u(c,e);this.transition({to:d,onTransitionEnd:this.layoutPosition,isCleaning:!0})};l.prototype.goTo=function(a,b){this.setPosition(a,b);this.layoutPosition()};l.prototype.moveTo=r?l.prototype._transitionTo:l.prototype.goTo;l.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10);this.position.y=parseInt(b,10)};l.prototype._nonTransition=function(a){this.css(a.to);a.isCleaning&&this._removeStyles(a.to);a.onTransitionEnd&&a.onTransitionEnd.call(this)};l.prototype._transition=
function(a){var b=this.layout.options.transitionDuration;if(!parseFloat(b))return this._nonTransition(a),void 0;var c=a.to,e=[],d;for(d in c)e.push(d);d={};(d.transitionProperty=e.join(","),d.transitionDuration=b,this.element.addEventListener(p,this,!1),(a.isCleaning||a.onTransitionEnd)&&(this.onTransitionEnd=function(){a.isCleaning&&this._removeStyles(c);a.onTransitionEnd&&a.onTransitionEnd.call(this)}),a.from)&&this.css(a.from);this.css(d);this.css(c);this.isTransitioning=!0};l.prototype.transition=
l.prototype[m?"_transition":"_nonTransition"];l.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)};l.prototype.onotransitionend=function(a){this.ontransitionend(a)};l.prototype.ontransitionend=function(a){a.target===this.element&&(this.removeTransitionStyles(),this.element.removeEventListener(p,this,!1),this.isTransitioning=!1,this.onTransitionEnd&&(this.onTransitionEnd.call(this),delete this.onTransitionEnd),this.emitEvent("transitionEnd",[this]))};l.prototype._removeStyles=function(a){var b=
{},c;for(c in a)b[c]="";this.css(b)};var v={transitionProperty:"",transitionDuration:""};return l.prototype.removeTransitionStyles=function(){this.css(v)},l.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])},l.prototype.remove=function(){if(!m||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var a=this;this.on("transitionEnd",function(){return a.removeElem(),!0});this.hide()},l.prototype.reveal=function(){delete this.isHidden;
this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},l.prototype.hide=function(){this.isHidden=!0;this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:function(){this.css({display:"none"})}})},l.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},l}var c=document.defaultView,f=c&&c.getComputedStyle?
function(a){return c.getComputedStyle(a,null)}:function(a){return a.currentStyle};"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],a):(b.Outlayer={},b.Outlayer.Item=a(b.EventEmitter,b.getSize,b.getStyleProperty))})(window);
(function(b){function d(a,b){for(var c in b)a[c]=b[c];return a}function a(a){var b=[];if("[object Array]"===m.call(a))b=a;else if(a&&"number"==typeof a.length)for(var c=0,e=a.length;e>c;c++)b.push(a[c]);else b.push(a);return b}function c(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()}function f(f,t,s,u,v,k){function m(a,b){if("string"==typeof a&&(a=e.querySelector(a)),!a||!r(a))return g&&g.error("Bad "+this.settings.namespace+" element: "+a),void 0;this.element=a;
this.options=d({},this.options);this.option(b);var c=++x;this.element.outlayerGUID=c;w[c]=this;this._create();this.options.isInitLayout&&this.layout()}function F(a,b){a.prototype[b]=d({},m.prototype[b])}var x=0,w={};return m.prototype.settings={namespace:"outlayer",item:k},m.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},
d(m.prototype,s.prototype),m.prototype.option=function(a){d(this.options,a)},m.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);d(this.element.style,this.options.containerStyle);this.options.isResizeBound&&this.bindResize()},m.prototype.reloadItems=function(){this.items=this._getItems(this.element.children)},m.prototype._getItems=function(a){a=this._filterFindItemElements(a);for(var b=this.settings.item,c=[],e=0,d=a.length;d>e;e++){var f=new b(a[e],this,
this.options.itemOptions);c.push(f)}return c},m.prototype._filterFindItemElements=function(b){b=a(b);for(var c=this.options.itemSelector,e=[],d=0,f=b.length;f>d;d++){var k=b[d];if(r(k))if(c){v(k,c)&&e.push(k);for(var k=k.querySelectorAll(c),g=0,h=k.length;h>g;g++)e.push(k[g])}else e.push(k)}return e},m.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},m.prototype.layout=function(){this._resetLayout();this._manageStamps();this.layoutItems(this.items,
void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited);this._isLayoutInited=!0},m.prototype._init=m.prototype.layout,m.prototype._resetLayout=function(){this.getSize()},m.prototype.getSize=function(){this.size=u(this.element)},m.prototype._getMeasurement=function(a,b){var c,e=this.options[a];e?("string"==typeof e?c=this.element.querySelector(e):r(e)&&(c=e),this[a]=c?u(c)[b]:e):this[a]=0},m.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a);this._layoutItems(a,
b);this._postLayout()},m.prototype._getItemsForLayout=function(a){for(var b=[],c=0,e=a.length;e>c;c++){var d=a[c];d.isIgnored||b.push(d)}return b},m.prototype._layoutItems=function(a,b){if(!a||!a.length)return this.emitEvent("layoutComplete",[this,a]),void 0;this._itemsOn(a,"layout",function(){this.emitEvent("layoutComplete",[this,a])});for(var c=[],e=0,d=a.length;d>e;e++){var f=a[e],k=this._getItemLayoutPosition(f);k.item=f;k.isInstant=b;c.push(k)}this._processLayoutQueue(c)},m.prototype._getItemLayoutPosition=
function(){return{x:0,y:0}},m.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var e=a[b];this._positionItem(e.item,e.x,e.y,e.isInstant)}},m.prototype._positionItem=function(a,b,c,e){e?a.goTo(b,c):a.moveTo(b,c)},m.prototype._postLayout=function(){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))},m.prototype._getContainerSize=l,m.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&
(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth);a=Math.max(a,0);this.element.style[b?"width":"height"]=a+"px"}},m.prototype._itemsOn=function(a,b,c){function e(){return d++,d===f&&c.call(k),!0}for(var d=0,f=a.length,k=this,g=0,h=a.length;h>g;g++)a[g].on(b,e)},m.prototype.ignore=function(a){(a=this.getItem(a))&&(a.isIgnored=!0)},m.prototype.unignore=function(a){(a=this.getItem(a))&&delete a.isIgnored},m.prototype.stamp=
function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++)this.ignore(a[b])}},m.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var e=a[b],d=n(this.stamps,e);-1!==d&&this.stamps.splice(d,1);this.unignore(e)}},m.prototype._find=function(b){return b?("string"==typeof b&&(b=this.element.querySelectorAll(b)),a(b)):void 0},m.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,
b=this.stamps.length;b>a;a++)this._manageStamp(this.stamps[a])}},m.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},m.prototype._manageStamp=l,m.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect;a=u(a);return{left:b.left-
c.left-a.marginLeft,top:b.top-c.top-a.marginTop,right:c.right-b.right-a.marginRight,bottom:c.bottom-b.bottom-a.marginBottom}},m.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},m.prototype.bindResize=function(){this.isResizeBound||(f.bind(b,"resize",this),this.isResizeBound=!0)},m.prototype.unbindResize=function(){f.unbind(b,"resize",this);this.isResizeBound=!1},m.prototype.onresize=function(){this.resizeTimeout&&clearTimeout(this.resizeTimeout);var a=this;this.resizeTimeout=
setTimeout(function(){a.resize()},100)},m.prototype.resize=function(){var a=u(this.element);this.size&&a&&a.innerWidth===this.size.innerWidth||(this.layout(),delete this.resizeTimeout)},m.prototype.addItems=function(a){a=this._getItems(a);if(a.length)return this.items=this.items.concat(a),a},m.prototype.appended=function(a){a=this.addItems(a);a.length&&(this.layoutItems(a,!0),this.reveal(a))},m.prototype.prepended=function(a){a=this._getItems(a);if(a.length){var b=this.items.slice(0);this.items=a.concat(b);
this._resetLayout();this.layoutItems(a,!0);this.reveal(a);this.layoutItems(b)}},m.prototype.reveal=function(a){if(a&&a.length)for(var b=0,c=a.length;c>b;b++)a[b].reveal()},m.prototype.hide=function(a){if(a&&a.length)for(var b=0,c=a.length;c>b;b++)a[b].hide()},m.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var e=this.items[b];if(e.element===a)return e}},m.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,e=a.length;e>c;c++){var d=this.getItem(a[c]);d&&b.push(d)}return b}},
m.prototype.remove=function(b){b=a(b);var c=this.getItems(b);if(c&&c.length){this._itemsOn(c,"remove",function(){this.emitEvent("removeComplete",[this,c])});b=0;for(var e=c.length;e>b;b++){var d=c[b];d.remove();d=n(this.items,d);this.items.splice(d,1)}}},m.prototype.destroy=function(){var a=this.element.style;a.height="";a.position="";a.width="";for(var a=0,b=this.items.length;b>a;a++)this.items[a].destroy();this.unbindResize();delete this.element.outlayerGUID;h&&h.removeData(this.element,this.settings.namespace)},
m.data=function(a){return(a=a&&a.outlayerGUID)&&w[a]},m.create=function(a,b){function f(){m.apply(this,arguments)}return d(f.prototype,m.prototype),F(f,"options"),F(f,"settings"),d(f.prototype.options,b),f.prototype.settings.namespace=a,f.data=m.data,f.Item=function(){k.apply(this,arguments)},f.Item.prototype=new k,f.prototype.settings.item=f.Item,t(function(){for(var b=c(a),d=e.querySelectorAll(".js-"+b),b="data-"+b+"-options",k=0,l=d.length;l>k;k++){var p,s=d[k],t=s.getAttribute(b);try{p=t&&JSON.parse(t)}catch(m){g&&
g.error("Error parsing "+b+" on "+s.nodeName.toLowerCase()+(s.id?"#"+s.id:"")+": "+m);continue}t=new f(s,p);h&&h.data(s,a,t)}}),h&&h.bridget&&h.bridget(a,f),f},m.Item=k,m}var e=b.document,g=b.console,h=b.jQuery,l=function(){},m=Object.prototype.toString,r="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},n=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=
0,e=a.length;e>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define("eventie/eventie doc-ready/doc-ready eventEmitter/EventEmitter get-size/get-size matches-selector/matches-selector ./item".split(" "),f):b.Outlayer=f(b.eventie,b.docReady,b.EventEmitter,b.getSize,b.matchesSelector,b.Outlayer.Item)})(window);
(function(b){function d(b,d){var e=b.create("masonry");return e.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},e.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0];this.columnWidth=(a=a&&a.element)&&d(a).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;
this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)},e.prototype.getContainerWidth=function(){var a=d(this.options.isFitWidth?this.element.parentNode:this.element);this.containerWidth=a&&a.innerWidth},e.prototype._getItemLayoutPosition=function(b){b.getSize();var c=Math.ceil(b.size.outerWidth/this.columnWidth),c=Math.min(c,this.cols),e=this._getColGroup(c),d=Math.min.apply(Math,e),c=a(e,d),f={x:this.columnWidth*c,y:d};b=d+b.size.outerHeight;e=this.cols+
1-e.length;for(d=0;e>d;d++)this.colYs[c+d]=b;return f},e.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,e=0;c>e;e++){var d=this.colYs.slice(e,e+a);b[e]=Math.max.apply(Math,d)}return b},e.prototype._manageStamp=function(a){var b=d(a);a=this._getElementOffset(a);var c=this.options.isOriginLeft?a.left:a.right,e=c+b.outerWidth,c=Math.floor(c/this.columnWidth),c=Math.max(0,c),e=Math.floor(e/this.columnWidth),e=Math.min(this.cols-1,e),b=(this.options.isOriginTop?
a.top:a.bottom)+b.outerHeight;for(a=c;e>=a;a++)this.colYs[a]=Math.max(b,this.colYs[a])},e.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},e.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},e.prototype.resize=function(){var a=this.containerWidth;this.getContainerWidth();a!==
this.containerWidth&&this.layout()},e}var a=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var e=0,d=a.length;d>e;e++)if(a[e]===b)return e;return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],d):b.Masonry=d(b.Outlayer,b.getSize)})(window);
(function(){function b(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(b,function(b){return a[b]||b}):this}}function d(a,b,c){return("string"===typeof b?b:b.toString()).replace(a.define||g,function(b,e,d,f){0===e.indexOf("def.")&&(e=e.substring(4));e in c||(":"===d?(a.defineParams&&f.replace(a.defineParams,function(a,b,d){c[e]={arg:b,text:d}}),e in c||(c[e]=f)):(new Function("def","def['"+e+"']="+
f))(c));return""}).replace(a.use||g,function(b,e){a.useParams&&(e=e.replace(a.useParams,function(a,b,e,d){if(c[e]&&c[e].arg&&d)return a=(e+":"+d).replace(/'|\\/g,"_"),c.__exp=c.__exp||{},c.__exp[a]=c[e].text.replace(new RegExp("(^|[^\\w$])"+c[e].arg+"([^\\w$])","g"),"$1"+d+"$2"),b+"def.__exp['"+a+"']"}));var f=(new Function("def","return "+e))(c);return f?d(a,f,c):f})}function a(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var c={version:"1.0.0",templateSettings:{evaluate:/\{\{([\s\S]+?\}?)\}\}/g,
interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0};
"undefined"!==typeof module&&module.exports?module.exports=c:"function"===typeof define&&define.amd?define(function(){return c}):(0,function(){return this||(0,eval)("this")}()).doT=c;String.prototype.encodeHTML=b();var f={start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},e={start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"},g=/$^/;c.template=function(h,l,m){l=l||c.templateSettings;var r=l.append?f:e,n,p=0,t;h=l.use||l.define?d(l,h,m||{}):h;h=("var out='"+
(l.strip?h.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):h).replace(/'|\\/g,"\\$&").replace(l.interpolate||g,function(b,c){return r.start+a(c)+r.end}).replace(l.encode||g,function(b,c){n=!0;return r.start+a(c)+r.endencode}).replace(l.conditional||g,function(b,c,e){return c?e?"';}else if("+a(e)+"){out+='":"';}else{out+='":e?"';if("+a(e)+"){out+='":"';}out+='"}).replace(l.iterate||g,function(b,c,e,d){if(!c)return"';} } out+='";p+=1;t=d||"i"+p;c=a(c);return"';var arr"+
p+"="+c+";if(arr"+p+"){var "+e+","+t+"=-1,l"+p+"=arr"+p+".length-1;while("+t+"<l"+p+"){"+e+"=arr"+p+"["+t+"+=1];out+='"}).replace(l.evaluate||g,function(b,c){return"';"+a(c)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+=");n&&l.selfcontained&&(h="String.prototype.encodeHTML=("+b.toString()+"());"+h);try{return new Function(l.varname,h)}catch(s){throw"undefined"!==
typeof console&&console.log("Could not create a template function: "+h),s;}};c.compile=function(a,b){return c.template(a,null,b)}})();
(function(b,d){"function"===typeof define&&define.amd?define(["jquery"],function(a){return b.returnExportsGlobal=d(a)}):"object"===typeof exports?module.exports=d(require("jquery")):d(jQuery)})(this,function(b){var d,a,c,f,e,g,h,l,m,r=[].slice,n={}.hasOwnProperty,p=function(a,b){function c(){this.constructor=a}for(var e in b)n.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};a=function(){function a(c){this.currentFlag=null;this.controllers={};this.aliasMaps=
{};this.$inputor=b(c);this.setupRootElement();this.listen()}a.prototype.createContainer=function(a){if(0===(this.$el=b("#atwho-container",a)).length)return b(a.body).append(this.$el=b("<div id='atwho-container'></div>"))};a.prototype.setupRootElement=function(a,b){var c;null==b&&(b=!1);if(a)this.window=a.contentWindow,this.document=a.contentDocument||this.window.document,this.iframe=a;else{this.document=this.$inputor[0].ownerDocument;this.window=this.document.defaultView||this.document.parentWindow;
try{this.iframe=this.window.frameElement}catch(e){throw this.iframe=null,Error("iframe auto-discovery is failed.\nPlease use `serIframe` to set the target iframe manually.");}}return(this.iframeAsRoot=b)?(null!=(c=this.$el)&&c.remove(),this.createContainer(this.document)):this.createContainer(document)};a.prototype.controller=function(a){var b,c,e,d;if(this.aliasMaps[a])c=this.controllers[this.aliasMaps[a]];else for(e in d=this.controllers,d)if(b=d[e],e===a){c=b;break}return c?c:this.controllers[this.currentFlag]};
a.prototype.setContextFor=function(a){this.currentFlag=a;return this};a.prototype.reg=function(a,b){var c,d;c=(d=this.controllers)[a]||(d[a]=this.$inputor.is("[contentEditable]")?new e(this,a):new l(this,a));b.alias&&(this.aliasMaps[b.alias]=a);c.init(b);return this};a.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(a){return function(b){return a.onKeyup(b)}}(this)).on("keydown.atwhoInner",function(a){return function(b){return a.onKeydown(b)}}(this)).on("scroll.atwhoInner",
function(a){return function(b){var c;return null!=(c=a.controller())?c.view.hide(b):void 0}}(this)).on("blur.atwhoInner",function(a){return function(b){var c;if(c=a.controller())return c.view.hide(b,c.getOpt("displayTimeout"))}}(this)).on("click.atwhoInner",function(a){return function(b){return a.dispatch(b)}}(this))};a.prototype.shutdown=function(){var a,b,c;c=this.controllers;for(b in c)a=c[b],a.destroy(),delete this.controllers[b];this.$inputor.off(".atwhoInner");return this.$el.remove()};a.prototype.dispatch=
function(a){return b.map(this.controllers,function(b){return function(c){var e;if(e=c.getOpt("delay"))return clearTimeout(b.delayedCallback),b.delayedCallback=setTimeout(function(){if(c.lookUp(a))return b.setContextFor(c.at)},e);if(c.lookUp(a))return b.setContextFor(c.at)}}(this))};a.prototype.onKeyup=function(a){var c;switch(a.keyCode){case g.ESC:a.preventDefault();null!=(c=this.controller())&&c.view.hide();break;case g.DOWN:case g.UP:case g.CTRL:b.noop();break;case g.P:case g.N:a.ctrlKey||this.dispatch(a);
break;default:this.dispatch(a)}};a.prototype.onKeydown=function(a){var c,e;if((c=null!=(e=this.controller())?e.view:void 0)&&c.visible())switch(a.keyCode){case g.ESC:a.preventDefault();c.hide(a);break;case g.UP:a.preventDefault();c.prev();break;case g.DOWN:a.preventDefault();c.next();break;case g.P:if(!a.ctrlKey)break;a.preventDefault();c.prev();break;case g.N:if(!a.ctrlKey)break;a.preventDefault();c.next();break;case g.TAB:case g.ENTER:if(!c.visible())break;a.preventDefault();c.choose(a);break;default:b.noop()}};
return a}();c=function(){function a(c,e){this.app=c;this.at=e;this.$inputor=this.app.$inputor;this.id=this.$inputor[0].id||this.uid();this.query=this.setting=null;this.pos=0;this.range=null;0===(this.$el=b("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=b("<div id='atwho-ground-"+this.id+"'></div>"));this.model=new h(this);this.view=new m(this)}a.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()};a.prototype.init=
function(a){this.setting=b.extend({},this.setting||b.fn.atwho["default"],a);this.view.init();return this.model.reload(this.setting.data)};a.prototype.destroy=function(){this.trigger("beforeDestroy");this.model.destroy();this.view.destroy();return this.$el.remove()};a.prototype.callDefault=function(){var a,c;c=arguments[0];a=2<=arguments.length?r.call(arguments,1):[];try{return f[c].apply(this,a)}catch(e){return a=e,b.error(""+a+" Or maybe At.js doesn't have function "+c)}};a.prototype.trigger=function(a,
b){var c;null==b&&(b=[]);b.push(this);c=this.getOpt("alias");return this.$inputor.trigger(c?""+a+"-"+c+".atwho":""+a+".atwho",b)};a.prototype.callbacks=function(a){return this.getOpt("callbacks")[a]||f[a]};a.prototype.getOpt=function(a,b){try{return this.setting[a]}catch(c){return null}};a.prototype.insertContentFor=function(a){var c;c=this.getOpt("insertTpl");a=b.extend({},a.data("item-data"),{"atwho-at":this.at});return this.callbacks("tplEval").call(this,c,a)};a.prototype.renderView=function(a){var b;
b=this.getOpt("searchKey");a=this.callbacks("sorter").call(this,this.query.text,a.slice(0,1001),b);return this.view.render(a.slice(0,this.getOpt("limit")))};a.arrayToDefaultHash=function(a){var c,e,d,f;if(!b.isArray(a))return a;f=[];e=0;for(d=a.length;e<d;e++)c=a[e],b.isPlainObject(c)?f.push(c):f.push({name:c});return f};a.prototype.lookUp=function(a){var c;if(a=this.catchQuery(a))return c=function(a){return a&&0<a.length?this.renderView(this.constructor.arrayToDefaultHash(a)):this.view.hide()},this.model.query(a.text,
b.proxy(c,this)),a};return a}();l=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}p(c,a);c.prototype.catchQuery=function(){var a,b,c;b=this.$inputor.val();a=this.$inputor.caret("pos",{iframe:this.app.iframe});b=b.slice(0,a);b=this.callbacks("matcher").call(this,this.at,b,this.getOpt("startWithSpace"));"string"===typeof b&&b.length<=this.getOpt("maxLen",20)?(c=a-b.length,a=c+b.length,this.pos=c,b={text:b,headPos:c,endPos:a},this.trigger("matched",[this.at,b.text])):(b=
null,this.view.hide());return this.query=b};c.prototype.rect=function(){var a,c;if(a=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&(c=b(this.app.iframe).offset(),a.left+=c.left,a.top+=c.top),c=this.app.document.selection?0:2,{left:a.left,top:a.top,bottom:a.top+a.height+c}};c.prototype.insert=function(a,b){var c,e,d,f;c=this.$inputor;e=c.val();d=e.slice(0,Math.max(this.query.headPos-this.at.length,0));f=""===(f=this.getOpt("suffix"))?
f:f||" ";a+=f;e=""+d+a+e.slice(this.query.endPos||0);c.val(e);c.caret("pos",d.length+a.length,{iframe:this.app.iframe});c.is(":focus")||c.focus();return c.change()};return c}(c);e=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}p(c,a);c.prototype._getRange=function(){var a;a=this.app.window.getSelection();if(0<a.rangeCount)return a.getRangeAt(0)};c.prototype._setRange=function(a,c,e){null==e&&(e=this._getRange());if(e)return c=b(c)[0],"after"===a?(e.setEndAfter(c),e.setStartAfter(c)):
(e.setEndBefore(c),e.setStartBefore(c)),e.collapse(!1),this._clearRange(e)};c.prototype._clearRange=function(a){var b;null==a&&(a=this._getRange());b=this.app.window.getSelection();b.removeAllRanges();return b.addRange(a)};c.prototype._movingEvent=function(a){var b;return"click"===a.type||(b=a.which)===g.RIGHT||b===g.LEFT||b===g.UP||b===g.DOWN};c.prototype._unwrap=function(a){var c;a=b(a).unwrap().get(0);(c=a.nextSibling)&&c.nodeValue&&(a.nodeValue+=c.nodeValue,b(c).remove());return a};c.prototype.catchQuery=
function(a){var c,e,d,f,h;if(f=this._getRange())if(a.which===g.ENTER)(e=b(f.startContainer).closest(".atwho-query")).contents().unwrap(),e.is(":empty")&&e.remove(),(e=b(".atwho-query",this.app.document)).text(e.text()).contents().last().unwrap(),this._clearRange();else{if(/firefox/i.test(navigator.userAgent)){if(b(f.startContainer).is(this.$inputor)){this._clearRange();return}a.which===g.BACKSPACE&&f.startContainer.nodeType===document.ELEMENT_NODE&&0<=(c=f.startOffset-1)?(h=f.cloneRange(),h.setStart(f.startContainer,
c),b(h.cloneContents()).contents().last().is(".atwho-inserted")&&(c=b(f.startContainer).contents().get(c),this._setRange("after",b(c).contents().last()))):a.which===g.LEFT&&f.startContainer.nodeType===document.TEXT_NODE&&(c=b(f.startContainer.previousSibling),c.is(".atwho-inserted")&&0===f.startOffset&&this._setRange("after",c.contents().last()))}b(f.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query");0<(e=b(".atwho-query",this.app.document)).length&&
e.is(":empty")&&0===e.text().length&&e.remove();this._movingEvent(a)||e.removeClass("atwho-inserted");h=f.cloneRange();h.setStart(f.startContainer,0);c=this.callbacks("matcher").call(this,this.at,h.toString(),this.getOpt("startWithSpace"));0===e.length&&"string"===typeof c&&0<=(d=f.startOffset-this.at.length-c.length)&&(f.setStart(f.startContainer,d),f.surroundContents((e=b("<span class='atwho-query'/>",this.app.document))[0]),d=e.contents().last().get(0),/firefox/i.test(navigator.userAgent)?(f.setStart(d,
d.length),f.setEnd(d,d.length),this._clearRange(f)):this._setRange("after",d,f));"string"===typeof c&&c.length<=this.getOpt("maxLen",20)?(f={text:c,el:e},this.trigger("matched",[this.at,f.text])):(this.view.hide(),f=null,0<=e.text().indexOf(this.at)&&(this._movingEvent(a)&&e.hasClass("atwho-inserted")?e.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,e)&&this._setRange("after",this._unwrap(e.text(e.text()).contents().first()))));return this.query=f}};c.prototype.rect=
function(){var a,c;c=this.query.el.offset();this.app.iframe&&!this.app.iframeAsRoot&&(a=b(this.app.iframe).offset(),c.left+=a.left-this.$inputor.scrollLeft(),c.top+=a.top-this.$inputor.scrollTop());c.bottom=c.top+this.query.el.height();return c};c.prototype.insert=function(a,b){var c,e;e=(e=this.getOpt("suffix"))?e:e||"\u00a0";this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(a);if(c=this._getRange())c.setEndAfter(this.query.el[0]),c.collapse(!1),c.insertNode(e=this.app.document.createTextNode(e)),
this._setRange("after",e,c);this.$inputor.is(":focus")||this.$inputor.focus();return this.$inputor.change()};return c}(c);h=function(){function a(b){this.context=b;this.at=this.context.at;this.storage=this.context.$inputor}a.prototype.destroy=function(){return this.storage.data(this.at,null)};a.prototype.saved=function(){return 0<this.fetch()};a.prototype.query=function(a,b){var c,e;c=this.fetch();e=this.context.getOpt("searchKey");c=this.context.callbacks("filter").call(this.context,a,c,e)||[];e=
this.context.callbacks("remoteFilter");return 0<c.length||!e&&0===c.length?b(c):e.call(this.context,a,b)};a.prototype.fetch=function(){return this.storage.data(this.at)||[]};a.prototype.save=function(a){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,a||[]))};a.prototype.load=function(a){if(!this.saved()&&a)return this._load(a)};a.prototype.reload=function(a){return this._load(a)};a.prototype._load=function(a){return"string"===typeof a?b.ajax(a,{dataType:"json"}).done(function(a){return function(b){return a.save(b)}}(this)):
this.save(a)};return a}();m=function(){function a(c){this.context=c;this.$el=b("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>");this.timeoutID=null;this.context.$el.append(this.$el);this.bindEvent()}a.prototype.init=function(){var a;a=this.context.getOpt("alias")||this.context.at.charCodeAt(0);return this.$el.attr({id:"at-view-"+a})};a.prototype.destroy=function(){return this.$el.remove()};a.prototype.bindEvent=function(){var a;a=this.$el.find("ul");return a.on("mouseenter.atwho-view",
"li",function(c){a.find(".cur").removeClass("cur");return b(c.currentTarget).addClass("cur")}).on("click.atwho-view","li",function(c){return function(e){a.find(".cur").removeClass("cur");b(e.currentTarget).addClass("cur");c.choose(e);return e.preventDefault()}}(this))};a.prototype.visible=function(){return this.$el.is(":visible")};a.prototype.choose=function(a){var b,c;(b=this.$el.find(".cur")).length&&(c=this.context.insertContentFor(b),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,
c,b),b),this.context.trigger("inserted",[b,a]),this.hide(a));if(this.context.getOpt("hideWithoutSuffix"))return this.stopShowing=!0};a.prototype.reposition=function(a){var c,e;c=this.context.app.iframeAsRoot?this.context.app.window:window;a.bottom+this.$el.height()-b(c).scrollTop()>b(c).height()&&(a.bottom=a.top-this.$el.height());a.left>(c=b(c).width()-this.$el.width()-5)&&(a.left=c);a={left:a.left,top:a.bottom};null!=(e=this.context.callbacks("beforeReposition"))&&e.call(this.context,a);this.$el.offset(a);
return this.context.trigger("reposition",[a])};a.prototype.next=function(){var a,b;a=this.$el.find(".cur").removeClass("cur");b=a.next();b.length||(b=this.$el.find("li:first"));b.addClass("cur");return this.$el.animate({scrollTop:Math.max(0,a.innerHeight()*(b.index()+2)-this.$el.height())},150)};a.prototype.prev=function(){var a,b;a=this.$el.find(".cur").removeClass("cur");b=a.prev();b.length||(b=this.$el.find("li:last"));b.addClass("cur");return this.$el.animate({scrollTop:Math.max(0,a.innerHeight()*
(b.index()+2)-this.$el.height())},150)};a.prototype.show=function(){var a;if(this.stopShowing)this.stopShowing=!1;else if(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),a=this.context.rect())return this.reposition(a)};a.prototype.hide=function(a,b){var c;if(this.visible()){if(isNaN(b))return this.$el.hide(),this.context.trigger("hidden",[a]);c=function(a){return function(){return a.hide()}}(this);clearTimeout(this.timeoutID);return this.timeoutID=setTimeout(c,
b)}};a.prototype.render=function(a){var c,e,d,f,g,h;if(b.isArray(a)&&0<a.length){this.$el.find("ul").empty();e=this.$el.find("ul");f=this.context.getOpt("displayTpl");g=0;for(h=a.length;g<h;g++)d=a[g],d=b.extend({},d,{"atwho-at":this.context.at}),c=this.context.callbacks("tplEval").call(this.context,f,d),c=b(this.context.callbacks("highlighter").call(this.context,c,this.context.query.text)),c.data("item-data",d),e.append(c);this.show();if(this.context.getOpt("highlightFirst"))return e.find("li:first").addClass("cur")}else this.hide()};
return a}();g={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8};f={beforeSave:function(a){return c.arrayToDefaultHash(a)},matcher:function(a,b,c){var e;a=a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");c&&(a="(?:^|\\s)"+a);c=decodeURI("%C3%80");e=decodeURI("%C3%BF");return(a=(new RegExp(""+a+"([A-Za-z"+c+"-"+e+"0-9_+-]*)$|"+a+"([^\\x00-\\xff]*)$","gi")).exec(b))?a[2]||a[1]:null},filter:function(a,b,c){var e,d,f,g;g=[];d=0;for(f=b.length;d<f;d++)e=
b[d],~(new String(e[c])).toLowerCase().indexOf(a.toLowerCase())&&g.push(e);return g},remoteFilter:null,sorter:function(a,b,c){var e,d,f,g;if(!a)return b;g=[];d=0;for(f=b.length;d<f;d++)e=b[d],e.atwho_order=(new String(e[c])).toLowerCase().indexOf(a.toLowerCase()),-1<e.atwho_order&&g.push(e);return g.sort(function(a,b){return a.atwho_order-b.atwho_order})},tplEval:function(a,b){try{return a.replace(/\$\{([^\}]*)\}/g,function(a,c,e){return b[c]})}catch(c){return""}},highlighter:function(a,b){var c;
if(!b)return a;c=new RegExp(">\\s*(\\w*?)("+b.replace("+","\\+")+")(\\w*)\\s*<","ig");return a.replace(c,function(a,b,c,e){return"> "+b+"<strong>"+c+"</strong>"+e+" <"})},beforeInsert:function(a,b){return a},beforeReposition:function(a){return a},afterMatchFailed:function(a,b){}};d={load:function(a,b){var c;if(c=this.controller(a))return c.model.load(b)},isSelecting:function(){var a;return null!=(a=this.controller())?a.view.visible():void 0},setIframe:function(a,b){this.setupRootElement(a,b);return null},
run:function(){return this.dispatch()},destroy:function(){this.shutdown();return this.$inputor.data("atwho",null)}};b.fn.atwho=function(c){var e,f;f=arguments;e=null;this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var g,h;(h=(g=b(this)).data("atwho"))||g.data("atwho",h=new a(this));return"object"!==typeof c&&c?d[c]&&h?e=d[c].apply(h,Array.prototype.slice.call(f,1)):b.error("Method "+c+" does not exist on jQuery.caret"):h.reg(c.at,c)});return e||this};b.fn.atwho["default"]=
{at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",callbacks:f,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,highlightFirst:!0,limit:5,maxLen:20,displayTimeout:300,delay:null}});
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){function d(a){a=f.json?JSON.stringify(a):String(a);return f.raw?a:encodeURIComponent(a)}function a(a,d){var h;if(f.raw)h=a;else a:{var l=a;0===l.indexOf('"')&&(l=l.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{l=decodeURIComponent(l.replace(c," "));h=f.json?JSON.parse(l):l;break a}catch(m){}h=void 0}return b.isFunction(d)?d(h):h}var c=/\+/g,f=b.cookie=function(c,g,h){if(void 0!==g&&!b.isFunction(g)){h=
b.extend({},f.defaults,h);if("number"===typeof h.expires){var l=h.expires,m=h.expires=new Date;m.setDate(m.getDate()+l)}return document.cookie=[f.raw?c:encodeURIComponent(c),"=",d(g),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}h=c?void 0:{};for(var l=document.cookie?document.cookie.split("; "):[],m=0,r=l.length;m<r;m++){var n=l[m].split("="),p;p=n.shift();p=f.raw?p:decodeURIComponent(p);n=n.join("=");
if(c&&c===p){h=a(n,g);break}c||void 0===(n=a(n))||(h[p]=n)}return h};f.defaults={};b.removeCookie=function(a,c){if(void 0===b.cookie(a))return!1;b.cookie(a,"",b.extend({},c,{expires:-1}));return!b.cookie(a)}});
(function(b,d,a,c){var f=function(a,c){this.elem=a;this.$elem=b(a);this.options=c;this.metadata=this.$elem.data("stickem-options");this.$win=b(d)};f.prototype={defaults:{item:".stickem",container:".stickem-container",stickClass:"stickit",endStickClass:"stickit-end",offset:0,start:0,onStick:null,onUnstick:null},init:function(){this.config=b.extend({},this.defaults,this.options,this.metadata);this.setWindowHeight();this.getItems();this.bindEvents();return this},bindEvents:function(){this.$win.on("scroll.stickem",
b.proxy(this.handleScroll,this));this.$win.on("resize.stickem",b.proxy(this.handleResize,this))},destroy:function(){this.$win.off("scroll.stickem");this.$win.off("resize.stickem")},getItem:function(a,c){var d=b(c),d={$elem:d,elemHeight:d.height(),$container:d.parents(this.config.container),isStuck:!1};this.windowHeight>d.elemHeight?(d.containerHeight=d.$container.outerHeight(),d.containerInner={border:{bottom:parseInt(d.$container.css("border-bottom"),10)||0,top:parseInt(d.$container.css("border-top"),
10)||0},padding:{bottom:parseInt(d.$container.css("padding-bottom"),10)||0,top:parseInt(d.$container.css("padding-top"),10)||0}},d.containerInnerHeight=d.$container.height(),d.containerStart=d.$container.offset().top-this.config.offset+this.config.start+d.containerInner.padding.top+d.containerInner.border.top,d.scrollFinish=d.containerStart-this.config.start+(d.containerInnerHeight-d.elemHeight),d.containerInnerHeight>d.elemHeight&&this.items.push(d)):d.$elem.removeClass(this.config.stickClass+" "+
this.config.endStickClass)},getItems:function(){this.items=[];this.$elem.find(this.config.item).each(b.proxy(this.getItem,this))},handleResize:function(){this.getItems();this.setWindowHeight()},handleScroll:function(){if(0<this.items.length)for(var a=this.$win.scrollTop(),b=0,c=this.items.length;b<c;b++){var d=this.items[b];if(d.isStuck&&(a<d.containerStart||a>d.scrollFinish)||a>d.scrollFinish){if(d.$elem.removeClass(this.config.stickClass),a>d.scrollFinish&&d.$elem.addClass(this.config.endStickClass),
d.isStuck=!1,this.config.onUnstick)this.config.onUnstick(d)}else if(!1===d.isStuck&&a>d.containerStart&&a<d.scrollFinish&&(d.$elem.removeClass(this.config.endStickClass).addClass(this.config.stickClass),d.isStuck=!0,this.config.onStick))this.config.onStick(d)}},setWindowHeight:function(){this.windowHeight=this.$win.height()-this.config.offset}};f.defaults=f.prototype.defaults;b.fn.stickem=function(a){this.destroy=function(){this.each(function(){(new f(this,a)).destroy()})};return this.each(function(){(new f(this,
a)).init()})}})(jQuery,window,document);
(function(b){var d,a,c;d=function(){function a(c,d,f){this.row=c;this.tree=d;this.settings=f;this.id=this.row.data(this.settings.nodeIdAttr);c=this.row.data(this.settings.parentIdAttr);null!=c&&""!==c&&(this.parentId=c);this.treeCell=b(this.row.children(this.settings.columnElType)[this.settings.column]);this.expander=b(this.settings.expanderTemplate);this.indenter=b(this.settings.indenterTemplate);this.children=[];this.initialized=!1;this.treeCell.prepend(this.indenter)}a.prototype.addChild=function(a){return this.children.push(a)};
a.prototype.ancestors=function(){var a,b;b=this;for(a=[];b=b.parentNode();)a.push(b);return a};a.prototype.collapse=function(){if(this.collapsed())return this;this.row.removeClass("expanded").addClass("collapsed");this._hideChildren();this.expander.attr("title",this.settings.stringExpand);this.initialized&&null!=this.settings.onNodeCollapse&&this.settings.onNodeCollapse.apply(this);return this};a.prototype.collapsed=function(){return this.row.hasClass("collapsed")};a.prototype.expand=function(){if(this.expanded())return this;
this.row.removeClass("collapsed").addClass("expanded");this.initialized&&null!=this.settings.onNodeExpand&&this.settings.onNodeExpand.apply(this);b(this.row).is(":visible")&&this._showChildren();this.expander.attr("title",this.settings.stringCollapse);return this};a.prototype.expanded=function(){return this.row.hasClass("expanded")};a.prototype.hide=function(){this._hideChildren();this.row.hide();return this};a.prototype.isBranchNode=function(){return 0<this.children.length||!0===this.row.data(this.settings.branchAttr)?
!0:!1};a.prototype.updateBranchLeafClass=function(){this.row.removeClass("branch");this.row.removeClass("leaf");this.row.addClass(this.isBranchNode()?"branch":"leaf")};a.prototype.level=function(){return this.ancestors().length};a.prototype.parentNode=function(){return null!=this.parentId?this.tree[this.parentId]:null};a.prototype.removeChild=function(a){a=b.inArray(a,this.children);return this.children.splice(a,1)};a.prototype.render=function(){var a,c=this.settings,d;!0===c.expandable&&this.isBranchNode()&&
(a=function(a){b(this).parents("table").treetable("node",b(this).parents("tr").data(c.nodeIdAttr)).toggle();return a.preventDefault()},this.indenter.html(this.expander),d=!0===c.clickableNodeNames?this.treeCell:this.expander,d.off("click.treetable").on("click.treetable",a),d.off("keydown.treetable").on("keydown.treetable",function(b){13==b.keyCode&&a.apply(this,[b])}));this.indenter[0].style.paddingLeft=""+this.level()*c.indent+"px";return this};a.prototype.reveal=function(){null!=this.parentId&&
this.parentNode().reveal();return this.expand()};a.prototype.setParent=function(a){null!=this.parentId&&this.tree[this.parentId].removeChild(this);this.parentId=a.id;this.row.data(this.settings.parentIdAttr,a.id);return a.addChild(this)};a.prototype.show=function(){this.initialized||this._initialize();this.row.show();this.expanded()&&this._showChildren();return this};a.prototype.toggle=function(){this.expanded()?this.collapse():this.expand();return this};a.prototype._hideChildren=function(){var a,
b,c,d,f;d=this.children;f=[];b=0;for(c=d.length;b<c;b++)a=d[b],f.push(a.hide());return f};a.prototype._initialize=function(){var a=this.settings;this.render();!0===a.expandable&&"collapsed"===a.initialState?this.collapse():this.expand();null!=a.onNodeInitialized&&a.onNodeInitialized.apply(this);return this.initialized=!0};a.prototype._showChildren=function(){var a,b,c,d,f;d=this.children;f=[];b=0;for(c=d.length;b<c;b++)a=d[b],f.push(a.show());return f};return a}();a=function(){function a(b,c){this.table=
b;this.settings=c;this.tree={};this.nodes=[];this.roots=[]}a.prototype.collapseAll=function(){var a,b,c,d,f;d=this.nodes;f=[];b=0;for(c=d.length;b<c;b++)a=d[b],f.push(a.collapse());return f};a.prototype.expandAll=function(){var a,b,c,d,f;d=this.nodes;f=[];b=0;for(c=d.length;b<c;b++)a=d[b],f.push(a.expand());return f};a.prototype.findLastNode=function(a){return 0<a.children.length?this.findLastNode(a.children[a.children.length-1]):a};a.prototype.loadRows=function(a){var c,f;if(null!=a)for(f=0;f<a.length;f++)c=
b(a[f]),null!=c.data(this.settings.nodeIdAttr)&&(c=new d(c,this.tree,this.settings),this.nodes.push(c),this.tree[c.id]=c,null!=c.parentId&&this.tree[c.parentId]?this.tree[c.parentId].addChild(c):this.roots.push(c));for(f=0;f<this.nodes.length;f++)this.nodes[f].updateBranchLeafClass();return this};a.prototype.move=function(a,c){var d=a.parentNode();a!==c&&c.id!==a.parentId&&-1===b.inArray(a,c.ancestors())&&(a.setParent(c),this._moveRows(a,c),1===a.parentNode().children.length&&a.parentNode().render());
d&&d.updateBranchLeafClass();a.parentNode()&&a.parentNode().updateBranchLeafClass();a.updateBranchLeafClass();return this};a.prototype.removeNode=function(a){this.unloadBranch(a);a.row.remove();null!=a.parentId&&a.parentNode().removeChild(a);delete this.tree[a.id];this.nodes.splice(b.inArray(a,this.nodes),1);return this};a.prototype.render=function(){var a,b,c,d;d=this.roots;b=0;for(c=d.length;b<c;b++)a=d[b],a.show();return this};a.prototype.sortBranch=function(a,b){a.children.sort(b);this._sortChildRows(a);
return this};a.prototype.unloadBranch=function(a){var b=a.children.slice(0),c;for(c=0;c<b.length;c++)this.removeNode(b[c]);a.children=[];a.updateBranchLeafClass();return this};a.prototype._moveRows=function(a,b){var c=a.children,d;a.row.insertAfter(b.row);a.render();for(d=c.length-1;0<=d;d--)this._moveRows(c[d],a)};a.prototype._sortChildRows=function(a){return this._moveRows(a,a)};return a}();c={init:function(c,d){var g;g=b.extend({branchAttr:"ttBranch",clickableNodeNames:!1,column:0,columnElType:"td",
expandable:!1,expanderTemplate:"<a href='#'>&nbsp;</a>",indent:19,indenterTemplate:"<span class='indenter'></span>",initialState:"collapsed",nodeIdAttr:"ttId",parentIdAttr:"ttParentId",stringExpand:"Expand",stringCollapse:"Collapse",onInitialized:null,onNodeCollapse:null,onNodeExpand:null,onNodeInitialized:null},c);return this.each(function(){var c=b(this),f;if(d||void 0===c.data("treetable"))f=new a(this,g),f.loadRows(this.rows).render(),c.addClass("treetable").data("treetable",f),null!=g.onInitialized&&
g.onInitialized.apply(f);return c})},destroy:function(){return this.each(function(){return b(this).removeData("treetable").removeClass("treetable")})},collapseAll:function(){this.data("treetable").collapseAll();return this},collapseNode:function(a){var b=this.data("treetable").tree[a];if(b)b.collapse();else throw Error("Unknown node '"+a+"'");return this},expandAll:function(){this.data("treetable").expandAll();return this},expandNode:function(a){var b=this.data("treetable").tree[a];if(b)b.initialized||
b._initialize(),b.expand();else throw Error("Unknown node '"+a+"'");return this},loadBranch:function(a,c){var d=this.data("treetable").settings,h=this.data("treetable").tree;c=b(c);if(null==a)this.append(c);else{var l=this.data("treetable").findLastNode(a);c.insertAfter(l.row)}this.data("treetable").loadRows(c);c.filter("tr").each(function(){h[b(this).data(d.nodeIdAttr)].show()});null!=a&&a.render().expand();return this},move:function(a,b){var c,d;d=this.data("treetable").tree[a];c=this.data("treetable").tree[b];
this.data("treetable").move(d,c);return this},node:function(a){return this.data("treetable").tree[a]},removeNode:function(a){var b=this.data("treetable").tree[a];if(b)this.data("treetable").removeNode(b);else throw Error("Unknown node '"+a+"'");return this},reveal:function(a){var b=this.data("treetable").tree[a];if(b)b.reveal();else throw Error("Unknown node '"+a+"'");return this},sortBranch:function(a,c){var d=this.data("treetable").settings,d=c=c||d.column;b.isNumeric(c)&&(d=function(a,d){var f,
g;f=function(a){a=a.row.find("td:eq("+c+")").text();return b.trim(a).toUpperCase()};g=f(a);f=f(d);return g<f?-1:g>f?1:0});this.data("treetable").sortBranch(a,d);return this},unloadBranch:function(a){this.data("treetable").unloadBranch(a);return this}};b.fn.treetable=function(a){return c[a]?c[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==typeof a&&a?b.error("Method "+a+" does not exist on jQuery.treetable"):c.init.apply(this,arguments)};this.TreeTable||(this.TreeTable={});this.TreeTable.Node=
d;this.TreeTable.Tree=a})(jQuery);(function(b){b.Placeholders={Utils:{addEventListener:function(b,a,c){return b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent?b.attachEvent("on"+a,c):void 0},inArray:function(b,a){var c,f;c=0;for(f=b.length;f>c;c++)if(b[c]===a)return!0;return!1},moveCaret:function(b,a){var c;b.createTextRange?(c=b.createTextRange(),c.move("character",a),c.select()):b.selectionStart&&(b.focus(),b.setSelectionRange(a,a))},changeType:function(b,a){try{return b.type=a,!0}catch(c){return!1}}}}})(this);
(function(b){function d(){}function a(){try{return document.activeElement}catch(a){}}function c(a,b){var c,d,e=!!b&&a.value!==b,f=a.value===a.getAttribute(A);return(e||f)&&"true"===a.getAttribute(C)?(a.removeAttribute(C),a.value=a.value.replace(a.getAttribute(A),""),a.className=a.className.replace(Z,""),d=a.getAttribute(R),0<=parseInt(d,10)&&(a.setAttribute("maxLength",d),a.removeAttribute(R)),c=a.getAttribute(D),c&&(a.type=c),!0):!1}function f(a){var b,c,d=a.getAttribute(A);return""===a.value&&d?
(a.setAttribute(C,"true"),a.value=d,a.className+=" "+Y,c=a.getAttribute(R),c||(a.setAttribute(R,a.maxLength),a.removeAttribute("maxLength")),b=a.getAttribute(D),b?a.type="text":"password"===a.type&&L.changeType(a,"text")&&a.setAttribute(D,"password"),!0):!1}function e(a,b){var c,d,e,f,G,k;if(a&&a.getAttribute(A))b(a);else for(e=a?a.getElementsByTagName("input"):u,f=a?a.getElementsByTagName("textarea"):v,c=e?e.length:0,d=f?f.length:0,k=0,G=c+d;G>k;k++)d=c>k?e[k]:f[k-c],b(d)}function g(a){e(a,c)}function h(a){e(a,
f)}function l(a){return function(){k&&a.value===a.getAttribute(A)&&"true"===a.getAttribute(C)?L.moveCaret(a,0):c(a)}}function m(a){return function(){f(a)}}function r(a){return function(b){return F=a.value,"true"===a.getAttribute(C)&&F===a.getAttribute(A)&&L.inArray(I,b.keyCode)?(b.preventDefault&&b.preventDefault(),!1):void 0}}function n(a){return function(){c(a,F);""===a.value&&(a.blur(),L.moveCaret(a,0))}}function p(b){return function(){b===a()&&b.value===b.getAttribute(A)&&"true"===b.getAttribute(C)&&
L.moveCaret(b,0)}}function t(a){return function(){g(a)}}function s(b){b.form&&(q=b.form,"string"==typeof q&&(q=document.getElementById(q)),q.getAttribute(Q)||(L.addEventListener(q,"submit",t(q)),q.setAttribute(Q,"true")));L.addEventListener(b,"focus",l(b));L.addEventListener(b,"blur",m(b));k&&(L.addEventListener(b,"keydown",r(b)),L.addEventListener(b,"keyup",n(b)),L.addEventListener(b,"click",p(b)));b.setAttribute(S,"true");b.setAttribute(A,y);(k||b!==a())&&f(b)}var u,v,k,M,F,x,w,y,B,q,z,N,H,T="text search url tel email password number textarea".split(" "),
I=[27,33,34,35,36,37,38,39,40,8,46],Y="placeholdersjs",Z=RegExp("(?:^|\\s)"+Y+"(?!\\S)"),A="data-placeholder-value",C="data-placeholder-active",D="data-placeholder-type",Q="data-placeholder-submit",S="data-placeholder-bound",R="data-placeholder-maxlength";x=document.createElement("input");var G=document.getElementsByTagName("head")[0];w=document.documentElement;var K=b.Placeholders,L=K.Utils;if(K.nativeSupport=void 0!==x.placeholder,!K.nativeSupport){u=document.getElementsByTagName("input");v=document.getElementsByTagName("textarea");
k="false"===w.getAttribute("data-placeholder-focus");M="false"!==w.getAttribute("data-placeholder-live");x=document.createElement("style");x.type="text/css";w=document.createTextNode("."+Y+" { color:#ccc; }");x.styleSheet?x.styleSheet.cssText=w.nodeValue:x.appendChild(w);G.insertBefore(x,G.firstChild);H=0;for(N=u.length+v.length;N>H;H++)z=u.length>H?u[H]:v[H-u.length],(y=z.attributes.placeholder)&&(y=y.nodeValue,y&&L.inArray(T,z.type)&&s(z));B=setInterval(function(){H=0;for(N=u.length+v.length;N>
H;H++)z=u.length>H?u[H]:v[H-u.length],(y=z.attributes.placeholder)?(y=y.nodeValue,y&&L.inArray(T,z.type)&&(z.getAttribute(S)||s(z),(y!==z.getAttribute(A)||"password"===z.type&&!z.getAttribute(D))&&("password"===z.type&&!z.getAttribute(D)&&L.changeType(z,"text")&&z.setAttribute(D,"password"),z.value===z.getAttribute(A)&&(z.value=y),z.setAttribute(A,y)))):z.getAttribute(C)&&(c(z),z.removeAttribute(A));M||clearInterval(B)},100)}L.addEventListener(b,"beforeunload",function(){K.disable()});K.disable=K.nativeSupport?
d:g;K.enable=K.nativeSupport?d:h})(this);(function(b){var d=b.fn.val,a=b.fn.prop;Placeholders.nativeSupport||(b.fn.val=function(a){var b=d.apply(this,arguments),e=this.eq(0).data("placeholder-value");return void 0===a&&this.eq(0).data("placeholder-active")&&b===e?"":b},b.fn.prop=function(b,d){return void 0===d&&this.eq(0).data("placeholder-active")&&"value"===b?"":a.apply(this,arguments)})})(jQuery);
(function(b){var d={init:function(a){return this.each(function(){this.self=b(this);d.destroy.call(this.self);this.opt=b.extend(!0,{},b.fn.raty.defaults,a);d._adjustCallback.call(this);d._adjustNumber.call(this);d._adjustHints.call(this);this.opt.score=d._adjustedScore.call(this,this.opt.score);"img"!==this.opt.starType&&d._adjustStarType.call(this);d._adjustPath.call(this);d._createStars.call(this);this.opt.cancel&&d._createCancel.call(this);this.opt.precision&&d._adjustPrecision.call(this);d._createScore.call(this);
d._apply.call(this,this.opt.score);d._setTitle.call(this,this.opt.score);d._target.call(this,this.opt.score);this.opt.readOnly?d._lock.call(this):(this.style.cursor="pointer",d._binds.call(this))})},_adjustCallback:function(){for(var a=["number","readOnly","score","scoreName","target"],b=0;b<a.length;b++)"function"===typeof this.opt[a[b]]&&(this.opt[a[b]]=this.opt[a[b]].call(this))},_adjustedScore:function(a){return a?d._between(a,0,this.opt.number):a},_adjustHints:function(){this.opt.hints||(this.opt.hints=
[]);if(this.opt.halfShow||this.opt.half)for(var a=this.opt.precision?10:2,b=0;b<this.opt.number;b++){var d=this.opt.hints[b];"[object Array]"!==Object.prototype.toString.call(d)&&(d=[d]);this.opt.hints[b]=[];for(var e=0;e<a;e++){var g=d[e],h=d[d.length-1];void 0===h&&(h=null);this.opt.hints[b][e]=void 0===g?h:g}}},_adjustNumber:function(){this.opt.number=d._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"";this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-
1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0},_adjustStarType:function(){var a=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var b=0;b<a.length;b++)this.opt[a[b]]=this.opt[a[b]].replace(".","-")},_apply:function(a){d._fill.call(this,a);a&&(0<a&&this.score.val(a),d._roundStars.call(this,a))},_between:function(a,b,d){return Math.min(Math.max(parseFloat(a),b),d)},_binds:function(){this.cancel&&(d._bindOverCancel.call(this),d._bindClickCancel.call(this),
d._bindOutCancel.call(this));d._bindOver.call(this);d._bindClick.call(this);d._bindOut.call(this)},_bindClick:function(){var a=this;a.stars.on("click.raty",function(c){var f=!0,e=a.opt.half||a.opt.precision?a.self.data("score"):this.alt||b(this).data("alt");a.opt.click&&(f=a.opt.click.call(a,+e,c));if(f||void 0===f)a.opt.half&&!a.opt.precision&&(e=d._roundHalfScore.call(a,e)),d._apply.call(a,e)})},_bindClickCancel:function(){var a=this;a.cancel.on("click.raty",function(b){a.score.removeAttr("value");
a.opt.click&&a.opt.click.call(a,null,b)})},_bindOut:function(){var a=this;a.self.on("mouseleave.raty",function(b){var f=+a.score.val()||void 0;d._apply.call(a,f);d._target.call(a,f,b);d._resetTitle.call(a);a.opt.mouseout&&a.opt.mouseout.call(a,f,b)})},_bindOutCancel:function(){var a=this;a.cancel.on("mouseleave.raty",function(b){var f=a.opt.cancelOff;"img"!==a.opt.starType&&(f=a.opt.cancelClass+" "+f);d._setIcon.call(a,this,f);a.opt.mouseout&&(f=+a.score.val()||void 0,a.opt.mouseout.call(a,f,b))})},
_bindOver:function(){var a=this;a.stars.on(a.opt.half?"mousemove.raty":"mouseover.raty",function(b){var f=d._getScoreByPosition.call(a,b,this);d._fill.call(a,f);a.opt.half&&(d._roundStars.call(a,f,b),d._setTitle.call(a,f,b),a.self.data("score",f));d._target.call(a,f,b);a.opt.mouseover&&a.opt.mouseover.call(a,f,b)})},_bindOverCancel:function(){var a=this;a.cancel.on("mouseover.raty",function(b){var f=a.opt.path+a.opt.starOff,e=a.opt.cancelOn;"img"===a.opt.starType?a.stars.attr("src",f):(e=a.opt.cancelClass+
" "+e,a.stars.attr("class",f));d._setIcon.call(a,this,e);d._target.call(a,null,b);a.opt.mouseover&&a.opt.mouseover.call(a,null)})},_buildScoreField:function(){return b("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var a=this.opt.path+this.opt.cancelOff,c=b("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});"img"===this.opt.starType?c.attr({src:a,alt:"x"}):c.attr("data-alt","x").addClass(a);"left"===this.opt.cancelPlace?
this.self.prepend("&#160;").prepend(c):this.self.append("&#160;").append(c);this.cancel=c},_createScore:function(){var a=b(this.opt.targetScore);this.score=a.length?a:d._buildScoreField.call(this)},_createStars:function(){for(var a=1;a<=this.opt.number;a++){var c=d._nameForIndex.call(this,a),c={alt:a,src:this.opt.path+this.opt[c]};"img"!==this.opt.starType&&(c={"data-alt":a,"class":c.src});c.title=d._getHint.call(this,a);b("<"+this.opt.starType+" />",c).appendTo(this);this.opt.space&&this.self.append(a<
this.opt.number?"&#160;":"")}this.stars=this.self.children(this.opt.starType)},_error:function(a){b(this).text(a);b.error(a)},_fill:function(a){for(var b=0,f=1;f<=this.stars.length;f++){var e,g=this.stars[f-1];e=d._turnOn.call(this,f,a);if(this.opt.iconRange&&this.opt.iconRange.length>b){var h=this.opt.iconRange[b];e=d._getRangeIcon.call(this,h,e);f<=h.range&&d._setIcon.call(this,g,e);f===h.range&&b++}else e=this.opt[e?"starOn":"starOff"],d._setIcon.call(this,g,e)}},_getFirstDecimal:function(a){a=
a.toString().split(".")[1];var b=0;a&&(b=parseInt(a.charAt(0),10),"9999"===a.slice(1,5)&&b++);return b},_getRangeIcon:function(a,b){return b?a.on||this.opt.starOn:a.off||this.opt.starOff},_getScoreByPosition:function(a,c){var f=parseInt(c.alt||c.getAttribute("data-alt"),10);if(this.opt.half)var e=d._getWidth.call(this),e=parseFloat((a.pageX-b(c).offset().left)/e),f=f-1+e;return f},_getHint:function(a,b){if(0!==a&&!a)return this.opt.noRatedMsg;var f=d._getFirstDecimal.call(this,a),e=Math.ceil(a),g=
e=this.opt.hints[(e||1)-1],h=!b||this.move;if(this.opt.precision)h&&(f=0===f?9:f-1),g=e[f];else if(this.opt.halfShow||this.opt.half)g=e[h&&0===f?1:5<f?1:0];return""===g?"":g||a},_getWidth:function(){var a=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));a||d._error.call(this,"Could not get the icon width!");return a},_lock:function(){var a=d._getHint.call(this,this.score.val());this.style.cursor="";this.title=a;this.score.prop("readonly",!0);this.stars.prop("title",a);this.cancel&&
this.cancel.hide();this.self.data("readonly",!0)},_nameForIndex:function(a){return this.opt.score&&this.opt.score>=a?"starOn":"starOff"},_resetTitle:function(a){for(a=0;a<this.opt.number;a++)this.stars[a].title=d._getHint.call(this,a+1)},_roundHalfScore:function(a){var b=parseInt(a,10);a=d._getFirstDecimal.call(this,a);0!==a&&(a=5<a?1:.5);return b+a},_roundStars:function(a,b){var f=(a%1).toFixed(2),e;b||this.move?e=.5<f?"starOn":"starHalf":f>this.opt.round.down&&(e="starOn",this.opt.halfShow&&f<this.opt.round.up?
e="starHalf":f<this.opt.round.full&&(e="starOff"));e&&(f=this.opt[e],e=this.stars[Math.ceil(a)-1],d._setIcon.call(this,e,f))},_setIcon:function(a,b){a["img"===this.opt.starType?"src":"className"]=this.opt.path+b},_setTarget:function(a,b){b&&(b=this.opt.targetFormat.toString().replace("{score}",b));a.is(":input")?a.val(b):a.html(b)},_setTitle:function(a,b){if(a){var f=parseInt(Math.ceil(a),10);this.stars[f-1].title=d._getHint.call(this,a,b)}},_target:function(a,c){if(this.opt.target){var f=b(this.opt.target);
f.length||d._error.call(this,"Target selector invalid or missing!");var e=c&&"mouseover"===c.type;if(void 0===a)a=this.opt.targetText;else if(null===a)a=e?this.opt.cancelHint:this.opt.targetText;else{"hint"===this.opt.targetType?a=d._getHint.call(this,a,c):this.opt.precision&&(a=parseFloat(a).toFixed(1));var g=c&&"mousemove"===c.type;e||g||this.opt.targetKeep||(a=this.opt.targetText)}d._setTarget.call(this,f,a)}},_turnOn:function(a,b){return this.opt.single?a===b:a<=b},_unlock:function(){this.style.cursor=
"pointer";this.removeAttribute("title");this.score.removeAttr("readonly");this.self.data("readonly",!1);for(var a=0;a<this.opt.number;a++)this.stars[a].title=d._getHint.call(this,a+1);this.cancel&&this.cancel.css("display","")},cancel:function(a){return this.each(function(){var c=b(this);!0!==c.data("readonly")&&(d[a?"click":"score"].call(c,null),this.score.removeAttr("value"))})},click:function(a){return this.each(function(){!0!==b(this).data("readonly")&&(a=d._adjustedScore.call(this,a),d._apply.call(this,
a),this.opt.click&&this.opt.click.call(this,a,b.Event("click")),d._target.call(this,a))})},destroy:function(){return this.each(function(){var a=b(this),c=a.data("raw");c?a.off(".raty").empty().css({cursor:c.style.cursor}).removeData("readonly"):a.data("raw",a.clone()[0])})},getScore:function(){var a=[],b;this.each(function(){b=this.score.val();a.push(b?+b:void 0)});return 1<a.length?a:a[0]},move:function(a){return this.each(function(){var c=parseInt(a,10),f=d._getFirstDecimal.call(this,a);c>=this.opt.number&&
(c=this.opt.number-1,f=10);var e=d._getWidth.call(this)/10,c=b(this.stars[c]),f=c.offset().left+e*f,f=b.Event("mousemove",{pageX:f});this.move=!0;c.trigger(f);this.move=!1})},readOnly:function(a){return this.each(function(){var c=b(this);c.data("readonly")!==a&&(a?(c.off(".raty").children("img").off(".raty"),d._lock.call(this)):(d._binds.call(this),d._unlock.call(this)),c.data("readonly",a))})},reload:function(){return d.set.call(this,{})},score:function(){var a=b(this);return arguments.length?d.setScore.apply(a,
arguments):d.getScore.call(a)},set:function(a){return this.each(function(){b(this).raty(b.extend({},this.opt,a))})},setScore:function(a){return this.each(function(){!0!==b(this).data("readonly")&&(a=d._adjustedScore.call(this,a),d._apply.call(this,a),d._target.call(this,a))})}};b.fn.raty=function(a){if(d[a])return d[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof a&&a)b.error("Method "+a+" does not exist!");else return d.init.apply(this,arguments)};b.fn.raty.defaults={cancel:!1,
cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:void 0,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,space:!0,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",starType:"img",
target:void 0,targetFormat:"{score}",targetKeep:!1,targetScore:void 0,targetText:"",targetType:"hint"}})(jQuery);$(function(){$.fn.raty.defaults.path="/assets/raty";$(".rating-for").raty({score:function(){return $(this).data("score")},number:function(){return $(this).data("number")},cancel:function(){return $(this).data("cancel")},click:function(b,d){var a=$(this).data("url"),c={};c[$(this).data("name")]=b;var f={};f[$(this).data("model")]=c;$.ajax({type:"PUT",url:a,data:f,dataType:"json"}).done(function(a){})}})});
(function(b){var d=function(a,c){this.options=b.extend({},b.fn.editableform.defaults,c);this.$div=b(a);this.options.scope||(this.options.scope=this)};d.prototype={constructor:d,initInput:function(){this.input=this.options.input;this.value=this.input.str2value(this.options.value);this.input.prerender()},initTemplate:function(){this.$form=b(b.fn.editableform.template)},initButtons:function(){var a=this.$form.find(".editable-buttons");a.append(b.fn.editableform.buttons);"bottom"===this.options.showbuttons&&
a.addClass("editable-buttons-bottom")},render:function(){this.$loading=b(b.fn.editableform.loading);this.$div.empty().append(this.$loading);this.initTemplate();this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove();this.showLoading();this.isSaving=!1;this.$div.triggerHandler("rendering");this.initInput();this.$form.find("div.editable-input").append(this.input.$tpl);this.$div.append(this.$form);b.when(this.input.render()).then(b.proxy(function(){this.options.showbuttons||
this.input.autosubmit();this.$form.find(".editable-cancel").click(b.proxy(this.cancel,this));this.input.error?(this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(a){a.preventDefault()})):(this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled"),this.input.value2input(null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:
this.value),this.$form.submit(b.proxy(this.submit,this)));this.$div.triggerHandler("rendered");this.showForm();this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var a,b;this.$form?(a=this.$form.outerWidth(),b=this.$form.outerHeight(),a&&this.$loading.width(a),b&&this.$loading.height(b),this.$form.hide()):(a=this.$loading.parent().width())&&this.$loading.width(a);this.$loading.show()},showForm:function(a){this.$loading.hide();
this.$form.show();!1!==a&&this.input.activate();this.$div.triggerHandler("show")},error:function(a){var c=this.$form.find(".control-group"),d=this.$form.find(".editable-error-block");if(!1===a)c.removeClass(b.fn.editableform.errorGroupClass),d.removeClass(b.fn.editableform.errorBlockClass).empty().hide();else{if(a){a=(""+a).split("\n");for(var e=0;e<a.length;e++)a[e]=b("<div>").text(a[e]).html();a=a.join("<br>")}c.addClass(b.fn.editableform.errorGroupClass);d.addClass(b.fn.editableform.errorBlockClass).html(a).show()}},
submit:function(a){a.stopPropagation();a.preventDefault();var c=this.input.input2value();a=this.validate(c);if("object"===b.type(a)&&void 0!==a.newValue){if(c=a.newValue,this.input.value2input(c),"string"===typeof a.msg){this.error(a.msg);this.showForm();return}}else if(a){this.error(a);this.showForm();return}if(this.options.savenochange||this.input.value2str(c)!=this.input.value2str(this.value)){var d=this.input.value2submit(c);this.isSaving=!0;b.when(this.save(d)).done(b.proxy(function(a){this.isSaving=
!1;var b="function"===typeof this.options.success?this.options.success.call(this.options.scope,a,c):null;!1===b?(this.error(!1),this.showForm(!1)):"string"===typeof b?(this.error(b),this.showForm()):(b&&"object"===typeof b&&b.hasOwnProperty("newValue")&&(c=b.newValue),this.error(!1),this.value=c,this.$div.triggerHandler("save",{newValue:c,submitValue:d,response:a}))},this)).fail(b.proxy(function(a){this.isSaving=!1;a="function"===typeof this.options.error?this.options.error.call(this.options.scope,
a,c):"string"===typeof a?a:a.responseText||a.statusText||"Unknown error!";this.error(a);this.showForm()},this))}else this.$div.triggerHandler("nochange")},save:function(a){this.options.pk=b.fn.editableutils.tryParseJson(this.options.pk,!0);var c="function"===typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk;if("function"===typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==c&&void 0!==c))return this.showLoading(),
a={name:this.options.name||"",value:a,pk:c},"function"===typeof this.options.params?a=this.options.params.call(this.options.scope,a):(this.options.params=b.fn.editableutils.tryParseJson(this.options.params,!0),b.extend(a,this.options.params)),"function"===typeof this.options.url?this.options.url.call(this.options.scope,a):b.ajax(b.extend({url:this.options.url,data:a,type:"POST"},this.options.ajaxOptions))},validate:function(a){void 0===a&&(a=this.value);if("function"===typeof this.options.validate)return this.options.validate.call(this.options.scope,
a)},option:function(a,b){a in this.options&&(this.options[a]=b);"value"===a&&this.setValue(b)},setValue:function(a,b){this.value=b?this.input.str2value(a):a;this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}};b.fn.editableform=function(a){var c=arguments;return this.each(function(){var f=b(this),e=f.data("editableform"),g="object"===typeof a&&a;e||f.data("editableform",e=new d(this,g));"string"===typeof a&&e[a].apply(e,Array.prototype.slice.call(c,1))})};b.fn.editableform.Constructor=
d;b.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1};b.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>';b.fn.editableform.loading='<div class="editableform-loading"></div>';
b.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>';b.fn.editableform.errorGroupClass=null;b.fn.editableform.errorBlockClass="editable-error";b.fn.editableform.engine="jquery"})(window.jQuery);
(function(b){b.fn.editableutils={inherit:function(b,a){var c=function(){};c.prototype=a.prototype;b.prototype=new c;b.prototype.constructor=b;b.superclass=a.prototype},setCursorPosition:function(b,a){if(b.setSelectionRange)b.setSelectionRange(a,a);else if(b.createTextRange){var c=b.createTextRange();c.collapse(!0);c.moveEnd("character",a);c.moveStart("character",a);c.select()}},tryParseJson:function(b,a){if("string"===typeof b&&b.length&&b.match(/^[\{\[].*[\}\]]$/))if(a)try{b=(new Function("return "+
b))()}catch(c){}finally{}else b=(new Function("return "+b))();return b},sliceObj:function(d,a,c){var f,e,g={};if(!b.isArray(a)||!a.length)return g;for(var h=0;h<a.length;h++)f=a[h],d.hasOwnProperty(f)&&(g[f]=d[f]),!0!==c&&(e=f.toLowerCase(),d.hasOwnProperty(e)&&(g[f]=d[e]));return g},getConfigData:function(d){var a={};b.each(d.data(),function(b,d){if("object"!==typeof d||d&&"object"===typeof d&&(d.constructor===Object||d.constructor===Array))a[b]=d});return a},objectKeys:function(b){if(Object.keys)return Object.keys(b);
if(b!==Object(b))throw new TypeError("Object.keys called on a non-object");var a=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&a.push(c);return a},escape:function(d){return b("<div>").text(d).html()},itemsByValue:function(d,a,c){if(!a||null===d)return[];if("function"!==typeof c){var f=c||"value";c=function(a){return a[f]}}var e=b.isArray(d),g=[],h=this;b.each(a,function(a,f){if(f.children)g=g.concat(h.itemsByValue(d,f.children,c));else if(e)b.grep(d,function(a){return a==(f&&"object"===
typeof f?c(f):f)}).length&&g.push(f);else{var r=f&&"object"===typeof f?c(f):f;d==r&&g.push(f)}});return g},createInput:function(d){var a;a=d.type;"date"===a&&("inline"===d.mode?b.fn.editabletypes.datefield?a="datefield":b.fn.editabletypes.dateuifield&&(a="dateuifield"):b.fn.editabletypes.date?a="date":b.fn.editabletypes.dateui&&(a="dateui"),"date"!==a||b.fn.editabletypes.date||(a="combodate"));"datetime"===a&&"inline"===d.mode&&(a="datetimefield");"wysihtml5"!==a||b.fn.editabletypes[a]||(a="textarea");
if("function"===typeof b.fn.editabletypes[a])return a=b.fn.editabletypes[a],d=this.sliceObj(d,this.objectKeys(a.defaults)),d=new a(d);b.error("Unknown type: "+a);return!1},supportsTransitions:function(){var b=(document.body||document.documentElement).style,a="transition",c=["Moz","Webkit","Khtml","O","ms"];if("string"===typeof b[a])return!0;for(var a=a.charAt(0).toUpperCase()+a.substr(1),f=0;f<c.length;f++)if("string"===typeof b[c[f]+a])return!0;return!1}}})(window.jQuery);
(function(b){var d=function(a,b){this.init(a,b)},a=function(a,b){this.init(a,b)};d.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(a,f){this.$element=b(a);this.options=b.extend({},b.fn.editableContainer.defaults,f);this.splitOptions();this.formOptions.scope=this.$element[0];this.initContainer();this.delayedHide=!1;this.$element.on("destroyed",b.proxy(function(){this.destroy()},this));b(document).data("editable-handlers-attached")||
(b(document).on("keyup.editable",function(a){27===a.which&&b(".editable-open").editableContainer("hide")}),b(document).on("click.editable",function(a){var c=b(a.target),f,l=".editable-container .ui-datepicker-header .datepicker .modal-backdrop .bootstrap-wysihtml5-insert-image-modal .bootstrap-wysihtml5-insert-link-modal".split(" ");if(b.contains(document.documentElement,a.target)&&!c.is(document)){for(f=0;f<l.length;f++)if(c.is(l[f])||c.parents(l[f]).length)return;d.prototype.closeOthers(a.target)}}),
b(document).data("editable-handlers-attached",!0))},splitOptions:function(){this.containerOptions={};this.formOptions={};if(!b.fn[this.containerName])throw Error(this.containerName+" not found. Have you included corresponding js file?");for(var a in this.options)a in this.defaults?this.containerOptions[a]=this.options[a]:this.formOptions[a]=this.options[a]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var a;return this.containerDataName&&(a=this.$element.data(this.containerDataName))?
a:a=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:b.proxy(this.save,this),nochange:b.proxy(function(){this.hide("nochange")},this),cancel:b.proxy(function(){this.hide("cancel")},this),show:b.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},
this),rendering:b.proxy(this.setPosition,this),resize:b.proxy(this.setPosition,this),rendered:b.proxy(function(){this.$element.triggerHandler("shown",b(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(a){this.$element.addClass("editable-open");!1!==a&&this.closeOthers(this.$element[0]);this.innerShow();this.tip().addClass(this.containerClass);this.$form=b("<div>");this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form);
this.renderForm()},hide:function(a){this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")&&(this.$form.data("editableform").isSaving?this.delayedHide={reason:a}:(this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",a||"manual")))},innerShow:function(){},innerHide:function(){},toggle:function(a){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(a)},setPosition:function(){},save:function(a,
b){this.$element.triggerHandler("save",b);this.hide("save")},option:function(a,b){this.options[a]=b;a in this.containerOptions?(this.containerOptions[a]=b,this.setContainerOption(a,b)):(this.formOptions[a]=b,this.$form&&this.$form.editableform("option",a,b))},setContainerOption:function(a,b){this.call("option",a,b)},destroy:function(){this.hide();this.innerDestroy();this.$element.off("destroyed");this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(a){b(".editable-open").each(function(d,
e){if(e!==a&&!b(e).find(a).length){var g=b(e),h=g.data("editableContainer");h&&("cancel"===h.options.onblur?g.data("editableContainer").hide("onblur"):"submit"===h.options.onblur&&g.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}};b.fn.editableContainer=function(c){var f=arguments;return this.each(function(){var e=b(this),g=e.data("editableContainer"),h="object"===typeof c&&
c,l="inline"===h.mode?a:d;g||e.data("editableContainer",g=new l(this,h));"string"===typeof c&&g[c].apply(g,Array.prototype.slice.call(f,1))})};b.fn.editableContainer.Popup=d;b.fn.editableContainer.Inline=a;b.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"};jQuery.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}})(window.jQuery);
(function(b){b.extend(b.fn.editableContainer.Inline.prototype,b.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=b("<span></span>");this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={};this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide();this.tip().insertAfter(this.$element).show()},
innerHide:function(){this.$tip.hide(this.options.anim,b.proxy(function(){this.$element.show();this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})})(window.jQuery);
(function(b){var d=function(a,c){this.$element=b(a);this.options=b.extend({},b.fn.editable.defaults,c,b.fn.editableutils.getConfigData(this.$element));this.options.selector?this.initLive():this.init();this.options.highlight&&!b.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};d.prototype={constructor:d,init:function(){var a=!1;this.options.name=this.options.name||this.$element.attr("id");this.options.scope=this.$element[0];if(this.input=b.fn.editableutils.createInput(this.options)){void 0===
this.options.value||null===this.options.value?(this.value=this.input.html2value(b.trim(this.$element.html())),a=!0):(this.options.value=b.fn.editableutils.tryParseJson(this.options.value,!0),this.value="string"===typeof this.options.value?this.input.str2value(this.options.value):this.options.value);this.$element.addClass("editable");"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped");"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+
".editable",b.proxy(function(a){this.options.disabled||a.preventDefault();"mouseenter"===this.options.toggle?this.show():this.toggle("click"!==this.options.toggle)},this))):this.$element.attr("tabindex",-1);"function"===typeof this.options.display&&(this.options.autotext="always");switch(this.options.autotext){case "always":a=!0;break;case "auto":a=!b.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!a;break;default:a=!1}b.when(a?this.render():!0).then(b.proxy(function(){this.options.disabled?
this.disable():this.enable();this.$element.triggerHandler("init",this)},this))}},initLive:function(){var a=this.options.selector;this.options.selector=!1;this.options.autotext="never";this.$element.on(this.options.toggle+".editable",a,b.proxy(function(a){var d=b(a.target);d.data("editable")||(d.hasClass(this.options.emptyclass)&&d.empty(),d.editable(this.options).trigger(a))},this))},render:function(a){if(!1!==this.options.display)return this.input.value2htmlFinal?this.input.value2html(this.value,
this.$element[0],this.options.display,a):"function"===typeof this.options.display?this.options.display.call(this.$element[0],this.value,a):this.input.value2html(this.value,this.$element[0])},enable:function(){this.options.disabled=!1;this.$element.removeClass("editable-disabled");this.handleEmpty(this.isEmpty);"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0;this.hide();this.$element.addClass("editable-disabled");
this.handleEmpty(this.isEmpty);this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(a,c){if(a&&"object"===typeof a)b.each(a,b.proxy(function(a,c){this.option(b.trim(a),c)},this));else{this.options[a]=c;if("disabled"===a)return c?this.disable():this.enable();"value"===a&&this.setValue(c);this.container&&this.container.option(a,c);this.input.option&&this.input.option(a,c)}},handleEmpty:function(a){!1!==this.options.display&&
((this.isEmpty=void 0!==a?a:"function"===typeof this.input.isEmpty?this.input.isEmpty(this.$element):""===b.trim(this.$element.html()),this.options.disabled)?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(a){if(!this.options.disabled){if(!this.container){var c=
b.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(c);this.$element.on("save.internal",b.proxy(this.save,this));this.container=this.$element.data("editableContainer")}else if(this.container.tip().is(":visible"))return;this.container.show(a)}},hide:function(){this.container&&this.container.hide()},toggle:function(a){this.container&&this.container.tip().is(":visible")?this.hide():this.show(a)},save:function(a,b){if(this.options.unsavedclass){var d;(d=(d=(d=
(d="function"===typeof this.options.url)||!1===this.options.display)||void 0!==b.response)||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(b.newValue))?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var e=this.$element,g=e.css("background-color");e.css("background-color",this.options.highlight);setTimeout(function(){"transparent"===g&&(g="");e.css("background-color",g);e.addClass("editable-bg-transition");
setTimeout(function(){e.removeClass("editable-bg-transition")},1700)},10)}this.setValue(b.newValue,!1,b.response)},validate:function(){if("function"===typeof this.options.validate)return this.options.validate.call(this,this.value)},setValue:function(a,c,d){this.value=c?this.input.str2value(a):a;this.container&&this.container.option("value",this.value);b.when(this.render(d)).then(b.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable();
this.container&&this.container.destroy();this.input.destroy();"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable"));this.$element.off("save.internal");this.$element.removeClass("editable editable-open editable-disabled");this.$element.removeData("editable")}};b.fn.editable=function(a){var c={},f=arguments;switch(a){case "validate":return this.each(function(){var a=b(this).data("editable"),d;a&&(d=a.validate())&&(c[a.options.name]=
d)}),c;case "getValue":return 2===arguments.length&&!0===arguments[1]?c=this.eq(0).data("editable").value:this.each(function(){var a=b(this).data("editable");a&&void 0!==a.value&&null!==a.value&&(c[a.options.name]=a.input.value2submit(a.value))}),c;case "submit":var e=arguments[1]||{},g=this,h=this.editable("validate");if(b.isEmptyObject(h)){var l={};1===g.length?(h=g.data("editable"),l={name:h.options.name||"",value:h.input.value2submit(h.value),pk:"function"===typeof h.options.pk?h.options.pk.call(h.options.scope):
h.options.pk},"function"===typeof h.options.params?l=h.options.params.call(h.options.scope,l):(h.options.params=b.fn.editableutils.tryParseJson(h.options.params,!0),b.extend(l,h.options.params)),l={url:h.options.url,data:l,type:"POST"},e.success=e.success||h.options.success,e.error=e.error||h.options.error):(h=this.editable("getValue"),l={url:e.url,data:h,type:"POST"});l.success="function"===typeof e.success?function(a){e.success.call(g,a,e)}:b.noop;l.error="function"===typeof e.error?function(){e.error.apply(g,
arguments)}:b.noop;e.ajaxOptions&&b.extend(l,e.ajaxOptions);e.data&&b.extend(l.data,e.data);b.ajax(l)}else"function"===typeof e.error&&e.error.call(g,h);return this}return this.each(function(){var c=b(this),e=c.data("editable"),g="object"===typeof a&&a;g&&g.selector?new d(this,g):(e||c.data("editable",e=new d(this,g)),"string"===typeof a&&e[a].apply(e,Array.prototype.slice.call(f,1)))})};b.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,
emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}})(window.jQuery);
(function(b){b.fn.editabletypes={};var d=function(){};d.prototype={init:function(a,c,d){this.type=a;this.options=b.extend({},d,c)},prerender:function(){this.$input=this.$tpl=b(this.options.tpl);this.error=this.$clear=null},render:function(){},value2html:function(a,c){b(c)[this.options.escape?"text":"html"](b.trim(a))},html2value:function(a){return b("<div>").html(a).text()},value2str:function(a){return a},str2value:function(a){return a},value2submit:function(a){return a},value2input:function(a){this.$input.val(a)},
input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(a){return b("<div>").text(a).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(a){void 0!==this.options[a]&&null!==this.options[a]&&this.$input.attr(a,this.options[a])},option:function(a,b){this.options[a]=b}};d.defaults=
{tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0};b.extend(b.fn.editabletypes,{abstractinput:d})})(window.jQuery);
(function(b){var d=function(a){};b.fn.editableutils.inherit(d,b.fn.editabletypes.abstractinput);b.extend(d.prototype,{render:function(){var a=b.Deferred();this.error=null;this.onSourceReady(function(){this.renderList();a.resolve()},function(){this.error=this.options.sourceError;a.resolve()});return a.promise()},html2value:function(a){return null},value2html:function(a,c,d,e){var g=b.Deferred(),h=function(){"function"===typeof d?d.call(c,a,this.sourceData,e):this.value2htmlFinal(a,c);g.resolve()};
if(null===a)h.call(this);else this.onSourceReady(h,function(){g.resolve()});return g.promise()},onSourceReady:function(a,c){var d;b.isFunction(this.options.source)?(d=this.options.source.call(this.options.scope),this.sourceData=null):d=this.options.source;if(this.options.sourceCache&&b.isArray(this.sourceData))a.call(this);else{try{d=b.fn.editableutils.tryParseJson(d,!1)}catch(e){c.call(this);return}if("string"===typeof d){if(this.options.sourceCache){var g=d,h;b(document).data(g)||b(document).data(g,
{});h=b(document).data(g);if(!1===h.loading&&h.sourceData){this.sourceData=h.sourceData;this.doPrepend();a.call(this);return}if(!0===h.loading){h.callbacks.push(b.proxy(function(){this.sourceData=h.sourceData;this.doPrepend();a.call(this)},this));h.err_callbacks.push(b.proxy(c,this));return}h.loading=!0;h.callbacks=[];h.err_callbacks=[]}d=b.extend({url:d,type:"get",cache:!1,dataType:"json",success:b.proxy(function(d){h&&(h.loading=!1);this.sourceData=this.makeArray(d);b.isArray(this.sourceData)?(h&&
(h.sourceData=this.sourceData,b.each(h.callbacks,function(){this.call()})),this.doPrepend(),a.call(this)):(c.call(this),h&&b.each(h.err_callbacks,function(){this.call()}))},this),error:b.proxy(function(){c.call(this);h&&(h.loading=!1,b.each(h.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);b.ajax(d)}else this.sourceData=this.makeArray(d),b.isArray(this.sourceData)?(this.doPrepend(),a.call(this)):c.call(this)}},doPrepend:function(){null!==this.options.prepend&&void 0!==
this.options.prepend&&(b.isArray(this.prependData)||(b.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=b.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"===typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),b.isArray(this.prependData)&&b.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},
value2htmlFinal:function(a,b){},makeArray:function(a){var c,d,e=[],g,h;if(!a||"string"===typeof a)return null;if(b.isArray(a)){h=function(a,b){d={value:a,text:b};if(2<=c++)return!1};for(var l=0;l<a.length;l++)g=a[l],"object"===typeof g?(c=0,b.each(g,h),1===c?e.push(d):1<c&&(g.children&&(g.children=this.makeArray(g.children)),e.push(g))):e.push({value:g,text:g})}else b.each(a,function(a,b){e.push({value:a,text:b})});return e},option:function(a,b){this.options[a]=b;"source"===a&&(this.sourceData=null);
"prepend"===a&&(this.prependData=null)}});d.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null});b.fn.editabletypes.list=d})(window.jQuery);
(function(b){var d=function(a){this.init("text",a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.abstractinput);b.extend(d.prototype,{render:function(){this.renderClear();this.setClass();this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),b.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=b('<span class="editable-clear-x"></span>'),
this.$input.after(this.$clear).css("padding-right",24).keyup(b.proxy(function(a){if(!~b.inArray(a.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var c=this;this.t=setTimeout(function(){c.toggleClear(a)},100)}},this)).parent().css("position","relative"),this.$clear.click(b.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(a){if(this.$clear){a=this.$input.val().length;var b=this.$clear.is(":visible");a&&!b&&this.$clear.show();!a&&b&&this.$clear.hide()}},clear:function(){this.$clear.hide();
this.$input.val("").focus()}});d.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0});b.fn.editabletypes.text=d})(window.jQuery);
(function(b){var d=function(a){this.init("textarea",a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.abstractinput);b.extend(d.prototype,{render:function(){this.setClass();this.setAttr("placeholder");this.setAttr("rows");this.$input.keydown(function(a){a.ctrlKey&&13===a.which&&b(this).closest("form").submit()})},activate:function(){b.fn.editabletypes.text.prototype.activate.call(this)}});d.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",
placeholder:null,rows:7});b.fn.editabletypes.textarea=d})(window.jQuery);
(function(b){var d=function(a){this.init("select",a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.list);b.extend(d.prototype,{renderList:function(){this.$input.empty();var a=function(c,d){var e;if(b.isArray(d))for(var g=0;g<d.length;g++)e={},d[g].children?(e.label=d[g].text,c.append(a(b("<optgroup>",e),d[g].children))):(e.value=d[g].value,d[g].disabled&&(e.disabled=!0),c.append(b("<option>",e).text(d[g].text)));return c};a(this.$input,this.sourceData);this.setClass();this.$input.on("keydown.editable",
function(a){13===a.which&&b(this).closest("form").submit()})},value2htmlFinal:function(a,c){var d="",e=b.fn.editableutils.itemsByValue(a,this.sourceData);e.length&&(d=e[0].text);b.fn.editabletypes.abstractinput.prototype.value2html.call(this,d,c)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){b(this).closest("form").submit()})}});d.defaults=b.extend({},b.fn.editabletypes.list.defaults,{tpl:"<select></select>"});b.fn.editabletypes.select=d})(window.jQuery);
(function(b){var d=function(a){this.init("checklist",a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.list);b.extend(d.prototype,{renderList:function(){var a;this.$tpl.empty();if(b.isArray(this.sourceData)){for(var c=0;c<this.sourceData.length;c++)a=b("<label>").append(b("<input>",{type:"checkbox",value:this.sourceData[c].value})).append(b("<span>").text(" "+this.sourceData[c].text)),b("<div>").append(a).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]');this.setClass()}},
value2str:function(a){return b.isArray(a)?a.sort().join(b.trim(this.options.separator)):""},str2value:function(a){var c;c=null;"string"===typeof a&&a.length?(c=new RegExp("\\s*"+b.trim(this.options.separator)+"\\s*"),c=a.split(c)):c=b.isArray(a)?a:[a];return c},value2input:function(a){this.$input.prop("checked",!1);b.isArray(a)&&a.length&&this.$input.each(function(c,d){var e=b(d);b.each(a,function(a,b){e.val()==b&&e.prop("checked",!0)})})},input2value:function(){var a=[];this.$input.filter(":checked").each(function(c,
d){a.push(b(d).val())});return a},value2htmlFinal:function(a,c){var d=[],e=b.fn.editableutils.itemsByValue(a,this.sourceData),g=this.options.escape;e.length?(b.each(e,function(a,c){var e=g?b.fn.editableutils.escape(c.text):c.text;d.push(e)}),b(c).html(d.join("<br>"))):b(c).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(a){13===a.which&&b(this).closest("form").submit()})}});d.defaults=b.extend({},b.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',
inputclass:null,separator:","});b.fn.editabletypes.checklist=d})(window.jQuery);(function(b){var d=function(a){this.init("password",a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.text);b.extend(d.prototype,{value2html:function(a,c){a?b(c).text("[hidden]"):b(c).empty()},html2value:function(a){return null}});d.defaults=b.extend({},b.fn.editabletypes.text.defaults,{tpl:'<input type="password">'});b.fn.editabletypes.password=d})(window.jQuery);
(function(b){var d=function(a){this.init("email",a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.text);d.defaults=b.extend({},b.fn.editabletypes.text.defaults,{tpl:'<input type="email">'});b.fn.editabletypes.email=d})(window.jQuery);(function(b){var d=function(a){this.init("url",a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.text);d.defaults=b.extend({},b.fn.editabletypes.text.defaults,{tpl:'<input type="url">'});b.fn.editabletypes.url=d})(window.jQuery);
(function(b){var d=function(a){this.init("tel",a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.text);d.defaults=b.extend({},b.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'});b.fn.editabletypes.tel=d})(window.jQuery);
(function(b){var d=function(a){this.init("number",a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.text);b.extend(d.prototype,{render:function(){d.superclass.render.call(this);this.setAttr("min");this.setAttr("max");this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}});d.defaults=b.extend({},b.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null});b.fn.editabletypes.number=d})(window.jQuery);
(function(b){var d=function(a){this.init("range",a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.number);b.extend(d.prototype,{render:function(){this.$input=this.$tpl.filter("input");this.setClass();this.setAttr("min");this.setAttr("max");this.setAttr("step");this.$input.on("input",function(){b(this).siblings("output").text(b(this).val())})},activate:function(){this.$input.focus()}});d.defaults=b.extend({},b.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',
inputclass:"input-medium"});b.fn.editabletypes.range=d})(window.jQuery);(function(b){var d=function(a){this.init("time",a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.abstractinput);b.extend(d.prototype,{render:function(){this.setClass()}});d.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'});b.fn.editabletypes.time=d})(window.jQuery);
(function(b){var d=function(a){this.init("select2",a,d.defaults);a.select2=a.select2||{};this.sourceData=null;a.placeholder&&(a.select2.placeholder=a.placeholder);if(!a.select2.tags&&a.source){var c=a.source;b.isFunction(a.source)&&(c=a.source.call(a.scope));"string"===typeof c?(a.select2.ajax=a.select2.ajax||{},a.select2.ajax.data||(a.select2.ajax.data=function(a){return{query:a}}),a.select2.ajax.results||(a.select2.ajax.results=function(a){return{results:a}}),a.select2.ajax.url=c):(this.sourceData=
this.convertSource(c),a.select2.data=this.sourceData)}this.options.select2=b.extend({},d.defaults.select2,a.select2);this.isMultiple=this.options.select2.tags||this.options.select2.multiple;this.isRemote="ajax"in this.options.select2;this.idFunc=this.options.select2.id;if("function"!==typeof this.idFunc){var f=this.idFunc||"id";this.idFunc=function(a){return a[f]}}this.formatSelection=this.options.select2.formatSelection;"function"!==typeof this.formatSelection&&(this.formatSelection=function(a){return a.text})};
b.fn.editableutils.inherit(d,b.fn.editabletypes.abstractinput);b.extend(d.prototype,{render:function(){this.setClass();if(this.isRemote)this.$input.on("select2-loaded",b.proxy(function(a){this.sourceData=a.items.results},this));if(this.isMultiple)this.$input.on("change",function(){b(this).closest("form").parent().triggerHandler("resize")})},value2html:function(a,c){var f="",e,g=this;this.options.select2.tags?e=a:this.sourceData&&(e=b.fn.editableutils.itemsByValue(a,this.sourceData,this.idFunc));b.isArray(e)?
(f=[],b.each(e,function(a,b){f.push(b&&"object"===typeof b?g.formatSelection(b):b)})):e&&(f=g.formatSelection(e));f=b.isArray(f)?f.join(this.options.viewseparator):f;d.superclass.value2html.call(this,f,c)},html2value:function(a){return this.options.select2.tags?this.str2value(a,this.options.viewseparator):null},value2input:function(a){b.isArray(a)&&(a=a.join(this.getSeparator()));this.$input.data("select2")?this.$input.val(a).trigger("change",!0):(this.$input.val(a),this.$input.select2(this.options.select2));
if(this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var c=this.options.select2.formatSelection;this.options.select2.id||c||(c=b(this.options.scope),c.data("editable").isEmpty||(a={id:a,text:c.text()},this.$input.select2("data",a)))}},input2value:function(){return this.$input.select2("val")},str2value:function(a,c){if("string"!==typeof a||!this.isMultiple)return a;c=c||this.getSeparator();var d,e,g;if(null===a||1>a.length)return null;d=a.split(c);e=0;for(g=d.length;e<g;e+=1)d[e]=
b.trim(d[e]);return d},autosubmit:function(){this.$input.on("change",function(a,c){c||b(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||b.fn.select2.defaults.separator},convertSource:function(a){if(b.isArray(a)&&a.length&&void 0!==a[0].value)for(var c=0;c<a.length;c++)void 0!==a[c].value&&(a[c].id=a[c].value,delete a[c].value);return a},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}});d.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,
{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "});b.fn.editabletypes.select2=d})(window.jQuery);
(function(b){var d=function(a,c){this.$element=b(a);this.$element.is("input")?(this.options=b.extend({},b.fn.combodate.defaults,c,this.$element.data()),this.init()):b.error("Combodate should be applied to INPUT element")};d.prototype={constructor:d,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]};this.$widget=b('<span class="combodate"></span>').html(this.getTemplate());this.initCombos();
this.$widget.on("change","select",b.proxy(function(a){this.$element.val(this.getValue()).change();this.options.smartDays&&(b(a.target).is(".month")||b(a.target).is(".year"))&&this.fillCombo("day")},this));this.$widget.find("select").css("width","auto");this.$element.hide().after(this.$widget);this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var a=this.options.template;b.each(this.map,function(b,d){d=d[0];var e=new RegExp(d+"+"),g=1<d.length?d.substring(1,2):d;a=a.replace(e,
"{"+g+"}")});a=a.replace(/ /g,"&nbsp;");b.each(this.map,function(b,d){d=d[0];var e=1<d.length?d.substring(1,2):d;a=a.replace("{"+e+"}",'<select class="'+b+'"></select>')});return a},initCombos:function(){for(var a in this.map){var b=this.$widget.find("."+a);this["$"+a]=b.length?b:null;this.fillCombo(a)}},fillCombo:function(a){var b=this["$"+a];if(b){a=this["fill"+a.charAt(0).toUpperCase()+a.slice(1)]();var d=b.val();b.empty();for(var e=0;e<a.length;e++)b.append('<option value="'+a[e][0]+'">'+a[e][1]+
"</option>");b.val(d)}},fillCommon:function(a){var b=[],d;"name"===this.options.firstItem?(d=moment.relativeTime||moment.langData()._relativeTime,a="function"===typeof d[a]?d[a](1,!0,a,!1):d[a],a=a.split(" ").reverse()[0],b.push(["",a])):"empty"===this.options.firstItem&&b.push(["",""]);return b},fillDay:function(){var a=this.fillCommon("d"),b,d,e=-1!==this.options.template.indexOf("DD"),g=31;this.options.smartDays&&this.$month&&this.$year&&(b=parseInt(this.$month.val(),10),d=parseInt(this.$year.val(),
10),isNaN(b)||isNaN(d)||(g=moment([d,b]).daysInMonth()));for(d=1;d<=g;d++)b=e?this.leadZero(d):d,a.push([d,b]);return a},fillMonth:function(){var a=this.fillCommon("M"),b,d,e=-1!==this.options.template.indexOf("MMMM"),g=-1!==this.options.template.indexOf("MMM"),h=-1!==this.options.template.indexOf("MM");for(d=0;11>=d;d++)b=e?moment().date(1).month(d).format("MMMM"):g?moment().date(1).month(d).format("MMM"):h?this.leadZero(d+1):d+1,a.push([d,b]);return a},fillYear:function(){var a=[],b,d,e=-1!==this.options.template.indexOf("YYYY");
for(d=this.options.maxYear;d>=this.options.minYear;d--)b=e?d:(d+"").substring(2),a[this.options.yearDescending?"push":"unshift"]([d,b]);return a=this.fillCommon("y").concat(a)},fillHour:function(){var a=this.fillCommon("h"),b,d;b=-1!==this.options.template.indexOf("h");this.options.template.indexOf("H");var e=-1!==this.options.template.toLowerCase().indexOf("hh"),g=b?12:23;for(d=b?1:0;d<=g;d++)b=e?this.leadZero(d):d,a.push([d,b]);return a},fillMinute:function(){var a=this.fillCommon("m"),b,d,e=-1!==
this.options.template.indexOf("mm");for(d=0;59>=d;d+=this.options.minuteStep)b=e?this.leadZero(d):d,a.push([d,b]);return a},fillSecond:function(){var a=this.fillCommon("s"),b,d,e=-1!==this.options.template.indexOf("ss");for(d=0;59>=d;d+=this.options.secondStep)b=e?this.leadZero(d):d,a.push([d,b]);return a},fillAmpm:function(){var a=-1!==this.options.template.indexOf("a");this.options.template.indexOf("A");return[["am",a?"am":"AM"],["pm",a?"pm":"PM"]]},getValue:function(a){var c,d={},e=this,g=!1;b.each(this.map,
function(a,b){if("ampm"!==a){var c="day"===a?1:0;d[a]=e["$"+a]?parseInt(e["$"+a].val(),10):c;if(isNaN(d[a]))return g=!0,!1}});if(g)return"";this.$ampm&&(d.hour=12===d.hour?"am"===this.$ampm.val()?0:12:"am"===this.$ampm.val()?d.hour:d.hour+12);c=moment([d.year,d.month,d.day,d.hour,d.minute,d.second]);this.highlight(c);a=void 0===a?this.options.format:a;return null===a?c.isValid()?c:null:c.isValid()?c.format(a):""},setValue:function(a){function c(a,c){var d={};a.children("option").each(function(a,e){var f=
b(e).attr("value"),g;""!==f&&(g=Math.abs(f-c),"undefined"===typeof d.distance||g<d.distance)&&(d={value:f,distance:g})});return d.value}if(a){var d="string"===typeof a?moment(a,this.options.format):moment(a),e=this,g={};d.isValid()&&(b.each(this.map,function(a,b){"ampm"!==a&&(g[a]=d[b[1]]())}),this.$ampm&&(12<=g.hour?(g.ampm="pm",12<g.hour&&(g.hour-=12)):(g.ampm="am",0===g.hour&&(g.hour=12))),b.each(g,function(a,b){e["$"+a]&&("minute"===a&&1<e.options.minuteStep&&e.options.roundTime&&(b=c(e["$"+a],
b)),"second"===a&&1<e.options.secondStep&&e.options.roundTime&&(b=c(e["$"+a],b)),e["$"+a].val(b))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(d.format(this.options.format)).change())}},highlight:function(a){a.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),
this.$widget.find("select").css("border-color","red"))},leadZero:function(a){return 9>=a?"0"+a:a},destroy:function(){this.$widget.remove();this.$element.removeData("combodate").show()}};b.fn.combodate=function(a){var c,f=Array.apply(null,arguments);f.shift();return"getValue"===a&&this.length&&(c=this.eq(0).data("combodate"))?c.getValue.apply(c,f):this.each(function(){var c=b(this),g=c.data("combodate"),h="object"==typeof a&&a;g||c.data("combodate",g=new d(this,h));"string"==typeof a&&"function"==
typeof g[a]&&g[a].apply(g,f)})};b.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}})(window.jQuery);
(function(b){var d=function(a){this.init("combodate",a,d.defaults);this.options.viewformat||(this.options.viewformat=this.options.format);a.combodate=b.fn.editableutils.tryParseJson(a.combodate,!0);this.options.combodate=b.extend({},d.defaults.combodate,a.combodate,{format:this.options.format,template:this.options.template})};b.fn.editableutils.inherit(d,b.fn.editabletypes.abstractinput);b.extend(d.prototype,{render:function(){this.$input.combodate(this.options.combodate);"bs3"===b.fn.editableform.engine&&
this.$input.siblings().find("select").addClass("form-control");this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(a,b){var f=a?a.format(this.options.viewformat):"";d.superclass.value2html.call(this,f,b)},html2value:function(a){return a?moment(a,this.options.viewformat):null},value2str:function(a){return a?a.format(this.options.format):""},str2value:function(a){return a?moment(a,this.options.format):null},value2submit:function(a){return this.value2str(a)},
value2input:function(a){this.$input.combodate("setValue",a)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}});d.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null});b.fn.editabletypes.combodate=d})(window.jQuery);
(function(b){var d=b.fn.editableform.Constructor.prototype.initInput;b.extend(b.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=b(b.fn.editableform.template);this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){d.apply(this);var a=null===this.input.options.inputclass||!1===this.input.options.inputclass;~b.inArray(this.input.type,"text select textarea password email url tel number range time".split(" "))&&a&&(this.input.options.inputclass=
"input-medium",this.input.$input.addClass("input-medium"))}});b.fn.editableform.buttons='<button type="submit" class="btn btn-primary editable-submit"><i class="icon-ok icon-white"></i></button><button type="button" class="btn editable-cancel"><i class="icon-remove"></i></button>';b.fn.editableform.errorGroupClass="error";b.fn.editableform.errorBlockClass=null;b.fn.editableform.engine="bs2"})(window.jQuery);
(function(b){b.extend(b.fn.editableContainer.Popup.prototype,{containerName:"popover",innerCss:b.fn.popover&&b(b.fn.popover.defaults.template).find("p").length?".popover-content p":".popover-content",defaults:b.fn.popover.defaults,initContainer:function(){b.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var d;this.$element.data("template")&&(d=this.$element.data("template"),this.$element.removeData("template"));this.call(this.containerOptions);
d&&this.$element.data("template",d)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(b,a){this.container().options[b]=a},setPosition:function(){(function(){var d=this.tip(),a,c,f,e,g,h,l,m;g="function"===typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement;a=/in/.test(g);d.removeClass("top right bottom left").css({top:0,left:0,display:"block"});
c=this.getPosition(a);f=d[0].offsetWidth;e=d[0].offsetHeight;g=a?g.split(" ")[1]:g;l={top:c.top+c.height,left:c.left+c.width/2-f/2};a={top:c.top-e,left:c.left+c.width/2-f/2};m={top:c.top+c.height/2-e/2,left:c.left-f};c={top:c.top+c.height/2-e/2,left:c.left+c.width};switch(g){case "bottom":l.top+e>b(window).scrollTop()+b(window).height()&&(g=a.top>b(window).scrollTop()?"top":c.left+f<b(window).scrollLeft()+b(window).width()?"right":m.left>b(window).scrollLeft()?"left":"right");break;case "top":a.top<
b(window).scrollTop()&&(g=l.top+e<b(window).scrollTop()+b(window).height()?"bottom":c.left+f<b(window).scrollLeft()+b(window).width()?"right":m.left>b(window).scrollLeft()?"left":"right");break;case "left":m.left<b(window).scrollLeft()&&(g=c.left+f<b(window).scrollLeft()+b(window).width()?"right":a.top>b(window).scrollTop()?"top":a.top>b(window).scrollTop()?"bottom":"right");break;case "right":c.left+f>b(window).scrollLeft()+b(window).width()&&(m.left>b(window).scrollLeft()?g="left":a.top>b(window).scrollTop()?
g="top":a.top>b(window).scrollTop()&&(g="bottom"))}switch(g){case "bottom":h=l;break;case "top":h=a;break;case "left":h=m;break;case "right":h=c}d.offset(h).addClass(g).addClass("in")}).call(this.container())}})})(window.jQuery);
(function(b){function d(){return new Date(Date.UTC.apply(Date,arguments))}function a(a,c){var d=b(a).data(),e={},f,k=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var g in d)c.test(g)&&(f=g.replace(k,function(a,b){return b.toLowerCase()}),e[f]=d[g]);return e}function c(a){var c={};if(!r[a]&&(a=a.split("-")[0],!r[a]))return;var d=r[a];b.each(m,function(a,b){b in d&&(c[b]=d[b])});return c}var f=function(a,c){this._process_options(c);this.element=b(a);this.isInline=
!1;this.isInput=this.element.is("input");this.hasInput=(this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1)&&this.element.find("input").length;this.component&&0===this.component.length&&(this.component=!1);this.picker=b(n.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right"));
this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1});this._allow_update=!1;this.setStartDate(this.o.startDate);this.setEndDate(this.o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()};f.prototype={constructor:f,_process_options:function(a){this._o=b.extend({},this._o,a);a=this.o=b.extend({},
this._o);var c=a.language;r[c]||(c=c.split("-")[0],r[c]||(c=l.language));a.language=c;switch(a.startView){case 2:case "decade":a.startView=2;break;case 1:case "year":a.startView=1;break;default:a.startView=0}switch(a.minViewMode){case 1:case "months":a.minViewMode=1;break;case 2:case "years":a.minViewMode=2;break;default:a.minViewMode=0}a.startView=Math.max(a.startView,a.minViewMode);a.weekStart%=7;a.weekEnd=(a.weekStart+6)%7;c=n.parseFormat(a.format);-Infinity!==a.startDate&&(a.startDate=n.parseDate(a.startDate,
c,a.language));Infinity!==a.endDate&&(a.endDate=n.parseDate(a.endDate,c,a.language));a.daysOfWeekDisabled=a.daysOfWeekDisabled||[];b.isArray(a.daysOfWeekDisabled)||(a.daysOfWeekDisabled=a.daysOfWeekDisabled.split(/[,\s]*/));a.daysOfWeekDisabled=b.map(a.daysOfWeekDisabled,function(a){return parseInt(a,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var b=0,c,d;b<a.length;b++)c=a[b][0],d=a[b][1],c.on(d)},_unapplyEvents:function(a){for(var b=0,c,d;b<a.length;b++)c=a[b][0],d=a[b][1],
c.off(d)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:b.proxy(this.show,this),keyup:b.proxy(this.update,this),keydown:b.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:b.proxy(this.show,this),keyup:b.proxy(this.update,this),keydown:b.proxy(this.keydown,this)}],[this.component,{click:b.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:b.proxy(this.show,this)}]];this._secondaryEvents=
[[this.picker,{click:b.proxy(this.click,this)}],[b(window),{resize:b.proxy(this.place,this)}],[b(document),{mousedown:b.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).size()||this.picker.is(a.target)||this.picker.find(a.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},
_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(a,c){var d=c||this.date,e=new Date(d.getTime()+6E4*d.getTimezoneOffset());this.element.trigger({type:a,date:e,format:b.proxy(function(a){return n.formatDate(d,a||this.o.format,this.o.language)},this)})},show:function(a){this.isInline||this.picker.appendTo("body");this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();
a&&a.preventDefault();this._trigger("show")},hide:function(a){!this.isInline&&this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||
delete this.element.data().date},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6E4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6E4*a.getTimezoneOffset()))},setUTCDate:function(a){this.date=a;this.setValue()},setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a):this.component&&this.element.find("input").val(a)},getFormattedDate:function(a){void 0===a&&(a=this.o.format);
return n.formatDate(this.date,a,this.o.language)},setStartDate:function(a){this._process_options({startDate:a});this.update();this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a});this.update();this.updateNavArrows()},place:function(){if(!this.isInline){var a=parseInt(this.element.parents().filter(function(){return"auto"!=b(this).css("z-index")}).first().css("z-index"))+
10,c=this.component?this.component.parent().offset():this.element.offset(),d=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:c.top+d,left:c.left,zIndex:a})}},_allow_update:!0,update:function(){if(this._allow_update){var a,b=!1;arguments&&arguments.length&&("string"===typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):(a=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date);
this.date=n.parseDate(a,this.o.format,this.o.language);b&&this.setValue();this.viewDate=this.date<this.o.startDate?new Date(this.o.startDate):this.date>this.o.endDate?new Date(this.o.endDate):new Date(this.date);this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";this.o.calendarWeeks&&(b+='<th class="cw">&nbsp;</th>',this.picker.find(".datepicker-days thead tr:first-child").prepend('<th class="cw">&nbsp;</th>'));for(;a<this.o.weekStart+7;)b+='<th class="dow">'+r[this.o.language].daysMin[a++%
7]+"</th>";b+="</tr>";this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+r[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(a){a&&a.length?this.range=b.map(a,function(a){return a.valueOf()}):delete this.range;this.fill()},getClassNames:function(a){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=this.date.valueOf(),k=new Date;a.getUTCFullYear()<
d||a.getUTCFullYear()==d&&a.getUTCMonth()<e?c.push("old"):(a.getUTCFullYear()>d||a.getUTCFullYear()==d&&a.getUTCMonth()>e)&&c.push("new");this.o.todayHighlight&&a.getUTCFullYear()==k.getFullYear()&&a.getUTCMonth()==k.getMonth()&&a.getUTCDate()==k.getDate()&&c.push("today");f&&a.valueOf()==f&&c.push("active");(a.valueOf()<this.o.startDate||a.valueOf()>this.o.endDate||-1!==b.inArray(a.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled");this.range&&(a>this.range[0]&&a<this.range[this.range.length-
1]&&c.push("range"),-1!=b.inArray(a.valueOf(),this.range)&&c.push("selected"));return c},fill:function(){var a=new Date(this.viewDate),c=a.getUTCFullYear(),e=a.getUTCMonth(),a=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,f=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,g=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():Infinity,k=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,h;this.picker.find(".datepicker-days thead th.datepicker-switch").text(r[this.o.language].months[e]+
" "+c);this.picker.find("tfoot th.today").text(r[this.o.language].today).toggle(!1!==this.o.todayBtn);this.picker.find("tfoot th.clear").text(r[this.o.language].clear).toggle(!1!==this.o.clearBtn);this.updateNavArrows();this.fillMonths();var l=d(c,e-1,28,0,0,0,0),e=n.getDaysInMonth(l.getUTCFullYear(),l.getUTCMonth());l.setUTCDate(e);l.setUTCDate(e-(l.getUTCDay()-this.o.weekStart+7)%7);var m=new Date(l);m.setUTCDate(m.getUTCDate()+42);for(var m=m.valueOf(),e=[],w;l.valueOf()<m;){if(l.getUTCDay()==
this.o.weekStart&&(e.push("<tr>"),this.o.calendarWeeks)){w=new Date(+l+(this.o.weekStart-l.getUTCDay()-7)%7*864E5);w=new Date(+w+(11-w.getUTCDay())%7*864E5);var y=new Date(+(y=d(w.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864E5);e.push('<td class="cw">'+((w-y)/864E5/7+1)+"</td>")}w=this.getClassNames(l);w.push("day");var B=this.o.beforeShowDay(l);void 0===B?B={}:"boolean"===typeof B?B={enabled:B}:"string"===typeof B&&(B={classes:B});!1===B.enabled&&w.push("disabled");B.classes&&(w=w.concat(B.classes.split(/\s+/)));
B.tooltip&&(h=B.tooltip);w=b.unique(w);e.push('<td class="'+w.join(" ")+'"'+(h?' title="'+h+'"':"")+">"+l.getUTCDate()+"</td>");l.getUTCDay()==this.o.weekEnd&&e.push("</tr>");l.setUTCDate(l.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(e.join(""));h=this.date&&this.date.getUTCFullYear();e=this.picker.find(".datepicker-months").find("th:eq(1)").text(c).end().find("span").removeClass("active");h&&h==c&&e.eq(this.date.getUTCMonth()).addClass("active");(c<a||c>g)&&e.addClass("disabled");
c==a&&e.slice(0,f).addClass("disabled");c==g&&e.slice(k+1).addClass("disabled");e="";c=10*parseInt(c/10,10);f=this.picker.find(".datepicker-years").find("th:eq(1)").text(c+"-"+(c+9)).end().find("td");c-=1;for(k=-1;11>k;k++)e+='<span class="year'+(-1==k?" old":10==k?" new":"")+(h==c?" active":"")+(c<a||c>g?" disabled":"")+'">'+c+"</span>",c+=1;f.html(e)},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),a=a.getUTCMonth();switch(this.viewMode){case 0:-Infinity!==
this.o.startDate&&b<=this.o.startDate.getUTCFullYear()&&a<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});Infinity!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()&&a>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:-Infinity!==this.o.startDate&&b<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):
this.picker.find(".prev").css({visibility:"visible"}),Infinity!==this.o.endDate&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(a){a.preventDefault();a=b(a.target).closest("span, td, th");if(1==a.length)switch(a[0].nodeName.toLowerCase()){case "th":switch(a[0].className){case "datepicker-switch":this.showMode(1);break;case "prev":case "next":a=n.modes[this.viewMode].navStep*("prev"==a[0].className?
-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a)}this.fill();break;case "today":a=new Date;a=d(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);this.showMode(-2);this._setDate(a,"linked"==this.o.todayBtn?null:"view");break;case "clear":var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input"));c&&c.val("").change();this._trigger("changeDate");this.update();this.o.autoclose&&this.hide()}break;
case "span":if(!a.is(".disabled")){this.viewDate.setUTCDate(1);if(a.is(".month")){c=1;var e=a.parent().find("span").index(a),f=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(e);this._trigger("changeMonth",this.viewDate);1===this.o.minViewMode&&this._setDate(d(f,e,c,0,0,0,0))}else f=parseInt(a.text(),10)||0,c=1,e=0,this.viewDate.setUTCFullYear(f),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(d(f,e,c,0,0,0,0));this.showMode(-1);this.fill()}break;case "td":a.is(".day")&&
!a.is(".disabled")&&(c=parseInt(a.text(),10)||1,f=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),a.is(".old")?0===e?(e=11,f-=1):e-=1:a.is(".new")&&(11==e?(e=0,f+=1):e+=1),this._setDate(d(f,e,c,0,0,0,0)))}},_setDate:function(a,b){b&&"date"!=b||(this.date=new Date(a));b&&"view"!=b||(this.viewDate=new Date(a));this.fill();this.setValue();this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input"));c&&(c.change(),!this.o.autoclose||b&&"date"!=
b||this.hide())},moveMonth:function(a,b){if(!b)return a;var c=new Date(a.valueOf()),d=c.getUTCDate(),e=c.getUTCMonth(),f=Math.abs(b),g;b=0<b?1:-1;if(1==f){if(f=-1==b?function(){return c.getUTCMonth()==e}:function(){return c.getUTCMonth()!=g},g=e+b,c.setUTCMonth(g),0>g||11<g)g=(g+12)%12}else{for(var h=0;h<f;h++)c=this.moveMonth(c,b);g=c.getUTCMonth();c.setUTCDate(d);f=function(){return g!=c.getUTCMonth()}}for(;f();)c.setUTCDate(--d),c.setUTCMonth(g);return c},moveYear:function(a,b){return this.moveMonth(a,
12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))27==a.keyCode&&this.show();else{var b=!1,c,d,e;switch(a.keyCode){case 27:this.hide();a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;c=37==a.keyCode?-1:1;a.ctrlKey?(d=this.moveYear(this.date,c),e=this.moveYear(this.viewDate,c)):a.shiftKey?(d=this.moveMonth(this.date,c),e=this.moveMonth(this.viewDate,c)):(d=new Date(this.date),d.setUTCDate(this.date.getUTCDate()+
c),e=new Date(this.viewDate),e.setUTCDate(this.viewDate.getUTCDate()+c));this.dateWithinRange(d)&&(this.date=d,this.viewDate=e,this.setValue(),this.update(),a.preventDefault(),b=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;c=38==a.keyCode?-1:1;a.ctrlKey?(d=this.moveYear(this.date,c),e=this.moveYear(this.viewDate,c)):a.shiftKey?(d=this.moveMonth(this.date,c),e=this.moveMonth(this.viewDate,c)):(d=new Date(this.date),d.setUTCDate(this.date.getUTCDate()+7*c),e=new Date(this.viewDate),
e.setUTCDate(this.viewDate.getUTCDate()+7*c));this.dateWithinRange(d)&&(this.date=d,this.viewDate=e,this.setValue(),this.update(),a.preventDefault(),b=!0);break;case 13:this.hide();a.preventDefault();break;case 9:this.hide()}if(b){this._trigger("changeDate");var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input"));f&&f.change()}}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a)));this.picker.find(">div").hide().filter(".datepicker-"+
n.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var e=function(a,c){this.element=b(a);this.inputs=b.map(c.inputs,function(a){return a.jquery?a[0]:a});delete c.inputs;b(this.inputs).datepicker(c).bind("changeDate",b.proxy(this.dateUpdated,this));this.pickers=b.map(this.inputs,function(a){return b(a).data("datepicker")});this.updateDates()};e.prototype={updateDates:function(){this.dates=b.map(this.pickers,function(a){return a.date});this.updateRanges()},updateRanges:function(){var a=
b.map(this.dates,function(a){return a.valueOf()});b.each(this.pickers,function(b,c){c.setRange(a)})},dateUpdated:function(a){var c=b(a.target).data("datepicker").getUTCDate();a=b.inArray(a.target,this.inputs);var d=this.inputs.length;if(-1!=a){if(c<this.dates[a])for(;0<=a&&c<this.dates[a];)this.pickers[a--].setUTCDate(c);else if(c>this.dates[a])for(;a<d&&c>this.dates[a];)this.pickers[a++].setUTCDate(c);this.updateDates()}},remove:function(){b.map(this.pickers,function(a){a.remove()});delete this.element.data().datepicker}};
var g=b.fn.datepicker,h=b.fn.datepicker=function(d){var g=Array.apply(null,arguments);g.shift();var h;this.each(function(){var m=b(this),n=m.data("datepicker"),k="object"==typeof d&&d;if(!n){var n=a(this,"date"),r=b.extend({},l,n,k),r=c(r.language),k=b.extend({},l,r,n,k);m.is(".input-daterange")||k.inputs?(n={inputs:k.inputs||m.find("input").toArray()},m.data("datepicker",n=new e(this,b.extend(k,n)))):m.data("datepicker",n=new f(this,k))}if("string"==typeof d&&"function"==typeof n[d]&&(h=n[d].apply(n,
g),void 0!==h))return!1});return void 0!==h?h:this},l=b.fn.datepicker.defaults={autoclose:!1,beforeShowDay:b.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},m=b.fn.datepicker.locale_opts=["format","rtl","weekStart"];b.fn.datepicker.Constructor=f;var r=b.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),
daysShort:"Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysMin:"Su Mo Tu We Th Fr Sa Su".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),today:"Today",clear:"Clear"}},n={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return 0===a%4&&0!==a%
100||0===a%400},getDaysInMonth:function(a,b){return[31,n.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!b||!b.length||!a||0===a.length)throw Error("Invalid date format.");return{separators:b,parts:a}},parseDate:function(a,c,e){if(a instanceof Date)return a;"string"===typeof c&&(c=n.parseFormat(c));
if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(a)){var g=/([\-+]\d+)([dmwy])/,h=a.match(/([\-+]\d+)([dmwy])/g),k;a=new Date;for(var l=0;l<h.length;l++)switch(c=g.exec(h[l]),k=parseInt(c[1]),c[2]){case "d":a.setUTCDate(a.getUTCDate()+k);break;case "m":a=f.prototype.moveMonth.call(f.prototype,a,k);break;case "w":a.setUTCDate(a.getUTCDate()+7*k);break;case "y":a=f.prototype.moveYear.call(f.prototype,a,k)}return d(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,0)}h=a&&a.match(this.nonpunctuation)||
[];a=new Date;var g={},m="yyyy yy M MM m mm d dd".split(" ");k={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2E3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};var x;k.M=k.MM=k.mm=k.m;k.dd=k.d;a=d(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);var w=c.parts.slice();h.length!=w.length&&(w=b(w).filter(function(a,c){return-1!==b.inArray(c,
m)}).toArray());if(h.length==w.length){for(var l=0,y=w.length;l<y;l++){x=parseInt(h[l],10);c=w[l];if(isNaN(x))switch(c){case "MM":x=b(r[e].months).filter(function(){var a=this.slice(0,h[l].length),b=h[l].slice(0,a.length);return a==b});x=b.inArray(x[0],r[e].months)+1;break;case "M":x=b(r[e].monthsShort).filter(function(){var a=this.slice(0,h[l].length),b=h[l].slice(0,a.length);return a==b}),x=b.inArray(x[0],r[e].monthsShort)+1}g[c]=x}for(l=0;l<m.length;l++)if(c=m[l],c in g&&!isNaN(g[c]))k[c](a,g[c])}return a},
formatDate:function(a,c,d){"string"===typeof c&&(c=n.parseFormat(c));d={d:a.getUTCDate(),D:r[d].daysShort[a.getUTCDay()],DD:r[d].days[a.getUTCDay()],m:a.getUTCMonth()+1,M:r[d].monthsShort[a.getUTCMonth()],MM:r[d].months[a.getUTCMonth()],yy:a.getUTCFullYear().toString().substring(2),yyyy:a.getUTCFullYear()};d.dd=(10>d.d?"0":"")+d.d;d.mm=(10>d.m?"0":"")+d.m;a=[];for(var e=b.extend([],c.separators),f=0,g=c.parts.length;f<=g;f++)e.length&&a.push(e.shift()),a.push(d[c.parts[f]]);return a.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',
contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};n.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+n.headTemplate+"<tbody></tbody>"+n.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+n.headTemplate+n.contTemplate+n.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+
n.headTemplate+n.contTemplate+n.footTemplate+"</table></div></div>";b.fn.datepicker.DPGlobal=n;b.fn.datepicker.noConflict=function(){b.fn.datepicker=g;return this};b(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(a){var c=b(this);c.data("datepicker")||(a.preventDefault(),h.call(c,"show"))});b(function(){h.call(b('[data-provide="datepicker-inline"]'))})})(window.jQuery);
(function(b){b.fn.bdatepicker=b.fn.datepicker.noConflict();b.fn.datepicker||(b.fn.datepicker=b.fn.bdatepicker);var d=function(a){this.init("date",a,d.defaults);this.initPicker(a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.abstractinput);b.extend(d.prototype,{initPicker:function(a,c){this.options.viewformat||(this.options.viewformat=this.options.format);a.datepicker=b.fn.editableutils.tryParseJson(a.datepicker,!0);this.options.datepicker=b.extend({},c.datepicker,a.datepicker,{format:this.options.viewformat});
this.options.datepicker.language=this.options.datepicker.language||"en";this.dpg=b.fn.bdatepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker);this.options.clear&&(this.$clear=b('<a href="#"></a>').html(this.options.clear).click(b.proxy(function(a){a.preventDefault();a.stopPropagation();this.clear()},this)),this.$tpl.parent().append(b('<div class="editable-clear">').append(this.$clear)))},
value2html:function(a,b){var f=a?this.dpg.formatDate(a,this.parsedViewFormat,this.options.datepicker.language):"";d.superclass.value2html.call(this,f,b)},html2value:function(a){return this.parseDate(a,this.parsedViewFormat)},value2str:function(a){return a?this.dpg.formatDate(a,this.parsedFormat,this.options.datepicker.language):""},str2value:function(a){return this.parseDate(a,this.parsedFormat)},value2submit:function(a){return this.value2str(a)},value2input:function(a){this.$input.bdatepicker("update",
a)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null;this.$input.find(".active").removeClass("active");this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(a){if(!b(a.currentTarget).is(".old")&&!b(a.currentTarget).is(".new")){var c=b(this).closest("form");setTimeout(function(){c.submit()},200)}})},parseDate:function(a,b){var d=
null,e;a&&(d=this.dpg.parseDate(a,b,this.options.datepicker.language),"string"===typeof a&&(e=this.dpg.formatDate(d,b,this.options.datepicker.language),a!==e&&(d=null)));return d}});d.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"});b.fn.editabletypes.date=d})(window.jQuery);
(function(b){var d=function(a){this.init("datefield",a,d.defaults);this.initPicker(a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.date);b.extend(d.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.bdatepicker(this.options.datepicker);this.$input.off("focus keydown");this.$input.keyup(b.proxy(function(){this.$tpl.removeData("date");this.$tpl.bdatepicker("update")},this))},value2input:function(a){this.$input.val(a?
this.dpg.formatDate(a,this.parsedViewFormat,this.options.datepicker.language):"");this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){b.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});d.defaults=b.extend({},b.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,
startView:0,minViewMode:0,autoclose:!0}});b.fn.editabletypes.datefield=d})(window.jQuery);
(function(b){var d=function(a){this.init("datetime",a,d.defaults);this.initPicker(a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.abstractinput);b.extend(d.prototype,{initPicker:function(a,c){this.options.viewformat||(this.options.viewformat=this.options.format);a.datetimepicker=b.fn.editableutils.tryParseJson(a.datetimepicker,!0);this.options.datetimepicker=b.extend({},c.datetimepicker,a.datetimepicker,{format:this.options.viewformat});this.options.datetimepicker.language=this.options.datetimepicker.language||
"en";this.dpg=b.fn.datetimepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker);this.$input.on("changeMode",function(a){var c=b(this).closest("form").parent();setTimeout(function(){c.triggerHandler("resize")},0)});this.options.clear&&(this.$clear=b('<a href="#"></a>').html(this.options.clear).click(b.proxy(function(a){a.preventDefault();
a.stopPropagation();this.clear()},this)),this.$tpl.parent().append(b('<div class="editable-clear">').append(this.$clear)))},value2html:function(a,b){var f=a?this.dpg.formatDate(this.toUTC(a),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(b)d.superclass.value2html.call(this,f,b);else return f},html2value:function(a){return(a=this.parseDate(a,this.parsedViewFormat))?this.fromUTC(a):null},value2str:function(a){return a?this.dpg.formatDate(this.toUTC(a),this.parsedFormat,
this.options.datetimepicker.language,this.options.formatType):""},str2value:function(a){return(a=this.parseDate(a,this.parsedFormat))?this.fromUTC(a):null},value2submit:function(a){return this.value2str(a)},value2input:function(a){a&&this.$input.data("datetimepicker").setDate(a)},input2value:function(){var a=this.$input.data("datetimepicker");return a.date?a.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null;this.$input.find(".active").removeClass("active");
this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(a){var c=b(this).closest("form");setTimeout(function(){c.submit()},200)})},toUTC:function(a){return a?new Date(a.valueOf()-6E4*a.getTimezoneOffset()):a},fromUTC:function(a){return a?new Date(a.valueOf()+6E4*a.getTimezoneOffset()):a},parseDate:function(a,b){var d=null,e;a&&(d=this.dpg.parseDate(a,b,this.options.datetimepicker.language,this.options.formatType),"string"===
typeof a&&(e=this.dpg.formatDate(d,b,this.options.datetimepicker.language,this.options.formatType),a!==e&&(d=null)));return d}});d.defaults=b.extend({},b.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"});b.fn.editabletypes.datetime=d})(window.jQuery);
(function(b){var d=function(a){this.init("datetimefield",a,d.defaults);this.initPicker(a,d.defaults)};b.fn.editableutils.inherit(d,b.fn.editabletypes.datetime);b.extend(d.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datetimepicker(this.options.datetimepicker);this.$input.off("focus keydown");this.$input.keyup(b.proxy(function(){this.$tpl.removeData("date");this.$tpl.datetimepicker("update")},this))},value2input:function(a){this.$input.val(this.value2html(a));
this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){b.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});d.defaults=b.extend({},b.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}});b.fn.editabletypes.datetimefield=d})(window.jQuery);
(function(b){var d=function(a){this.init("typeahead",a,d.defaults);this.options.typeahead=b.extend({},d.defaults.typeahead,{matcher:this.matcher,sorter:this.sorter,highlighter:this.highlighter,updater:this.updater},a.typeahead)};b.fn.editableutils.inherit(d,b.fn.editabletypes.list);b.extend(d.prototype,{renderList:function(){this.$input=this.$tpl.is("input")?this.$tpl:this.$tpl.find('input[type="text"]');this.options.typeahead.source=this.sourceData;this.$input.typeahead(this.options.typeahead);var a=
this.$input.data("typeahead");a.render=b.proxy(this.typeaheadRender,a);a.select=b.proxy(this.typeaheadSelect,a);a.move=b.proxy(this.typeaheadMove,a);this.renderClear();this.setClass();this.setAttr("placeholder")},value2htmlFinal:function(a,c){if(this.getIsObjects()){var d=b.fn.editableutils.itemsByValue(a,this.sourceData);a=d.length?d[0].text:""}b.fn.editabletypes.abstractinput.prototype.value2html.call(this,a,c)},html2value:function(a){return a?a:null},value2input:function(a){if(this.getIsObjects()){var c=
b.fn.editableutils.itemsByValue(a,this.sourceData);this.$input.data("value",a).val(c.length?c[0].text:"")}else this.$input.val(a)},input2value:function(){if(this.getIsObjects()){var a=this.$input.data("value"),c=b.fn.editableutils.itemsByValue(a,this.sourceData);return c.length&&c[0].text.toLowerCase()===this.$input.val().toLowerCase()?a:null}return this.$input.val()},getIsObjects:function(){if(void 0===this.isObjects){this.isObjects=!1;for(var a=0;a<this.sourceData.length;a++)if(this.sourceData[a].value!==
this.sourceData[a].text){this.isObjects=!0;break}}return this.isObjects},activate:b.fn.editabletypes.text.prototype.activate,renderClear:b.fn.editabletypes.text.prototype.renderClear,postrender:b.fn.editabletypes.text.prototype.postrender,toggleClear:b.fn.editabletypes.text.prototype.toggleClear,clear:function(){b.fn.editabletypes.text.prototype.clear.call(this);this.$input.data("value","")},matcher:function(a){return b.fn.typeahead.Constructor.prototype.matcher.call(this,a.text)},sorter:function(a){for(var b=
[],d=[],e=[],g,h;g=a.shift();)h=g.text,h.toLowerCase().indexOf(this.query.toLowerCase())?~h.indexOf(this.query)?d.push(g):e.push(g):b.push(g);return b.concat(d,e)},highlighter:function(a){return b.fn.typeahead.Constructor.prototype.highlighter.call(this,a.text)},updater:function(a){this.$element.data("value",a.value);return a.text},typeaheadRender:function(a){var c=this;a=b(a).map(function(a,d){a=b(c.options.item).data("item",d);a.find("a").html(c.highlighter(d));return a[0]});this.options.autoSelect&&
a.first().addClass("active");this.$menu.html(a);return this},typeaheadSelect:function(){var a=this.$menu.find(".active").data("item");(this.options.autoSelect||a)&&this.$element.val(this.updater(a)).change();return this.hide()},typeaheadMove:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:if(!this.$menu.find(".active").length)return;a.preventDefault();break;case 38:a.preventDefault();this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}}});d.defaults=b.extend({},
b.fn.editabletypes.list.defaults,{tpl:'<input type="text">',typeahead:null,clear:!0});b.fn.editabletypes.typeahead=d})(window.jQuery);
(function(){var b;b||(b=$.fn.editableform.Constructor,b.prototype.saveWithUrlHook=function(b){var a,c,f,e,g;g=this.options.url;a=this.options.model;e=this.options.nested;c=this.options.nid;f=this.options.locale;this.options.url=function(b){return function(d){var m,r,n,p;if("function"===typeof g)return g.call(b.options.scope,d);if(null!=g&&"never"!==b.options.send)return m=d.name,r=d.value,"[object Array]"===Object.prototype.toString.call(d.value)&&0===d.value.length&&d.value.push(""),p={},e?(n={},
n[m]=r,n.id=c,f&&(n.locale=f),p[e+"_attributes"]=n):p[m]=r,d[a]=p,delete d.name,delete d.value,delete d.pk,$.ajax($.extend({url:g,data:d,type:"PUT",dataType:"json"},b.options.ajaxOptions))}}(this);return this.saveWithoutUrlHook(b)},b.prototype.saveWithoutUrlHook=b.prototype.save,b.prototype.save=b.prototype.saveWithUrlHook)}).call(this);
(function(){jQuery(function(b){return b("[data-classes]").on("save",function(d,a){var c,f,e,g,h;h=a.newValue;e=b(this);f=e.data("classes")||{};for(g in f)c=f[g],e.removeClass(c);e.addClass(f[h]);return e.css("background-color","")})})}).call(this);(function(){$.fn.editable.defaults.error=function(b,d){var a;a=$(this).data("name");return b.responseJSON.errors[a].join("; ")}}).call(this);(function(){}).call(this);
(function(){function b(a){return function(b,c,d,e){c=M(c,e,4);var f=!z(b)&&k.keys(b),g=(f||b).length,h=0<a?0:g-1;3>arguments.length&&(d=b[f?f[h]:h],h+=a);for(var l=c,m=d;0<=h&&g>h;h+=a)var n=f?f[h]:h,m=l(m,b[n],n,b);return m}}function d(a){return function(b,c,d){c=F(c,d);d=q(b);for(var e=0<a?0:d-1;0<=e&&d>e;e+=a)if(c(b[e],e,b))return e;return-1}}function a(a,b,c){return function(d,e,f){var g=0,h=q(d);if("number"==typeof f)0<a?g=0<=f?f:Math.max(f+h,g):h=0<=f?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=
c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(m.call(d,g,h),k.isNaN),0<=f?f+g:-1;for(f=0<a?g:h-1;0<=f&&h>f;f+=a)if(d[f]===e)return f;return-1}}function c(a,b){var c=Y.length,d=a.constructor,d=k.isFunction(d)&&d.prototype||h,e="constructor";for(k.has(a,e)&&!k.contains(b,e)&&b.push(e);c--;)e=Y[c],e in a&&a[e]!==d[e]&&!k.contains(b,e)&&b.push(e)}var f=this,e=f._,g=Array.prototype,h=Object.prototype,l=g.push,m=g.slice,r=h.toString,n=h.hasOwnProperty,p=Array.isArray,t=Object.keys,s=Function.prototype.bind,
u=Object.create,v=function(){},k=function(a){return a instanceof k?a:this instanceof k?void(this._wrapped=a):new k(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):f._=k;k.VERSION="1.8.3";var M=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,
c,d,e,f)}}return function(){return a.apply(b,arguments)}},F=function(a,b,c){return null==a?k.identity:k.isFunction(a)?M(a,b,c):k.isObject(a)?k.matcher(a):k.property(a)};k.iteratee=function(a,b){return F(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),k=g.length,h=0;k>h;h++){var l=g[h];b&&void 0!==c[l]||(c[l]=f[l])}return c}},w=function(a){if(!k.isObject(a))return{};if(u)return u(a);v.prototype=a;a=new v;
return v.prototype=null,a},y=function(a){return function(b){return null==b?void 0:b[a]}},B=Math.pow(2,53)-1,q=y("length"),z=function(a){a=q(a);return"number"==typeof a&&0<=a&&B>=a};k.each=k.forEach=function(a,b,c){b=M(b,c);var d;if(z(a))for(c=0,d=a.length;d>c;c++)b(a[c],c,a);else{var e=k.keys(a);c=0;for(d=e.length;d>c;c++)b(a[e[c]],e[c],a)}return a};k.map=k.collect=function(a,b,c){b=F(b,c);c=!z(a)&&k.keys(a);for(var d=(c||a).length,e=Array(d),f=0;d>f;f++){var g=c?c[f]:f;e[f]=b(a[g],g,a)}return e};
k.reduce=k.foldl=k.inject=b(1);k.reduceRight=k.foldr=b(-1);k.find=k.detect=function(a,b,c){var d;return d=z(a)?k.findIndex(a,b,c):k.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0};k.filter=k.select=function(a,b,c){var d=[];return b=F(b,c),k.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d};k.reject=function(a,b,c){return k.filter(a,k.negate(F(b)),c)};k.every=k.all=function(a,b,c){b=F(b,c);c=!z(a)&&k.keys(a);for(var d=(c||a).length,e=0;d>e;e++){var f=c?c[e]:e;if(!b(a[f],f,a))return!1}return!0};k.some=
k.any=function(a,b,c){b=F(b,c);c=!z(a)&&k.keys(a);for(var d=(c||a).length,e=0;d>e;e++){var f=c?c[e]:e;if(b(a[f],f,a))return!0}return!1};k.contains=k.includes=k.include=function(a,b,c,d){return z(a)||(a=k.values(a)),("number"!=typeof c||d)&&(c=0),0<=k.indexOf(a,b,c)};k.invoke=function(a,b){var c=m.call(arguments,2),d=k.isFunction(b);return k.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})};k.pluck=function(a,b){return k.map(a,k.property(b))};k.where=function(a,b){return k.filter(a,
k.matcher(b))};k.findWhere=function(a,b){return k.find(a,k.matcher(b))};k.max=function(a,b,c){var d,e=-1/0,f=-1/0;if(null==b&&null!=a){a=z(a)?a:k.values(a);for(var g=0,h=a.length;h>g;g++)c=a[g],c>e&&(e=c)}else b=F(b,c),k.each(a,function(a,c,g){d=b(a,c,g);(d>f||d===-1/0&&e===-1/0)&&(e=a,f=d)});return e};k.min=function(a,b,c){var d,e=1/0,f=1/0;if(null==b&&null!=a){a=z(a)?a:k.values(a);for(var g=0,h=a.length;h>g;g++)c=a[g],e>c&&(e=c)}else b=F(b,c),k.each(a,function(a,c,g){d=b(a,c,g);(f>d||1/0===d&&1/
0===e)&&(e=a,f=d)});return e};k.shuffle=function(a){for(var b=z(a)?a:k.values(a),c=b.length,d=Array(c),e=0;c>e;e++)a=k.random(0,e),a!==e&&(d[e]=d[a]),d[a]=b[e];return d};k.sample=function(a,b,c){return null==b||c?(z(a)||(a=k.values(a)),a[k.random(a.length-1)]):k.shuffle(a).slice(0,Math.max(0,b))};k.sortBy=function(a,b,c){return b=F(b,c),k.pluck(k.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;
if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var N=function(a){return function(b,c,d){var e={};return c=F(c,d),k.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};k.groupBy=N(function(a,b,c){k.has(a,c)?a[c].push(b):a[c]=[b]});k.indexBy=N(function(a,b,c){a[c]=b});k.countBy=N(function(a,b,c){k.has(a,c)?a[c]++:a[c]=1});k.toArray=function(a){return a?k.isArray(a)?m.call(a):z(a)?k.map(a,k.identity):k.values(a):[]};k.size=function(a){return null==a?0:z(a)?a.length:k.keys(a).length};k.partition=
function(a,b,c){b=F(b,c);var d=[],e=[];return k.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]};k.first=k.head=k.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:k.initial(a,a.length-b)};k.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))};k.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:k.rest(a,Math.max(0,a.length-b))};k.rest=k.tail=k.drop=function(a,b,c){return m.call(a,null==b||c?1:b)};k.compact=function(a){return k.filter(a,
k.identity)};var H=function(a,b,c,d){var e=[],f=0;d=d||0;for(var g=q(a);g>d;d++){var h=a[d];if(z(h)&&(k.isArray(h)||k.isArguments(h))){b||(h=H(h,b,c));var l=0,m=h.length;for(e.length+=m;m>l;)e[f++]=h[l++]}else c||(e[f++]=h)}return e};k.flatten=function(a,b){return H(a,b,!1)};k.without=function(a){return k.difference(a,m.call(arguments,1))};k.uniq=k.unique=function(a,b,c,d){k.isBoolean(b)||(d=c,c=b,b=!1);null!=c&&(c=F(c,d));d=[];for(var e=[],f=0,g=q(a);g>f;f++){var h=a[f],l=c?c(h,f,a):h;b?(f&&e===
l||d.push(h),e=l):c?k.contains(e,l)||(e.push(l),d.push(h)):k.contains(d,h)||d.push(h)}return d};k.union=function(){return k.uniq(H(arguments,!0,!0))};k.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=q(a);e>d;d++){var f=a[d];if(!k.contains(b,f)){for(var g=1;c>g&&k.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b};k.difference=function(a){var b=H(arguments,!0,!0,1);return k.filter(a,function(a){return!k.contains(b,a)})};k.zip=function(){return k.unzip(arguments)};k.unzip=function(a){for(var b=
a&&k.max(a,q).length||0,c=Array(b),d=0;b>d;d++)c[d]=k.pluck(a,d);return c};k.object=function(a,b){for(var c={},d=0,e=q(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};k.findIndex=d(1);k.findLastIndex=d(-1);k.sortedIndex=function(a,b,c,d){c=F(c,d,1);b=c(b);d=0;for(var e=q(a);e>d;){var f=Math.floor((d+e)/2);c(a[f])<b?d=f+1:e=f}return d};k.indexOf=a(1,k.findIndex,k.sortedIndex);k.lastIndexOf=a(-1,k.findLastIndex);k.range=function(a,b,c){null==b&&(b=a||0,a=0);c=c||1;b=Math.max(Math.ceil((b-a)/
c),0);for(var d=Array(b),e=0;b>e;e++,a+=c)d[e]=a;return d};var T=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);b=w(a.prototype);a=a.apply(b,e);return k.isObject(a)?a:b};k.bind=function(a,b){if(s&&a.bind===s)return s.apply(a,m.call(arguments,1));if(!k.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function(){return T(a,d,b,this,c.concat(m.call(arguments)))};return d};k.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=
0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===k?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return T(a,c,this,this,f)};return c};k.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=k.bind(a[c],a);return a};k.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return k.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c};k.delay=
function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};k.defer=k.partial(k.delay,k,1);k.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var l=function(){h=!1===c.leading?0:k.now();g=null;f=a.apply(d,e);g||(d=e=null)};return function(){var m=k.now();h||!1!==c.leading||(h=m);var n=b-(m-h);return d=this,e=arguments,0>=n||n>b?(g&&(clearTimeout(g),g=null),h=m,f=a.apply(d,e),g||(d=e=null)):g||!1===c.trailing||(g=setTimeout(l,n)),f}};k.debounce=function(a,
b,c){var d,e,f,g,h,l=function(){var m=k.now()-g;b>m&&0<=m?d=setTimeout(l,b-m):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this;e=arguments;g=k.now();var m=c&&!d;return d||(d=setTimeout(l,b)),m&&(h=a.apply(f,e),f=e=null),h}};k.wrap=function(a,b){return k.partial(b,a)};k.negate=function(a){return function(){return!a.apply(this,arguments)}};k.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}};
k.after=function(a,b){return function(){return 1>--a?b.apply(this,arguments):void 0}};k.before=function(a,b){var c;return function(){return 0<--a&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}};k.once=k.partial(k.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),Y="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");k.keys=function(a){if(!k.isObject(a))return[];if(t)return t(a);var b=[],d;for(d in a)k.has(a,d)&&b.push(d);return I&&c(a,b),b};
k.allKeys=function(a){if(!k.isObject(a))return[];var b=[],d;for(d in a)b.push(d);return I&&c(a,b),b};k.values=function(a){for(var b=k.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d};k.mapObject=function(a,b,c){b=F(b,c);for(var d=k.keys(a),e=d.length,f={},g=0;e>g;g++)c=d[g],f[c]=b(a[c],c,a);return f};k.pairs=function(a){for(var b=k.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d};k.invert=function(a){for(var b={},c=k.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=
c[d];return b};k.functions=k.methods=function(a){var b=[],c;for(c in a)k.isFunction(a[c])&&b.push(c);return b.sort()};k.extend=x(k.allKeys);k.extendOwn=k.assign=x(k.keys);k.findKey=function(a,b,c){b=F(b,c);var d;c=k.keys(a);for(var e=0,f=c.length;f>e;e++)if(d=c[e],b(a[d],d,a))return d};k.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;k.isFunction(b)?(e=k.allKeys(g),d=M(b,c)):(e=H(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,l=e.length;l>h;h++){var m=e[h],
n=g[m];d(n,m,g)&&(f[m]=n)}return f};k.omit=function(a,b,c){if(k.isFunction(b))b=k.negate(b);else{var d=k.map(H(arguments,!1,!1,1),String);b=function(a,b){return!k.contains(d,b)}}return k.pick(a,b,c)};k.defaults=x(k.allKeys,!0);k.create=function(a,b){var c=w(a);return b&&k.extendOwn(c,b),c};k.clone=function(a){return k.isObject(a)?k.isArray(a)?a.slice():k.extend({},a):a};k.tap=function(a,b){return b(a),a};k.isMatch=function(a,b){var c=k.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=
0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var Z=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof k&&(a=a._wrapped);b instanceof k&&(b=b._wrapped);var e=r.call(a);if(e!==r.call(b))return!1;switch(e){case "[object RegExp]":case "[object String]":return""+a==""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}e="[object Array]"===e;if(!e){if("object"!=
typeof a||"object"!=typeof b)return!1;var f=a.constructor,g=b.constructor;if(f!==g&&!(k.isFunction(f)&&f instanceof f&&k.isFunction(g)&&g instanceof g)&&"constructor"in a&&"constructor"in b)return!1}c=c||[];d=d||[];for(f=c.length;f--;)if(c[f]===a)return d[f]===b;if(c.push(a),d.push(b),e){if(f=a.length,f!==b.length)return!1;for(;f--;)if(!Z(a[f],b[f],c,d))return!1}else{var h,e=k.keys(a);if(f=e.length,k.keys(b).length!==f)return!1;for(;f--;)if(h=e[f],!k.has(b,h)||!Z(a[h],b[h],c,d))return!1}return c.pop(),
d.pop(),!0};k.isEqual=function(a,b){return Z(a,b)};k.isEmpty=function(a){return null==a?!0:z(a)&&(k.isArray(a)||k.isString(a)||k.isArguments(a))?0===a.length:0===k.keys(a).length};k.isElement=function(a){return!(!a||1!==a.nodeType)};k.isArray=p||function(a){return"[object Array]"===r.call(a)};k.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};k.each("Arguments Function String Number Date RegExp Error".split(" "),function(a){k["is"+a]=function(b){return r.call(b)==="[object "+
a+"]"}});k.isArguments(arguments)||(k.isArguments=function(a){return k.has(a,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(k.isFunction=function(a){return"function"==typeof a||!1});k.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};k.isNaN=function(a){return k.isNumber(a)&&a!==+a};k.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===r.call(a)};k.isNull=function(a){return null===a};k.isUndefined=function(a){return void 0===a};k.has=function(a,b){return null!=
a&&n.call(a,b)};k.noConflict=function(){return f._=e,this};k.identity=function(a){return a};k.constant=function(a){return function(){return a}};k.noop=function(){};k.property=y;k.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}};k.matcher=k.matches=function(a){return a=k.extendOwn({},a),function(b){return k.isMatch(b,a)}};k.times=function(a,b,c){var d=Array(Math.max(0,a));b=M(b,c,1);for(c=0;a>c;c++)d[c]=b(c);return d};k.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*
(b-a+1))};k.now=Date.now||function(){return(new Date).getTime()};p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};x=k.invert(p);y=function(a){var b=function(b){return a[b]},c="(?:"+k.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};k.escape=y(p);k.unescape=y(x);k.result=function(a,b,c){b=null==a?void 0:a[b];return void 0===b&&(b=c),k.isFunction(b)?b.call(a):b};var A=0;k.uniqueId=function(a){var b=
++A+"";return a?a+b:b};k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Q=/\\|'|\r|\n|\u2028|\u2029/g,S=function(a){return"\\"+D[a]};k.template=function(a,b,c){!b&&c&&(b=c);b=k.defaults({},b,k.templateSettings);c=RegExp([(b.escape||C).source,(b.interpolate||C).source,(b.evaluate||C).source].join("|")+"|$","g");var d=0,e="__p+='";a.replace(c,function(b,c,f,
g,h){return e+=a.slice(d,h).replace(Q,S),d=h+b.length,c?e+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":f?e+="'+\n((__t=("+f+"))==null?'':__t)+\n'":g&&(e+="';\n"+g+"\n__p+='"),b});e+="';\n";b.variable||(e="with(obj||{}){\n"+e+"}\n");e="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+e+"return __p;\n";try{var f=new Function(b.variable||"obj","_",e)}catch(g){throw g.source=e,g;}c=function(a){return f.call(this,a,k)};return c.source="function("+(b.variable||
"obj")+"){\n"+e+"}",c};k.chain=function(a){a=k(a);return a._chain=!0,a};var R=function(a,b){return a._chain?k(b).chain():b};k.mixin=function(a){k.each(k.functions(a),function(b){var c=k[b]=a[b];k.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),R(this,c.apply(k,a))}})};k.mixin(k);k.each("pop push reverse shift sort splice unshift".split(" "),function(a){var b=g[a];k.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||
delete c[0],R(this,c)}});k.each(["concat","join","slice"],function(a){var b=g[a];k.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}});k.prototype.value=function(){return this._wrapped};k.prototype.valueOf=k.prototype.toJSON=k.prototype.value;k.prototype.toString=function(){return""+this._wrapped};"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}).call(this);
